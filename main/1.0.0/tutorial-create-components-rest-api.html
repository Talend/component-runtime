<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talend Component Kit Developer Reference Guide :: Create components for REST API</title>
    <link rel="canonical" href="https://talend.github.io/component-runtime/main/1.38.0/tutorial-create-components-rest-api.html">
    <meta name="generator" content="Talend Component Kit Generator">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Create components for REST API :: Talend Component Kit Developer Reference Guide</title>
    <link rel="canonical" href="https://talend.github.io/component-runtime/main/1.38.0/tutorial-create-components-rest-api.html">
    <meta name="generator" content="Antora 2.2.0">
<meta name="date" content="2021-10-07T12:10:07.523Z" scheme="YYYY-MM-DDTHH:mm:ss.sssZ">
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha256-NuCn4IvuZXdBaFKJOAcsU2Q3ZpwbdFisd5dux4jkQ5w=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/idea.min.css" integrity="sha256-rD61BPsgKHzJPyg7vpXaYOw6tMYuY2fz1p9033NYeM8=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@talend/bootstrap-theme@0.200.1/dist/bootstrap.css">
<link rel="stylesheet" href="../../_/css/talend.css">
<link rel="shortcut icon" href="../../_/images/favicon_0.ico" />


<script type="text/x-mathjax-config">
                MathJax.Hub.Config({
                  messageStyle: "none",
                  tex2jax: {
                    inlineMath: [["\\(", "\\)"]],
                    displayMath: [["\\[", "\\]"]],
                    ignoreClass: "nostem|nolatexmath"
                  },
                  asciimath2jax: {
                    delimiters: [["\\$", "\\$"]],
                    ignoreClass: "nostem|noasciimath"
                  },
                  TeX: { equationNumbers: { autoNumber: "none" } }
                });
                </script>
<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PSBN"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','GTM-PSBN')</script>
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body>
      <svg xmlns="http://www.w3.org/2000/svg" focusable="false" style="display: none;">
    <symbol id="talend-logo-square">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
            <path fill="#FFF" d="M8,5.32907052e-14 C12.4182648,5.32907052e-14 16,3.58173516 16,8 C16,12.4188737 12.4182648,16.0006088 8,16.0006088 C3.58173516,16.0006088 0,12.4188737 0,8 C0,3.58173516 3.58173516,5.32907052e-14 8,5.32907052e-14 Z M7.86070588,3.63987227 C7.41418487,4.67207395 6.53747899,5.46891429 5.4532437,5.80834286 C5.4532437,5.80834286 5.23179832,5.86098151 5.28867227,6.09271261 C5.29532773,6.11267899 5.30137815,6.13264538 5.31105882,6.15261176 C5.34191597,6.21735126 5.37942857,6.25062857 5.42359664,6.25607395 L6.13391597,6.25607395 L6.13391597,10.6517042 C6.13391597,11.2755025 6.32329412,11.7117378 6.70205042,11.959805 C7.08020168,12.2072672 7.58843697,12.3306958 8.22554622,12.3306958 C8.42521008,12.3306958 8.65633613,12.2937882 8.91952941,12.218763 C9.18272269,12.1431328 9.43078992,12.0469311 9.66312605,11.9295529 C9.89606723,11.8127798 10.0672941,11.6941916 10.1780168,11.5737882 C10.2046387,11.5568471 10.2046387,11.5090487 10.1780168,11.4316034 C10.151395,11.354158 10.1138824,11.282158 10.0648739,11.2162084 C10.0164706,11.1496538 9.97895798,11.1230319 9.95233613,11.1363429 C9.78413445,11.2198387 9.60020168,11.2912336 9.40114286,11.3487126 C9.20208403,11.4061916 9.02904202,11.4352336 8.88322689,11.4352336 C8.7192605,11.4352336 8.59401681,11.397721 8.50810084,11.325721 C8.42157983,11.2525109 8.35986555,11.1169815 8.32235294,10.9203429 C8.28423529,10.7237042 8.26547899,10.4363092 8.26547899,10.0599731 L8.26547899,6.24276303 L9.69337815,6.24276303 C9.74178151,6.24276303 9.78715966,6.19617479 9.82951261,6.10239328 C9.8712605,6.01042689 9.89243697,5.89546891 9.89243697,5.75812437 C9.89243697,5.70004034 9.87791597,5.64861176 9.84887395,5.60504874 C9.82043697,5.56088067 9.78171429,5.53667899 9.73331092,5.5324437 L8.26547899,5.5324437 L8.26547899,3.6792 C8.26547899,3.60235966 8.21465546,3.54790588 8.1245042,3.51099832 C7.95811765,3.45896471 7.86070588,3.63987227 7.86070588,3.63987227 Z"</path>
        </svg>
    </symbol>
    <symbol id="talend-component-kit-positive">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
            <g fill="none">
                <path fill="#005695" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path>
                <path fill="#FFF" d="M5.69 10.662a2.3 2.3 0 0 0 1.425.492 2.3 2.3 0 0 0 1.664-.709l-.631-.632 1.005-1.005a.33.33 0 0 0 0-.466.332.332 0 0 0-.467 0L7.68 9.347 6.633 8.3l1.005-1.005a.33.33 0 0 0-.467-.466L6.167 7.832l-.653-.652a2.3 2.3 0 0 0-.71 1.664c0 .54.187 1.037.498 1.43L3.878 11.7a.721.721 0 0 0-.358.027 5.824 5.824 0 0 1-.722-6.368c1.364-2.7 4.612-3.914 7.41-2.777l-.348.69 1.584-.369-.643-1.495-.351.695C7.384.832 3.818 2.15 2.32 5.117a6.359 6.359 0 0 0 .798 6.962.704.704 0 0 0 1.26.631.704.704 0 0 0-.036-.699l1.349-1.349z"></path>
                <path fill="#FFF" d="M12.623 3.031a.706.706 0 0 0-.973.894l-1.296 1.298a2.304 2.304 0 0 0-3.092.215l3.266 3.265a2.304 2.304 0 0 0 .213-3.092l1.299-1.297a.701.701 0 0 0 .504.006 5.838 5.838 0 0 1 .675 6.311c-1.332 2.636-4.524 3.871-7.284 2.826l.339-.67-1.585.368.643 1.494.36-.712c3.028 1.18 6.538-.162 8.005-3.064a6.375 6.375 0 0 0-.758-6.912.703.703 0 0 0-.316-.93z"></path>
            </g>
        </svg>
    </symbol>
</svg>

<header class="global-header">
  <nav class="navbar navbar-default">
      <div class="navbar-text-content nav navbar-nav">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <button aria-label="Go to Portal" id="header-talend-logo" type="button" class="btn-icon-only btn btn-link">
            <svg name="talend-logo-square" focusable="false" aria-hidden="true">
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#talend-logo-square"></use>
            </svg>
        </button>
        <button aria-label="Kit logo" id="header-kit-logo" type="button" class="btn-icon-only btn btn-link">
          <svg name="talend-component-kit-positive" focusable="false" aria-hidden="true">
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#talend-component-kit-positive"></use>
          </svg>
        </button>
        <a class="navbar-single-link" href="index.html">Talend Component Kit</a>
        <div class="btn-group navbar-versions">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                1.0.0
              <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
                <li class="navbar-item version">
                    <a href="../1.38.0/index.html">1.38.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.37.1/index.html">1.37.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.37.0/index.html">1.37.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.36.1/index.html">1.36.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.36.0/index.html">1.36.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.35.1/index.html">1.35.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.35.0/index.html">1.35.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.34.1/index.html">1.34.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.34.0/index.html">1.34.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.33.2/index.html">1.33.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.33.1/index.html">1.33.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.33.0/index.html">1.33.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.32.2/index.html">1.32.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.32.1/index.html">1.32.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.32.0/index.html">1.32.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.31.2/index.html">1.31.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.31.1/index.html">1.31.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.31.0/index.html">1.31.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.30.0/index.html">1.30.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.28.2/index.html">1.28.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.28.1/index.html">1.28.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.28.0/index.html">1.28.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.27/index.html">1.1.27</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.26/index.html">1.1.26</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.25/index.html">1.1.25</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.24/index.html">1.1.24</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.23/index.html">1.1.23</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.22/index.html">1.1.22</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.21/index.html">1.1.21</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.20/index.html">1.1.20</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.19/index.html">1.1.19</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.18/index.html">1.1.18</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.17/index.html">1.1.17</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.16/index.html">1.1.16</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.15/index.html">1.1.15</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.14/index.html">1.1.14</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.13/index.html">1.1.13</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.12/index.html">1.1.12</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.11/index.html">1.1.11</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.10/index.html">1.1.10</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.9/index.html">1.1.9</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.8/index.html">1.1.8</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.7/index.html">1.1.7</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.6/index.html">1.1.6</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.5/index.html">1.1.5</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.4/index.html">1.1.4</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.3/index.html">1.1.3</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.2/index.html">1.1.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.1/index.html">1.1.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.0/index.html">1.1.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.0.4/index.html">1.0.4</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.0.3/index.html">1.0.3</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.0.2/index.html">1.0.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.0.1/index.html">1.0.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="index.html">1.0.0</a>
                </li>
          </ul>
        </div>
      </div>
      <div id="navbar" class="navbar-collapse collapse">
        <ul class="nav navbar-nav navbar-right">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Blog <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a class="navbar-item" href="https://talend.github.io/component-runtime/blog/release-notes.html" target="_blank">Release Notes</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Community <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a class="navbar-item" href="https://github.com/talend/component-runtime" target="_blank">GitHub Repository</a></li>
              <li><a class="navbar-item" href="contributors.html">Contributors</a></li>
              <li><a class="navbar-item" href="https://community.talend.com/t5/Component-Development/bd-p/ComponentDevelopment" target="_blank">Forum</a></li>
              <li><a class="navbar-item" href="https://help.talend.com/" target="_blank">Talend Help Center</a></li>
            </ul>
          </li>
        </ul>
        <form role="search" action="search.html" class="navbar-form navbar-right">
          <div class="input-group">
            <span class="input-group-addon"><i class="fa fa-search"></i></span>
            <input class="form-control" type="text" placeholder="Search" name="query" id="searchInput">
          </div>
        </form>
      </div>
    </nav>
</header>
            <main class="main">
              <div class="navigation-container grey-background hidden-xs col-sm-2" data-component="main" data-version="1.0.0">
  <aside class="navigation" role="navigation">
    <div class="panels">
      <div class="input-group nav-filter-group">
        <span class="input-group-addon"><i class="fa fa-search"></i></span>
        <input class="form-control" type="text" placeholder="Filter menu entries..." id="navFilterInput">
      </div>
      <div class="navigation-menu is-active" data-panel="menu">
        <nav class="nav-menu">
          <!-- <label>Talend Component Kit Developer Reference Guide</label> -->
          <ul class="nav nav-list tree" >
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Programming Model</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Components Definition</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_partitionmapper">PartitionMapper</a>
  </li>
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Definition</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_assessor">@Assessor</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_split">@Split</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_emitter">@Emitter</a>
  </li>
</ul>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_producer">Producer</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_processor">Processor</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_multiple_outputs">Multiple outputs</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_multiple_inputs">Multiple inputs</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_output">Output</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_combiners">Combiners?</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_family_components_icons">Family &amp; Components Icons</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Configuring components</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_primitives">Primitives</a>
  </li>
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Complex object mapping</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_list_case">List case</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_map_case">Map case</a>
  </li>
</ul>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_constraints_and_validation_on_the_configuration_input">Constraints and validation on the configuration/input</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_marking_a_configuration_as_a_particular_type_of_data">Marking a configuration as a particular type of data</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_define_links_between_properties">Define links between properties</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#documentation-ui-hints">Add hints about the rendering based on configuration/component knowledge</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Gallery</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_widgets">Widgets</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_validations">Validations</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Registering components</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Components metadata</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_management_of_configuration_versions">Management of configuration versions</a>
  </li>
  <li data-depth="3">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>@PartitionMapper</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_emitter_2">@Emitter</a>
  </li>
</ul>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_processor_2">@Processor</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Internationalization</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_default_components_keys">Default components keys</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Package</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Component Loading</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_packaging_a_plugin">Packaging a plugin</a>
  </li>
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Packaging an application</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Dependencies</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_create_a_nested_maven_repository_with_maven_shade_plugin">Create a nested maven repository with maven-shade-plugin</a>
  </li>
</ul>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_listing_needed_plugins">Listing needed plugins</a>
  </li>
  <li data-depth="3">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>&lt;code&gt;maven-shade-plugin&lt;/code&gt; extensions</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_containerdependenciestransformer">ContainerDependenciesTransformer</a>
  </li>
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_plugintransformer">PluginTransformer</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Component scanning rules and default exclusions</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_jars_scanning">Jars Scanning</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_package_scanning">Package Scanning</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Build tools</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Maven Plugin</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_dependencies_2">Dependencies</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_validate">Validate</a>
  </li>
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Documentation</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Render your documentation</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_html">HTML</a>
  </li>
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_pdf">PDF</a>
  </li>
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_include_the_documentation_into_a_document">Include the documentation into a document</a>
  </li>
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_more">More</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_web">Web</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_generate_inputs_or_outputs">Generate inputs or outputs</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_talend_component_archive">Talend Component Archive</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="documentation.html#_gradle_plugin">Gradle Plugin</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Services</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Internationalization</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_internationalization_api">Internationalization API</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Providing some actions for consumers/clients</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_particular_action_types">Particular action types</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Built in services</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>HttpClient usage</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_advanced_http_client_request_customization">Advanced HTTP client request customization</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="documentation.html#_services_and_interceptors">Services and interceptors</a>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Creating a job pipeline</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Job Builder</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_environment_runner">Environment/Runner</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_key_provider">Key Provider</a>
  </li>
</ul>
  </li>
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Beam case</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_i_o">I/O</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_processors">Processors</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_convert_a_beam_io_in_a_component_i_o">Convert a Beam.io in a component I/O</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Advanced: define a custom API</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_extending_the_ui">Extending the UI</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Testing</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Best practises</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Parameterized tests</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_junit_4">JUnit 4</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_junit_5">JUnit 5</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>component-runtime-testing</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>component-runtime-junit</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_junit_4_2">JUnit 4</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_junit_5_2">JUnit 5</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_mocking_the_output">Mocking the output</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_mocking_the_input">Mocking the input</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_creating_runtime_configuration_from_component_configuration">Creating runtime configuration from component configuration</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_testing_a_mapper">Testing a Mapper</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_testing_a_processor">Testing a Processor</a>
  </li>
</ul>
  </li>
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>component-runtime-testing-spark</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_junit_4_3">JUnit 4</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_junit_5_3">JUnit 5</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_how_to_know_the_job_is_done">How to know the job is done</a>
  </li>
</ul>
  </li>
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>component-runtime-http-junit</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>JUnit 4</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_ssl">SSL</a>
  </li>
</ul>
  </li>
  <li data-depth="3">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>JUnit 5</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="4">
    <a class="menu-link" href="documentation.html#_ssl_2">SSL</a>
  </li>
</ul>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_capturing_mode">Capturing mode</a>
  </li>
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_passthrough_mode">Passthrough mode</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="documentation.html#_beam_testing">Beam testing</a>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Multiple environments for the same tests</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_junit_4_5">JUnit 4</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_junit_5_5">JUnit 5</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation.html#_provided_environments">Provided environments</a>
  </li>
  <li data-depth="2">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Configuring environments</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="3">
    <a class="menu-link" href="documentation.html#_advanced_usage">Advanced usage</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="documentation.html#_secrets_passwords_and_maven">Secrets/Passwords and Maven</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="documentation.html#_generating_data">Generating data?</a>
  </li>
</ul>
  </li>
  <li data-depth="0">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Web</span></label>
    <ul class="nav nav-list tree" >
  <li data-depth="1">
    <a class="menu-link" href="documentation-rest.html">Server</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="services-pipeline.html">Simple/Test Pipeline API</a>
  </li>
  <li data-depth="1">
    <a class="menu-link" href="https://beam.apache.org/documentation/programming-guide/#creating-a-pipeline">Beam Pipeline API</a>
  </li>
</ul>
  </li>
</ul>
        </nav>
      </div>
    </div>
  </aside>
</div>
              <div class="col-xs-12 col-sm-10 maincontent">
                <div class="toolbar" role="navigation">

    <ol class="breadcrumb">
      <li class="crumb active"><a href="tutorial-create-components-rest-api.html">Create components for REST API</a></li>
    </ol>
</div>
                <article class="doc">
        <div class="row">
          <div class="col-sm-9 row">
              <h1>Create components for REST API</h1>
            <div class="article-content">
              <div id="preamble">
<div class="sectionbody">
<div id="tutorial-create-components-rest-api" class="paragraph">
<p>In this tutorial we will show how to create components that consume a REST API.</p>
</div>
<div class="paragraph">
<p>As an example, we will develop an input component that will provide a search functionality for Zendesk using there
<a href="https://developer.zendesk.com/rest_api/docs/core/search">Search API</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We use lambok. to get ride of getters, setters and constructors from our classes.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can generate a project using the components kit starter as described in
<a href="tutorial-generate-project-using-starter.html" class="page">this tutorial</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_http_client_setup"><a class="anchor" href="#_http_client_setup"></a>Http client setup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As our input component will relay on Zendesk Search API. We will need an http client to consume it.</p>
</div>
<div class="paragraph">
<p>Zendesk Search API takes the following query parameters on this endpoint <code>/api/v2/search.json</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>query</strong>     : The search query.</p>
</li>
<li>
<p><strong>sort_by</strong>   : One of <code>updated_at</code>, <code>created_at</code>, <code>priority</code>, <code>status</code>, or <code>ticket_type</code>. Defaults to sorting by <code>relevance</code>.</p>
</li>
<li>
<p><strong>sort_order</strong>: One of <code>asc</code> or <code>desc</code>. Defaults to <code>desc</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So let&#8217;s create our http client according to that.</p>
</div>
<div class="paragraph">
<p>Talend component kit provides a built-in service to create an easy to use http client in a declarative manner using java annotations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface SearchClient extends HttpClient { <i class="conum" data-value="1"></i><b>(1)</b>

    @Request(path = "api/v2/search.json", method = "GET") <i class="conum" data-value="2"></i><b>(2)</b>
    Response&lt;JsonObject&gt; search(@Header("Authorization") String auth,<i class="conum" data-value="3"></i><b>(3)</b> <i class="conum" data-value="4"></i><b>(4)</b>
            @Header("Content-Type") String contentType, <i class="conum" data-value="5"></i><b>(5)</b>
            @Query("query") String query, <i class="conum" data-value="6"></i><b>(6)</b>
            @Query("sort_by") String sortBy,
            @Query("sort_order") String sortOrder,
            @Query("page") Integer page
    );
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Our interface need to extend <code>org.talend.sdk.component.api.service.http.HttpClient</code>
to be known as an http client by the component framework.
This interface also provides <code>void base(String base)</code> method that will let us set the base uri for the http request. In our case, it will be the Zendesk instance url.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>@Request</code> annotation let us define two things. the http request path and method (<code>GET</code>, <code>POST</code>, <code>PUT</code>,&#8230;&#8203;).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>At this line we have two important things. The method return type and a header param. At this point we will explain the method return
that is of type <code>Response&lt;JsonObject&gt;</code>. The <code>Response</code> object let us access
to the http response status code, headers, error payload and the response body that will be of type <code>JsonObject</code> here.
The response body will be decoded according to the content type returned by the API. The component framework provides codec for json content.
If you want to consume specific content type, you will need to provide your personalized codec using the <code>@Codec</code> annotation.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>We define the <code>Authorization</code> http request header that will let us provide the authorization token.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>We define another http request header to provide the content type.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>We define the query parameters using the <code>@Query</code> annotation that will provide the parameter name.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>And that all what we need to do to create our http client. No implementation is needed for the interface,
as it will be provided by the component framework according to what we have defined.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This http client can be injected into a mapper or a processor to perform http requests.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_component_configuration"><a class="anchor" href="#_component_configuration"></a>Component Configuration</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the sake of simplicity, we will use the basic authentication supported by the API.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let&#8217;s start setting up the configuration for the basic authentication.
To be able to consume the Search API, we will need to provide the Zendesk instance URL, the username and the password.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Data
@DataStore <i class="conum" data-value="1"></i><b>(1)</b>
@GridLayout({ <i class="conum" data-value="2"></i><b>(2)</b>
        @GridLayout.Row({ "url" }),
        @GridLayout.Row({ "username", "password" })
})
@Documentation("Basic authentication for Zendesk API")
public class BasicAuth {

    @Option
    @Documentation("Zendesk instance url")
    private final String url;

    @Option
    @Documentation("Zendesk account username (e-mail).")
    private final String username;

    @Option
    @Credential <i class="conum" data-value="3"></i><b>(3)</b>
    @Documentation("Zendesk account password")
    private final String password;

    public String getAuthorizationHeader() { <i class="conum" data-value="4"></i><b>(4)</b>
        try {
            return "Basic " + Base64.getEncoder()
                    .encodeToString((this.getUsername() + ":" + this.getPassword()).getBytes("UTF-8"));
        } catch (UnsupportedEncodingException e) {
            throw new RuntimeException(e);
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>As This configuration class provide the authentication information. We can type it as <code>Datastore</code>,
so that it can be validated using services (a kind of <em>test connection</em> feature)
or used by Talend studio or web application metadata.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is the UI layout of this configuration.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We mark the password as <code>Credential</code> to that it can be handled as sensitive data in Talend Studio and web application.
<a href="tutorial-configuration-sensitive-data.html" class="page">Read more about sensitive data handling</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This method generate a basic authentication token using the username and the password. This token will be used
to authenticate our http call to the Search API.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now that we have our data store configuration. that will provide us with the basic authentication token.
We need to setup our data set configuration.
i.e the search query that will define the records that our input component will provide.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Data
@DataSet <i class="conum" data-value="1"></i><b>(1)</b>
@GridLayout({ <i class="conum" data-value="2"></i><b>(2)</b>
        @GridLayout.Row({ "dataStore" }),
        @GridLayout.Row({ "query" }),
        @GridLayout.Row({ "sortBy", "sortOrder" })
})
@Documentation("Data set that define a search query for Zendesk Search API. See api reference https://developer.zendesk.com/rest_api/docs/core/search")
public class SearchQuery {

    @Option
    @Documentation("Authentication information.")
    private final BasicAuth dataStore;

    @Option
    @TextArea <i class="conum" data-value="3"></i><b>(3)</b>
    @Documentation("Search query.") <i class="conum" data-value="4"></i><b>(4)</b>
    private final String query;

    @Option
    @DefaultValue("relevance") <i class="conum" data-value="5"></i><b>(5)</b>
    @Documentation("One of updated_at, created_at, priority, status, or ticket_type. Defaults to sorting by relevance")
    private final String sortBy;

    @Option
    @DefaultValue("desc")
    @Documentation("One of asc or desc. Defaults to desc")
    private final String sortOrder;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This mark this configuration class as a <code>DataSet</code> type.
<a href="component-configuration.html#_marking_a_configuration_as_a_particular_type_of_data " class="page">Read more about configuration type</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The UI layout of this configuration.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We bind a text area widget to the search query field. <a href="gallery.html" class="page">See all the available widgets</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Note the usage of <code>@Documentation</code> annotation. this annotation let us document our component (configuration in this scope).
There is a Talend component maven plugin that can be used to generate the component documentation with all the configuration description and the default values.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Here we give the field a default value.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>That&#8217;s all for the configuration part. Let&#8217;s create the component logic.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_component_mapper"><a class="anchor" href="#_the_component_mapper"></a>The component mapper</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We will not split the http calls on many workers. so our mappers will not implement the split part.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Version
@Icon(value = Icon.IconType.CUSTOM, custom = "zendesk")
@PartitionMapper(name = "search")
@Documentation("Search component for zendesk query")
public class SearchMapper implements Serializable {

    private final SearchQuery configuration; <i class="conum" data-value="1"></i><b>(1)</b>
    private final SearchClient searchClient; <i class="conum" data-value="2"></i><b>(2)</b>

    public SearchMapper(@Option("configuration") final SearchQuery configuration, final SearchClient searchClient) {
        this.configuration = configuration;
        this.searchClient = searchClient;
    }

    @PostConstruct
    public void init() {
        searchClient.base(configuration.getDataStore().getUrl()); <i class="conum" data-value="3"></i><b>(3)</b>
    }

    @Assessor
    public long estimateSize() {
        return 1L;
    }

    @Split
    public List&lt;SearchMapper&gt; split(@PartitionSize final long bundles) {
        return Collections.singletonList(this); <i class="conum" data-value="4"></i><b>(4)</b>
    }

    @Emitter
    public SearchSource createWorker() {
        return new SearchSource(configuration, searchClient); <i class="conum" data-value="5"></i><b>(5)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The component configuration, that will be injected by the component framework</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The http client that we have created above. it will also be injected by the framework via the mapper constructor.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We setup the base URL of our http client using the configuration url.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>As we will not split the http requests we return this mapper in the split method.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>We create a source that will perform the http request and return the search result.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_component_source"><a class="anchor" href="#_the_component_source"></a>The component source</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now we create the source that will perform the http request to the search api and convert the result to JsonObject records.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class SearchSource implements Serializable {

    private final SearchQuery config; <i class="conum" data-value="1"></i><b>(1)</b>
    private final SearchClient searchClient; <i class="conum" data-value="2"></i><b>(2)</b>
    private BufferizedProducerSupport&lt;JsonValue&gt; bufferedReader; <i class="conum" data-value="3"></i><b>(3)</b>

    private transient int page = 0;
    private transient int previousPage = -1;

    public SearchSource(final SearchQuery configuration, final SearchClient searchClient) {
        this.config = configuration;
        this.searchClient = searchClient;
    }

    @PostConstruct
    public void init() { <i class="conum" data-value="4"></i><b>(4)</b>
        bufferedReader = new BufferizedProducerSupport&lt;&gt;(() -&gt; {
            JsonObject result = null;
            if (previousPage == -1) {
                result = search(config.getDataStore().getAuthorizationHeader(),
                        config.getQuery(), config.getSortBy(),
                        config.getSortBy() == null ? null : config.getSortOrder(), null);
            } else if (previousPage != page) {
                result = search(config.getDataStore().getAuthorizationHeader(),
                        config.getQuery(), config.getSortBy(),
                        config.getSortBy() == null ? null : config.getSortOrder(), page);
            }
            if (result == null) {
                return null;
            }
            previousPage = page;
            String nextPage = result.getString("next_page", null);
            if (nextPage != null) {
                page++;
            }

            return result.getJsonArray("results").iterator();
        });
    }

    @Producer
    public JsonObject next() { <i class="conum" data-value="5"></i><b>(5)</b>
        final JsonValue next = bufferedReader.next();
        return next == null ? null : next.asJsonObject();
    }

    <i class="conum" data-value="6"></i><b>(6)</b>
    private JsonObject search(String auth, String query, String sortBy, String sortOrder, Integer page) {
        final Response&lt;JsonObject&gt; response = searchClient.search(auth, "application/json",
                query, sortBy, sortOrder, page);
        if (response.status() == 200 &amp;&amp; response.body().getInt("count") != 0) {
            return response.body();
        }

        final String mediaType = extractMediaType(response.headers());
        if (mediaType != null &amp;&amp; mediaType.contains("application/json")) {
            final JsonObject error = response.error(JsonObject.class);
            throw new RuntimeException(error.getString("error") + "\n" + error.getString("description"));
        }
        throw new RuntimeException(response.error(String.class));
    }

    <i class="conum" data-value="7"></i><b>(7)</b>
    private String extractMediaType(final Map&lt;String, List&lt;String&gt;&gt; headers) {
        final String contentType = headers == null || headers.isEmpty()
                || !headers.containsKey(HEADER_Content_Type) ? null :
                headers.get(HEADER_Content_Type).iterator().next();

        if (contentType == null || contentType.isEmpty()) {
            return null;
        }
        // content-type contains charset and/or boundary
        return ((contentType.contains(";")) ? contentType.split(";")[0] : contentType).toLowerCase(ROOT);
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The component configuration injected from the component mapper.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The http client injected from the component mapper.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>A buffer utility that we will use to buffer search result and iterate on theme one by one</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>In the init method we initialize our record buffer by providing the logic to iterate on the search result.
we get the first result page and convert the results to json records. The buffer will retrieve the next result page if needed.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>This method return the next record from the buffer. when no more record is present the buffer return <code>null</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>In this method we use the http client to perform the http request to the search api.
According to the http response status code we get get the results or we throw an error if needed.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>This method let us extract the media type returned by the API.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>That all you will need to do to create a simple Talend component that consume a REST API.</p>
</div>
<div class="paragraph">
<p>In a next tutorial, we will show how to test this kind of component and use the component framework API simulation tools
to create unit tests.</p>
</div>
</div>
</div>
            </div>
          </div>
          <div class="col-sm-3 container article-side-panel">
            <nav class="article-anchors">
              <div class="article-side-actions">

                <ul>
                    <li>
                      <a class="article-side-actions-link" target="_blank" href="https://github.com/Talend/component-runtime/edit/component-runtime-1.0.0/documentation/src/main/antora/modules/ROOT/pages/tutorial-create-components-rest-api.adoc">
                        <i class="fa fa-edit"></i> &nbsp; &nbsp; Suggest an edit
                      </a>
                    </li>

                    <li>
                                <a class="article-side-actions-link" target="_blank"
                                   href="https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Ftalend.github.io%2Fcomponent-runtime%2Fmain%2F1.38.0%2Ftutorial-create-components-rest-api.html&text=Talend%20Component%20Kit%20%3E%3E%20Create%20components%20for%20REST%20API%20%3E%3E%20&tw_p=tweetbutton&url=https%3A%2F%2Ftalend.github.io%2Fcomponent-runtime%2Fmain%2F1.38.0%2Ftutorial-create-components-rest-api.html">
                                    <i class="fab fa-twitter"></i> &nbsp; &nbsp; Tweet
                                </a>
                            </li>
                            <li>
                                <a class="article-side-actions-link"
                                   href="mailto:?subject=Talend%20Component%20Kit%3A%20Create%20components%20for%20REST%20API&body=Talend%20Component%20Kit%3A%20Create%20components%20for%20REST%20API%0A%0Ahttps%3A%2F%2Ftalend.github.io%2Fcomponent-runtime%2Fmain%2F1.38.0%2Ftutorial-create-components-rest-api.html">
                                    <i class="far fa-envelope"></i> &nbsp; &nbsp; Mail
                                </a>
                            </li>

                </ul>
              </div>
              <h1 class="article-side-toc">In this article</h1>
            </nav>
          </div>
          <a href="#top" class="top">Scroll to top</a>
        </div>
        <script>(window.talend = (window.talend || {})).article = true;</script>
    </article>
              </div>
            </main>
              <footer class="footer ">
    <div class="footer-with-copyright footer-with-links">
        <ul class="footer-links pull-left">
            <li><a class="gwt-Anchor" href="http://www.talend.com/">Talend</a></li>
            <li><a class="gwt-Anchor" href="http://www.talend.com/contact">Contact</a></li>
            <li><a class="gwt-Anchor" href="http://www.talend.com/legal-terms/us-eula">Talend EULA</a></li>
        </ul>
        <div class="footer-copyright pull-right" style="">&copy; 2019 Talend Inc. All rights reserved.</div>
    </div>
</footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
<script src="../../_/../js/anchorific.js"></script>
<script src="../../_/js/talend.js"></script>
  </body>
</html>
