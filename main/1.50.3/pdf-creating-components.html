<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talend Component Kit Developer Reference Guide :: Implementing components</title>
    <link rel="canonical" href="https://talend.github.io/component-runtime/main/latest/pdf-creating-components.html">
    <meta name="description" content="Get an overview of the main steps to code the logic of your custom Talend Componit Kit components">
    <meta name="keywords" content="create, code, class, logic, layout, configuration, dev, overview, api">
    <meta name="generator" content="Talend Component Kit Generator">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Implementing components :: Talend Component Kit Developer Reference Guide</title>
    <link rel="canonical" href="https://talend.github.io/component-runtime/main/latest/pdf-creating-components.html">
    <meta name="description" content="Get an overview of the main steps to code the logic of your custom Talend Componit Kit components">
    <meta name="keywords" content="create, code, class, logic, layout, configuration, dev, overview, api">
    <meta name="generator" content="Antora 3.0.1">
<meta name="date" content="2022-11-25T12:58:34.762Z" scheme="YYYY-MM-DDTHH:mm:ss.sssZ">
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha256-NuCn4IvuZXdBaFKJOAcsU2Q3ZpwbdFisd5dux4jkQ5w=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/idea.min.css" integrity="sha256-rD61BPsgKHzJPyg7vpXaYOw6tMYuY2fz1p9033NYeM8=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@talend/bootstrap-theme@0.200.1/dist/bootstrap.css">
<link rel="stylesheet" href="../../_/css/talend.css">
<link rel="shortcut icon" href="../../_/images/favicon_0.ico" />


<script type="text/x-mathjax-config">
                MathJax.Hub.Config({
                  messageStyle: "none",
                  tex2jax: {
                    inlineMath: [["\\(", "\\)"]],
                    displayMath: [["\\[", "\\]"]],
                    ignoreClass: "nostem|nolatexmath"
                  },
                  asciimath2jax: {
                    delimiters: [["\\$", "\\$"]],
                    ignoreClass: "nostem|noasciimath"
                  },
                  TeX: { equationNumbers: { autoNumber: "none" } }
                });
                </script>
<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-PSBN"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','GTM-PSBN')</script>
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body>
      <svg xmlns="http://www.w3.org/2000/svg" focusable="false" style="display: none;">
    <symbol id="talend-logo-square">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
            <path fill="#FFF" d="M8,5.32907052e-14 C12.4182648,5.32907052e-14 16,3.58173516 16,8 C16,12.4188737 12.4182648,16.0006088 8,16.0006088 C3.58173516,16.0006088 0,12.4188737 0,8 C0,3.58173516 3.58173516,5.32907052e-14 8,5.32907052e-14 Z M7.86070588,3.63987227 C7.41418487,4.67207395 6.53747899,5.46891429 5.4532437,5.80834286 C5.4532437,5.80834286 5.23179832,5.86098151 5.28867227,6.09271261 C5.29532773,6.11267899 5.30137815,6.13264538 5.31105882,6.15261176 C5.34191597,6.21735126 5.37942857,6.25062857 5.42359664,6.25607395 L6.13391597,6.25607395 L6.13391597,10.6517042 C6.13391597,11.2755025 6.32329412,11.7117378 6.70205042,11.959805 C7.08020168,12.2072672 7.58843697,12.3306958 8.22554622,12.3306958 C8.42521008,12.3306958 8.65633613,12.2937882 8.91952941,12.218763 C9.18272269,12.1431328 9.43078992,12.0469311 9.66312605,11.9295529 C9.89606723,11.8127798 10.0672941,11.6941916 10.1780168,11.5737882 C10.2046387,11.5568471 10.2046387,11.5090487 10.1780168,11.4316034 C10.151395,11.354158 10.1138824,11.282158 10.0648739,11.2162084 C10.0164706,11.1496538 9.97895798,11.1230319 9.95233613,11.1363429 C9.78413445,11.2198387 9.60020168,11.2912336 9.40114286,11.3487126 C9.20208403,11.4061916 9.02904202,11.4352336 8.88322689,11.4352336 C8.7192605,11.4352336 8.59401681,11.397721 8.50810084,11.325721 C8.42157983,11.2525109 8.35986555,11.1169815 8.32235294,10.9203429 C8.28423529,10.7237042 8.26547899,10.4363092 8.26547899,10.0599731 L8.26547899,6.24276303 L9.69337815,6.24276303 C9.74178151,6.24276303 9.78715966,6.19617479 9.82951261,6.10239328 C9.8712605,6.01042689 9.89243697,5.89546891 9.89243697,5.75812437 C9.89243697,5.70004034 9.87791597,5.64861176 9.84887395,5.60504874 C9.82043697,5.56088067 9.78171429,5.53667899 9.73331092,5.5324437 L8.26547899,5.5324437 L8.26547899,3.6792 C8.26547899,3.60235966 8.21465546,3.54790588 8.1245042,3.51099832 C7.95811765,3.45896471 7.86070588,3.63987227 7.86070588,3.63987227 Z"</path>
        </svg>
    </symbol>
    <symbol id="talend-component-kit-positive">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
            <g fill="none">
                <path fill="#005695" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path>
                <path fill="#FFF" d="M5.69 10.662a2.3 2.3 0 0 0 1.425.492 2.3 2.3 0 0 0 1.664-.709l-.631-.632 1.005-1.005a.33.33 0 0 0 0-.466.332.332 0 0 0-.467 0L7.68 9.347 6.633 8.3l1.005-1.005a.33.33 0 0 0-.467-.466L6.167 7.832l-.653-.652a2.3 2.3 0 0 0-.71 1.664c0 .54.187 1.037.498 1.43L3.878 11.7a.721.721 0 0 0-.358.027 5.824 5.824 0 0 1-.722-6.368c1.364-2.7 4.612-3.914 7.41-2.777l-.348.69 1.584-.369-.643-1.495-.351.695C7.384.832 3.818 2.15 2.32 5.117a6.359 6.359 0 0 0 .798 6.962.704.704 0 0 0 1.26.631.704.704 0 0 0-.036-.699l1.349-1.349z"></path>
                <path fill="#FFF" d="M12.623 3.031a.706.706 0 0 0-.973.894l-1.296 1.298a2.304 2.304 0 0 0-3.092.215l3.266 3.265a2.304 2.304 0 0 0 .213-3.092l1.299-1.297a.701.701 0 0 0 .504.006 5.838 5.838 0 0 1 .675 6.311c-1.332 2.636-4.524 3.871-7.284 2.826l.339-.67-1.585.368.643 1.494.36-.712c3.028 1.18 6.538-.162 8.005-3.064a6.375 6.375 0 0 0-.758-6.912.703.703 0 0 0-.316-.93z"></path>
            </g>
        </svg>
    </symbol>
</svg>

<header class="global-header">
  <nav class="navbar navbar-default">
      <div class="navbar-text-content nav navbar-nav">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <button aria-label="Go to Portal" id="header-talend-logo" type="button" class="btn-icon-only btn btn-link">
            <svg name="talend-logo-square" focusable="false" aria-hidden="true">
                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#talend-logo-square"></use>
            </svg>
        </button>
        <button aria-label="Kit logo" id="header-kit-logo" type="button" class="btn-icon-only btn btn-link">
          <svg name="talend-component-kit-positive" focusable="false" aria-hidden="true">
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#talend-component-kit-positive"></use>
          </svg>
        </button>
        <a class="navbar-single-link" href="https://talend.github.io/component-runtime/main/latest/index.html">Talend Component Kit</a>
        <div class="btn-group navbar-versions">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                1.50.3
              <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
                <li class="navbar-item version">
                    <a href="../latest/index.html">1.52.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.51.1/index.html">1.51.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.51.0/index.html">1.51.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="index.html">1.50.3</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.50.2/index.html">1.50.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.50.1/index.html">1.50.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.50.0/index.html">1.50.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.49.1/index.html">1.49.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.49.0/index.html">1.49.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.48.1/index.html">1.48.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.47.1/index.html">1.47.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.46.1/index.html">1.46.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.45.2/index.html">1.45.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.44.3/index.html">1.44.3</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.43.1/index.html">1.43.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.42.0/index.html">1.42.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.41.1/index.html">1.41.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.40.0/index.html">1.40.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.39.3/index.html">1.39.3</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.38.6/index.html">1.38.6</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.37.1/index.html">1.37.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.36.1/index.html">1.36.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.35.1/index.html">1.35.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.34.1/index.html">1.34.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.33.2/index.html">1.33.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.32.2/index.html">1.32.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.31.2/index.html">1.31.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.30.0/index.html">1.30.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.29.2/index.html">1.29.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.28.2/index.html">1.28.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.27/index.html">1.1.27</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.26/index.html">1.1.26</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.25/index.html">1.1.25</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.24/index.html">1.1.24</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.23/index.html">1.1.23</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.22/index.html">1.1.22</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.21/index.html">1.1.21</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.20/index.html">1.1.20</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.19/index.html">1.1.19</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.18/index.html">1.1.18</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.17/index.html">1.1.17</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.16/index.html">1.1.16</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.15/index.html">1.1.15</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.14/index.html">1.1.14</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.13/index.html">1.1.13</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.12/index.html">1.1.12</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.11/index.html">1.1.11</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.10/index.html">1.1.10</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.9/index.html">1.1.9</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.8/index.html">1.1.8</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.7/index.html">1.1.7</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.6/index.html">1.1.6</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.5/index.html">1.1.5</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.4/index.html">1.1.4</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.3/index.html">1.1.3</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.2/index.html">1.1.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.1/index.html">1.1.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.1.0/index.html">1.1.0</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.0.4/index.html">1.0.4</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.0.3/index.html">1.0.3</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.0.2/index.html">1.0.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../1.0.1/index.html">1.0.1</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.13/index.html">0.0.13</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.12/index.html">0.0.12</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.11/index.html">0.0.11</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.10/index.html">0.0.10</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.9/index.html">0.0.9</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.8/index.html">0.0.8</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.7/index.html">0.0.7</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.6/index.html">0.0.6</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.5/index.html">0.0.5</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.4/index.html">0.0.4</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.3/index.html">0.0.3</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.2/index.html">0.0.2</a>
                </li>
                <li class="navbar-item version">
                    <a href="../0.0.1/index.html">0.0.1</a>
                </li>
          </ul>
        </div>
      </div>
      <div id="navbar" class="navbar-collapse collapse">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="changelog.html" class="navbar-single-link">CHANGELOG</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Community<span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a class="navbar-item" href="https://github.com/talend/component-runtime" target="_blank">GitHub Repository</a></li>
              <li><a class="navbar-item" href="contributors.html">Contributors</a></li>
              <li><a class="navbar-item" href="https://community.talend.com/t5/Component-Development/bd-p/ComponentDevelopment" target="_blank">Forum</a></li>
              <li><a class="navbar-item" href="https://help.talend.com/" target="_blank">Talend Help Center</a></li>
            </ul>
          </li>
        </ul>
        <form role="search" action="search.html" class="navbar-form navbar-right">
          <div class="input-group">
            <span class="input-group-addon"><i class="fa fa-search"></i></span>
            <input class="form-control" type="text" placeholder="Search" name="query" id="searchInput">
          </div>
        </form>
      </div>
    </nav>
</header>
            <main class="main">
              <div class="navigation-container grey-background hidden-xs col-sm-2" data-component="main" data-version="1.50.3">
  <aside class="navigation" role="navigation">
    <div class="panels">
      <div class="input-group nav-filter-group">
        <span class="input-group-addon"><i class="fa fa-search"></i></span>
        <input class="form-control" type="text" placeholder="Filter menu entries..." id="navFilterInput">
      </div>
      <div class="navigation-menu is-active" data-panel="menu">
        <nav class="nav-menu">
          <!-- <label>Talend Component Kit Developer Reference Guide</label> -->
          <ul class="nav nav-list tree" >
  <li data-depth="0">
      
    <ul class="nav nav-list tree" >
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>First steps</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="getting-started.html">Getting Started</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="tutorial-create-my-first-component.html">Creating your first component</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="record-types.html">Record types</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Tutorials</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="index-tutorials.html">Tutorial overview</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="tutorial-create-my-first-component.html">Creating your first component</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="tutorial-generate-project-using-starter.html">Generating a project from the starter</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="tutorial-create-an-input-component.html">Creating a Hazelcast input component</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="tutorial-create-an-output-component.html">Creating a Hazelcast output component</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="tutorial-create-components-rest-api.html">Creating a Zendesk REST API connector</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="tutorial-test-rest-api.html">Testing a Zendesk REST API connector</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="tutorial-test-your-components.html">Testing a Hazelcast component</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="tutorial-dev-vs-ci-setup.html">Testing in a continuous integration environment</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="tutorial-handle-talend-component-migration.html">Handling component version migration</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Setting up your environment</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="index-setup-environment.html">Setup overview</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="system-prerequisites.html">System requirements</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="installing-talend-intellij-plugin.html">Installing the IntelliJ plugin</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Generating a project</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="index-generating-project.html">Project generation overview</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="tutorial-generate-project-using-starter.html">Using the Starter</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="generate-project-using-intellij-plugin.html">Using the IntelliJ plugin</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Implementing components</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="index-creating-components.html">Component implementation overview</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="component-registering.html">Defining component metadata</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="creating-dataset-datastore.html">Defining datasets and datastores</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="component-define-input.html">Defining an input component logic</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="component-define-processor-output.html">Defining a processor/output logic</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="component-define-standalone.html">Defining a standalone component logic</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="component-configuration.html">Defining component configuration</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="component-execution.html">Component execution logic</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="component-internationalization.html">Internationalizing a component</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="component-versions-and-migration.html">Managing component versions</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="tutorial-configuration-sensitive-data.html">Masking sensitive data</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="concept-processor-and-batch-processing.html">Implementing batch processing</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="component-implementing-streaming.html">Implementing streaming on a component</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="component-loading.html">Component loading</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="build-tools-maven.html">Building components with Maven</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="build-tools-gradle.html">Building components with Gradle</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="wrapping-a-beam-io.html">Wrapping a Beam I/O</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Defining services</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="index-defining-services.html">Service overview</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="services-internationalization.html">Internationalizing a service</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="services-actions.html">Providing actions through a service</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="services-built-in.html">Built-in services</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="services-interceptors.html">Services and interceptors</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="services-custom-api.html">Defining a custom API</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Testing components</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="index-testing-components.html">Component testing overview</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="testing-best-practices.html">Component testing best practices</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="index-sub-testing-runtime.html">Testing component runtime</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="testing-beam.html">Beam testing</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="testing-multiple-envs.html">Testing in multiple environments</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="testing-maven-passwords.html">Reusing Maven credentials</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="testing-generating-data.html">Generating data for testing</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="services-pipeline.html">Simple/Test Pipeline API</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="https://beam.apache.org/documentation/programming-guide/#creating-a-pipeline">Beam Pipeline API</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Integrating into Talend Studio</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="index-deploying-components.html">Studio integration overview</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="studio.html">Iterating on component development</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="studio-from-car.html">Installing components from a CAR file</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="studio-schema.html">Studio schema</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="compatibility.html">Version compatibility</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="javajet-to-componentkit.html">From Javajet to the Component Kit</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Integrating into Talend Cloud</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="index-cloud-integration.html">Cloud integration overview</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="documentation-rest.html">Component server and HTTP API</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Knowledge base</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="index-knowledge-base.html">Knowledge base articles</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="changelog.html">Changelog</a>
  </li>
</ul>
  </li>
  <li data-depth="1">
      <label class="tree-toggler nav-header"><i class="fa fa-angle-right"></i><span>Reference Guide</span></label>
    <ul class="nav nav-list tree"  style="display:none">
  <li data-depth="2">
    <a class="menu-link" href="gallery.html">Widget and validation gallery</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="ref-actions.html">List of available actions</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="ref-conditions.html">List of conditions for binding properties</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="ref-configuration-types.html">Component data configuration types</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="ref-constraints.html">Component field constraints and validations</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="ref-junit-environments.html">Provided JUnit testing environments</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="ref-rest-resources.html">Component Server HTTP API reference</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="ref-scanning-exclusions.html">Scanning exclusions</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="ref-server-configuration.html">Server configuration</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="ref-ui.html">UI API</a>
  </li>
  <li data-depth="2">
    <a class="menu-link" href="apidocs.html">Javadocs</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
        </nav>
      </div>
    </div>
  </aside>
</div>
              <div class="col-xs-12 col-sm-10 maincontent">
                <div class="toolbar" role="navigation">

    <ol class="breadcrumb">
      <li class="crumb active"><a href="pdf-creating-components.html">Implementing components</a></li>
    </ol>
</div>
                <article class="doc">
        <div class="row">
          <div class="col-sm-9 row">
              <h1>Implementing components</h1>
            <div class="article-content">
              <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Once you have generated a project, you can start implementing the logic and layout of your components and iterate on it. Depending on the type of component you want to create, the logic implementation can differ. However, the layout and component metadata are defined the same way for all types of components in your project. The main steps are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="component-registering.html" class="xref page">Defining family and component metadata</a></p>
</li>
<li>
<p><a href="component-define-input.html" class="xref page">Defining an input component logic</a></p>
</li>
<li>
<p><a href="component-define-processor-output.html" class="xref page">Defining a processor/output logic</a></p>
</li>
<li>
<p><a href="component-define-standalone.html" class="xref page">Defining a standalone component logic</a></p>
</li>
<li>
<p><a href="component-configuration.html" class="xref page">Defining component layout and configuration</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/implementing-components.png" target="_blank" rel="noopener"><img src="_images/implementing-components.png" alt="Implementing component"></a></span></p>
</div>
<div class="paragraph">
<p>In some cases, you will require specific implementations to handle more advanced cases, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="component-internationalization.html" class="xref page">Internationalizing a component</a></p>
</li>
<li>
<p><a href="component-versions-and-migration.html" class="xref page">Managing component versions</a></p>
</li>
<li>
<p><a href="tutorial-configuration-sensitive-data.html" class="xref page">Masking sensitive data</a></p>
</li>
<li>
<p><a href="concept-processor-and-batch-processing.html" class="xref page">Implementing batch processing</a></p>
</li>
<li>
<p><a href="component-implementing-streaming.html" class="xref page">Implementing streaming on a component</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also make certain configurations reusable across your project by <a href="index-defining-services.html" class="xref page">defining services</a>.
Using your Java IDE along with a build tool supported by the framework, you can then compile your components to <a href="index-testing-components.html" class="xref page">test</a> and <a href="index-deploying-components.html" class="xref page">deploy</a> them to Talend Studio or other Talend applications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="build-tools-maven.html" class="xref page">Building components with Maven</a></p>
</li>
<li>
<p><a href="build-tools-gradle.html" class="xref page">Building components with Gradle</a></p>
</li>
<li>
<p><a href="wrapping-a-beam-io.html" class="xref page">Wrapping a Beam I/O</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In any case, follow these <a href="best-practices.html" class="xref page">best practices</a> to ensure the components you develop are optimized.</p>
</div>
<div class="paragraph">
<p>You can also learn more about component loading and plugins here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="component-loading.html" class="xref page">Loading a component</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_registering_components"><a class="anchor" href="#_registering_components"></a>Registering components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before implementing a component logic and configuration, you need to specify the family and the category it belongs to, the component type and name, as well as its name and a few other generic parameters. This set of metadata, and more particularly the family, categories and component type, is mandatory to recognize and load the component to Talend Studio or Cloud applications.</p>
</div>
<div class="paragraph">
<p>Some of these parameters are handled at the project generation using the starter, but can still be accessed and updated later on.</p>
</div>
<div class="sect2">
<h3 id="_component_family_and_categories"><a class="anchor" href="#_component_family_and_categories"></a>Component family and categories</h3>
<div class="paragraph">
<p>The family and category of a component is automatically written in the <code>package-info.java</code> file of the component package, using the <code>@Components</code> annotation. By default, these parameters are already configured in this file when you import your project in your IDE. Their value correspond to what was defined during the project definition with the starter.</p>
</div>
<div class="paragraph">
<p>Multiple components can share the same <strong>family</strong> and <strong>category</strong> value, but the <strong>family</strong> + <strong>name</strong> pair must be unique for the system.</p>
</div>
<div class="paragraph">
<p>A component can belong to one family only and to one or several categories. If not specified, the category defaults to <code>Misc</code>.</p>
</div>
<div class="paragraph">
<p>The <code>package-info.java</code> file also defines the component family icon, which is different from the component icon. You can learn how to customize this icon in <a href="component-defining-custom-icon.html" class="xref page">this section</a>.</p>
</div>
<div class="paragraph">
<p>Here is a sample <code>package-info.java</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Components(name = "my_component_family", categories = "My Category")
package org.talend.sdk.component.sample;

import org.talend.sdk.component.api.component.Components;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another example with an existing component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Components(name = "Salesforce", categories = {"Business", "Cloud"})
package org.talend.sdk.component.sample;

import org.talend.sdk.component.api.component.Components;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="icon_version"><a class="anchor" href="#icon_version"></a>Component icon and version</h3>
<div class="paragraph">
<p>Components can require metadata to be integrated in Talend Studio or Cloud platforms.
Metadata is set on the component class and belongs to the <code>org.talend.sdk.component.api.component</code> package.</p>
</div>
<div class="paragraph">
<p>When you generate your project and import it in your IDE, icon and version both come with a default value.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>@Icon</strong>: Sets an icon key used to represent the component.
You can use a custom key with the <code>custom()</code> method but the icon may not be rendered properly. The icon defaults to <strong>Check</strong>.<br>
Replace it with a custom icon, as described in <a href="component-defining-custom-icon.html" class="xref page">this section</a>.</p>
</li>
<li>
<p><strong>@Version</strong>: Sets the component version. 1 by default.<br>
Learn how to manage different versions and migrations between your component versions in <a href="component-versions-and-migration.html" class="xref page">this section</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Version(1)
@Icon(FILE_XML_O)
@PartitionMapper(name = "jaxbInput")
public class JaxbPartitionMapper implements Serializable {
    // ...
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_defining_a_custom_icon_for_a_component_or_component_family"><a class="anchor" href="#_defining_a_custom_icon_for_a_component_or_component_family"></a>Defining a custom icon for a component or component family</h4>
<div class="paragraph">
<p>Every component family and component needs to have a representative icon.<br>
You have to define a custom icon as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For the component family the icon is defined in the <code>package-info.java</code> file.</p>
</li>
<li>
<p>For the component itself, you need to declare the icon in the component class.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Custom icons must comply with the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Icons must be stored in the <code>src/main/resources/icons</code> folder of the project.</p>
</li>
<li>
<p>Icon file names need to match one of the following patterns: <code>IconName.svg</code> or <code>IconName_icon32.png</code>. The latter will run in degraded mode in Talend Cloud. Replace <code>IconName</code> by the name of your choice.</p>
</li>
<li>
<p>Icons must be squared, even for the SVG format.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Icon(value = Icon.IconType.CUSTOM, custom = "IconName")</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Note that SVG icons are not supported by Talend Studio and can cause the deployment of the component to fail.</p>
</div>
<div class="paragraph">
<p>If you aim at deploying a custom component to Talend Studio, specify PNG icons or use the Maven (or Gradle) <code>svg2png</code> plugin to convert SVG icons to PNG. If you want a finer control over both images, you can provide both in your component.</p>
</div>
<div class="paragraph">
<p>Ultimately, you can also remove SVG parameters from the <code>talend.component.server.icon.paths</code> property in the HTTP server configuration.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2 relatedlinks">
<h3 id="_component_type_and_name"><a class="anchor" href="#_component_type_and_name"></a>Component type and name</h3>
<div class="paragraph">
<p>The component type is declared in the component class. When you import your project generated from the starter in your IDE, the component type is already defined.</p>
</div>
<div class="paragraph">
<p><strong>Input</strong> components can be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A partition mapper. <code>@PartitionMapper</code> is the default for input components.</p>
</li>
<li>
<p>An emitter. <code>@Emitter</code> is a shortcut for <code>@PartitionMapper</code> when you don&#8217;t support distribution. It enforces an implicit partition mapper execution with an assessor size of 1 and a split returning itself.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Processor</strong>/<strong>Output</strong> components can be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A processor. <code>@Processor</code> is the default for output components. A method decorated with <code>@Processor</code> is considered as a producer factory.</p>
</li>
<li>
<p>Combiners are not supported by the framework. Combiners allow to aggregate results in a single partition.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Standalone</strong> component can be only a driver runner.</p>
</div>
<div class="paragraph">
<p>The name of the component is defined there as well as a parameter of the component type.</p>
</div>
<div class="paragraph">
<p>Once the component type is defined, you can start implementing its specific logic:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="component-define-input.html" class="xref page">Defining an input component</a></p>
</li>
<li>
<p><a href="component-define-processor-output.html" class="xref page">Defining a processor or output component</a></p>
</li>
<li>
<p><a href="component-define-standalone.html" class="xref page">Defining an standalone component</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Partition mapper example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@PartitionMapper(name = "my_mapper")
public class MyMapper {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Emitter example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Emitter(name = "my_input")
public class MyInput {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Processor example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Processor(name = "my_processor")
public class MyProcessor {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Driver runner example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@DriverRunner(name = "my_standalone")
public class MyStandalone {
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_component_extra_metadatas"><a class="anchor" href="#_component_extra_metadatas"></a>Component extra metadatas</h3>
<div class="paragraph">
<p>For any purpose, you can also add user defined metadatas to your component with the <code>@Metadatas</code> annotation.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Processor(name = "my_processor")
@Metadatas({
        @Metadata(key = "user::value0", value = "myValue0"),
        @Metadata(key = "user::value1", value = "myValue1")
})
public class MyProcessor {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use a SPI implementing <code>org.talend.sdk.component.spi.component.ComponentMetadataEnricher</code>.</p>
</div>
</div>
<div class="sect2 relatedlinks">
<h3 id="_related_articles"><a class="anchor" href="#_related_articles"></a>Related articles</h3>
<div class="ulist">
<ul>
<li>
<p><a href="methodology-creating-components.html" class="xref page">Methodology for creating components</a></p>
</li>
<li>
<p><a href="tutorial-generate-project-using-starter.html" class="xref page">Generating a project using the starter</a></p>
</li>
<li>
<p><a href="component-versions-and-migration.html" class="xref page">Managing component versions</a></p>
</li>
<li>
<p><a href="component-define-input.html" class="xref page">Defining an input component</a></p>
</li>
<li>
<p><a href="component-define-processor-output.html" class="xref page">Defining a processor or output component</a></p>
</li>
<li>
<p><a href="component-define-standalone.html" class="xref page">Defining a driver runner component</a></p>
</li>
<li>
<p><a href="component-configuration.html" class="xref page">Defining component layout and configuration</a></p>
</li>
<li>
<p><a href="best-practices.html" class="xref page">Best practices</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_defining_datasets_and_datastores"><a class="anchor" href="#_defining_datasets_and_datastores"></a>Defining datasets and datastores</h2>
<div class="sectionbody">
<div id="dataset-and-datastore" class="paragraph">
<p>Datasets and datastores are configuration types that define how and where to pull the data from. They are used at design time to create shared configurations that can be stored and used at runtime.</p>
</div>
<div class="paragraph">
<p>All connectors (input and output components) created using Talend Component Kit must reference a valid dataset. Each dataset must reference a datastore.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Datastore: The data you need to connect to the backend.</p>
</li>
<li>
<p>Dataset: A datastore coupled with the data you need to execute an action.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/datastore_and_dataset_validation.png" target="_blank" rel="noopener"><img src="_images/datastore_and_dataset_validation.png" alt="Dataset validation"></a>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Make sure that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a datastore is used in each dataset.</p>
</li>
<li>
<p>each dataset has a corresponding input component (mapper or emitter).</p>
</li>
<li>
<p>This input component must be able to work with only the dataset part filled by final users. Any other property implemented for that component must be optional.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These rules are enforced by the <code>validateDataSet</code> validation. If the conditions are not met, the component builds will fail.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_defining_a_datastore"><a class="anchor" href="#_defining_a_datastore"></a>Defining a datastore</h3>
<div class="paragraph">
<p>A datastore defines the information required to connect to a data source. For example, it can be made of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a URL</p>
</li>
<li>
<p>a username</p>
</li>
<li>
<p>a password.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can specify a datastore and its context of use (in which dataset, etc.) from the <a href="tutorial-generate-project-using-starter.html" class="xref page">Component Kit Starter</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Make sure to modelize the data your components are designed to handle before defining datasets and datastores in the Component Kit Starter.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once you generate and import the project into an IDE, you can find datastores under a specific <code>datastore</code> node.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/datastore_view_intellij.png" target="_blank" rel="noopener"><img src="_images/datastore_view_intellij.png" alt="Datastore view"></a>
</div>
</div>
<div class="paragraph">
<p>Example of datastore:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.mycomponent.components.datastore;

@DataStore("DatastoreA") <i class="conum" data-value="1"></i><b>(1)</b>
@GridLayout({ <i class="conum" data-value="2"></i><b>(2)</b>
    // The generated component layout will display one configuration entry per line.
    // Customize it as much as needed.
    @GridLayout.Row({ "apiurl" }),
    @GridLayout.Row({ "username" }),
    @GridLayout.Row({ "password" })
})
@Documentation("A Datastore made of an API URL, a username, and a password. The password is marked as Credential.") <i class="conum" data-value="3"></i><b>(3)</b>
public class DatastoreA implements Serializable {
    @Option
    @Documentation("")
    private String apiurl;

    @Option
    @Documentation("")
    private String username;

    @Option
    @Credential
    @Documentation("")
    private String password;

    public String getApiurl() {
        return apiurl;
    }

    public DatastoreA setApiurl(String apiurl) {
        this.apiurl = apiurl;
        return this;
    }

    public String getUsername() {
        return Username;
    }

    public DatastoreA setuUsername(String username) {
        this.username = username;
        return this;
    }

    public String getPassword() {
        return password;
    }

    public DatastoreA setPassword(String password) {
        this.password = password;
        return this;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Identifying the class as a datastore and naming it.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defining the layout of the datastore configuration.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Defining each element of the configuration: a URL, a username, and a password. Note that the password is also marked as a credential.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_defining_a_dataset"><a class="anchor" href="#_defining_a_dataset"></a>Defining a dataset</h3>
<div class="paragraph">
<p>A dataset represents the inbound data. It is generally made of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A datastore that defines the connection information needed to access the data.</p>
</li>
<li>
<p>A query.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can specify a dataset and its context of use (in which input and output component it is used) from the <a href="tutorial-generate-project-using-starter.html" class="xref page">Component Kit Starter</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Make sure to modelize the data your components are designed to handle before defining datasets and datastores in the Component Kit Starter.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once you generate and import the project into an IDE, you can find datasets under a specific <code>dataset</code> node.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/dataset_view_intellij.png" target="_blank" rel="noopener"><img src="_images/dataset_view_intellij.png" alt="Dataset view"></a>
</div>
</div>
<div class="paragraph">
<p>Example of dataset referencing the datastore shown above:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.datastorevalidation.components.dataset;

@DataSet("DatasetA") <i class="conum" data-value="1"></i><b>(1)</b>
@GridLayout({
    // The generated component layout will display one configuration entry per line.
    // Customize it as much as needed.
    @GridLayout.Row({ "datastore" })
})
@Documentation("A Dataset configuration containing a simple datastore") <i class="conum" data-value="2"></i><b>(2)</b>
public class DatasetA implements Serializable {
    @Option
    @Documentation("Datastore")
    private DatastoreA datastore;

    public DatastoreA getDatastore() {
        return datastore;
    }

    public DatasetA setDatastore(DatastoreA datastore) {
        this.datastore = datastore;
        return this;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Identifying the class as a dataset and naming it.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Implementing the dataset and referencing DatastoreA as the datastore to use.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_internationalizing_datasets_and_datastores"><a class="anchor" href="#_internationalizing_datasets_and_datastores"></a>Internationalizing datasets and datastores</h3>
<div class="paragraph">
<p>The display name of each dataset and datastore must be referenced in the <code>message.properties</code> file of the family package.</p>
</div>
<div class="paragraph">
<p>The key for dataset and datastore display names follows a defined pattern: <code>${family}.${configurationType}.${name}._displayName</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ComponentFamily.dataset.DatasetA._displayName=Dataset A
ComponentFamily.datastore.DatastoreA._displayName=Datastore A</code></pre>
</div>
</div>
<div class="paragraph">
<p>These keys are automatically added for datasets and datastores defined from the Component Kit Starter.</p>
</div>
</div>
<div class="sect2">
<h3 id="_reusing_datasets_and_datastores_in_talend_studio"><a class="anchor" href="#_reusing_datasets_and_datastores_in_talend_studio"></a>Reusing datasets and datastores in Talend Studio</h3>
<div class="paragraph">
<p>When deploying a component or set of components that include datasets and datastores to Talend Studio, a new node is created under <strong>Metadata</strong>. This node has the name of the component family that was deployed.</p>
</div>
<div class="paragraph">
<p>It allows users to create reusable configurations for datastores and datasets.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/studio_create_dataset.png" target="_blank" rel="noopener"><img src="_images/studio_create_dataset.png" alt="Dataset in Studio"></a>
</div>
</div>
<div class="paragraph">
<p>With predefined datasets and datastores, users can then quickly fill the component configuration in their jobs. They can do so by selecting <strong>Repository</strong> as <strong>Property Type</strong> and by browsing to the predefined dataset or datastore.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/studio_select_predefined_dataset.png" target="_blank" rel="noopener"><img src="_images/studio_select_predefined_dataset.png" alt="Dataset in Component"></a>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_create_a_reusable_connection_in_studio"><a class="anchor" href="#_how_to_create_a_reusable_connection_in_studio"></a>How to create a reusable connection in Studio</h3>
<div class="paragraph">
<p>Studio will generate connection and close components auto for reusing connection function in input and output components, just need to do like this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Service
public class SomeService {

    @CreateConnection
    public Object createConn(@Option("configuration") SomeDataStore dataStore) throws ComponentException {
        Object connection = null;
        //get conn object by dataStore
        return conn;
    }

    @CloseConnection
    public CloseConnectionObject closeConn() {
        return new CloseConnectionObject() {

            public boolean close() throws ComponentException {
                Object connection = this.getConnection();
                //do close action
                return true;
            }

        };
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the runtime mapper and processor only need to use @Connection to get the connection like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Version(1)
@Icon(value = Icon.IconType.CUSTOM, custom = "SomeInput")
@PartitionMapper(name = "SomeInput")
@Documentation("the doc")
public class SomeInputMapper implements Serializable {

    @Connection
    SomeConnection conn;

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_does_the_component_server_interact_with_datasets_and_datastores"><a class="anchor" href="#_how_does_the_component_server_interact_with_datasets_and_datastores"></a>How does the component server interact with datasets and datastores</h3>
<div class="paragraph">
<p>The component server scans all configuration types and returns a configuration type index. This index can be used for the integration into the targeted platforms (Studio, web applications, and so on).</p>
</div>
<div class="sect3">
<h4 id="_dataset"><a class="anchor" href="#_dataset"></a>Dataset</h4>
<div class="paragraph">
<p>Mark a model (complex object) as being a dataset.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: @org.talend.sdk.component.api.configuration.type.DataSet</p>
</li>
<li>
<p>Sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "tcomp::configurationtype::name":"test",
  "tcomp::configurationtype::type":"dataset"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_datastore"><a class="anchor" href="#_datastore"></a>Datastore</h4>
<div class="paragraph">
<p>Mark a model (complex object) as being a datastore (connection to a backend).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: @org.talend.sdk.component.api.configuration.type.DataStore</p>
</li>
<li>
<p>Sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "tcomp::configurationtype::name":"test",
  "tcomp::configurationtype::type":"datastore"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_datasetdiscovery"><a class="anchor" href="#_datasetdiscovery"></a>DatasetDiscovery</h4>
<div class="paragraph">
<p>Mark a model (complex object) as being a dataset discovery configuration.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: @org.talend.sdk.component.api.configuration.type.DatasetDiscovery</p>
</li>
<li>
<p>Sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "tcomp::configurationtype::name":"test",
  "tcomp::configurationtype::type":"datasetDiscovery"
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The component family associated with a configuration type (datastore/dataset) is always the one related to the component using that configuration.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The configuration type index is represented as a flat tree that contains all the configuration types, which themselves are represented as nodes and indexed by ID.</p>
</div>
<div class="paragraph">
<p>Every node can point to other nodes. This relation is represented as an array of edges that provides the child IDs.</p>
</div>
<div class="paragraph">
<p>As an illustration, a configuration type index for the example above can be defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{nodes: {
             "idForDstore": { datastore:"datastore data", edges:[id:"idForDset"] },
             "idForDset":   { dataset:"dataset data" }
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_defining_an_input_component_logic"><a class="anchor" href="#_defining_an_input_component_logic"></a>Defining an input component logic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Input components are the components generally placed at the beginning of a Talend job. They are in charge of retrieving the data that will later be processed in the job.</p>
</div>
<div class="paragraph">
<p>An input component is primarily made of three distinct logics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The execution logic of the component itself, defined through a partition mapper.</p>
</li>
<li>
<p>The configurable part of the component, defined through the mapper configuration.</p>
</li>
<li>
<p>The source logic defined through a producer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Before implementing the component logic and defining its layout and configurable fields, make sure you have specified its basic metadata, as detailed in <a href="component-registering.html" class="xref page">this document</a>.</p>
</div>
<div class="sect2">
<h3 id="_defining_a_partition_mapper"><a class="anchor" href="#_defining_a_partition_mapper"></a>Defining a partition mapper</h3>
<div class="sect3">
<h4 id="partition-mapper"><a class="anchor" href="#partition-mapper"></a>What is a partition mapper</h4>
<div class="paragraph">
<p>A <strong>Partition Mapper</strong> (<code>PartitionMapper</code>) is a component able to split itself to make the execution more efficient.</p>
</div>
<div class="paragraph">
<p>This concept is borrowed from big data and useful in this context only (<code>BEAM</code> executions).
The idea is to divide the work before executing it in order to reduce the overall execution time.</p>
</div>
<div class="paragraph">
<p>The process is the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The size of the data you work on is estimated. This part can be heuristic and not very precise.</p>
</li>
<li>
<p>From that size, the execution engine (<em>runner</em> for Beam) requests the mapper to split <em>itself</em> in <em>N</em> mappers with a subset of the overall work.</p>
</li>
<li>
<p>The <em>leaf</em> (final) mapper is used as a <code>Producer</code> (actual reader) factory.</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This kind of component must be <code>Serializable</code> to be distributable.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_implementing_a_partition_mapper"><a class="anchor" href="#_implementing_a_partition_mapper"></a>Implementing a partition mapper</h4>
<div class="paragraph">
<p>A partition mapper requires three methods marked with specific annotations:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>@Assessor</code> for the evaluating method</p>
</li>
<li>
<p><code>@Split</code> for the dividing method</p>
</li>
<li>
<p><code>@Emitter</code> for the <code>Producer</code> factory</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="_assessor"><a class="anchor" href="#_assessor"></a>@Assessor</h5>
<div class="paragraph">
<p>The Assessor method returns the estimated size of the data related to the component (depending its configuration).
It must return a <code>Number</code> and must not take any parameter.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock initial-block-closed">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Assessor
public long estimateDataSetByteSize() {
    return ....;
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_split"><a class="anchor" href="#_split"></a>@Split</h5>
<div class="paragraph">
<p>The Split method returns a collection of partition mappers and can take optionally a <code>@PartitionSize</code> long value as parameter, which is the requested size of the dataset per sub partition mapper.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Split
public List&lt;MyMapper&gt; split(@PartitionSize final long desiredSize) {
    return ....;
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_emitter"><a class="anchor" href="#_emitter"></a>@Emitter</h5>
<div class="paragraph">
<p>The Emitter method must not have any parameter and must return a producer. It uses the partition mapper configuration to instantiate and configure the producer.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Emitter
public MyProducer create() {
    return ....;
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_defining_the_producer_method"><a class="anchor" href="#_defining_the_producer_method"></a>Defining the producer method</h3>
<div class="paragraph">
<p>The<strong>Producer</strong> defines the source logic of an input component. It handles the interaction with a physical source and produces input data for the processing flow.</p>
</div>
<div class="paragraph">
<p>A producer must have a <code>@Producer</code> method without any parameter. It is triggered by the <code>@Emitter</code> method of the partition mapper and can return any data. It is defined in the <code>&lt;component_name&gt;Source.java</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Producer
public MyData produces() {
    return ...;
}</code></pre>
</div>
</div>
</div>
<div class="sect2 relatedlinks">
<h3 id="_related_articles_2"><a class="anchor" href="#_related_articles_2"></a>Related articles</h3>
<div class="ulist">
<ul>
<li>
<p><a href="methodology-creating-components.html" class="xref page">Methodology for creating components</a></p>
</li>
<li>
<p><a href="tutorial-generate-project-using-starter.html" class="xref page">Generating a project using the starter</a></p>
</li>
<li>
<p><a href="component-registering.html" class="xref page">Registering a component</a></p>
</li>
<li>
<p><a href="component-execution.html" class="xref page">General component execution logic</a></p>
</li>
<li>
<p><a href="component-configuration.html" class="xref page">Defining component layout and configuration</a></p>
</li>
<li>
<p><a href="component-internationalization.html" class="xref page">Internationalizing a component</a></p>
</li>
<li>
<p><a href="tutorial-configuration-sensitive-data.html" class="xref page">Masking sensitive data</a></p>
</li>
<li>
<p><a href="component-implementing-streaming.html" class="xref page">Implementing streaming on a component</a></p>
</li>
<li>
<p><a href="best-practices.html" class="xref page">Best practices</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_defining_a_processor_or_an_output_component_logic"><a class="anchor" href="#_defining_a_processor_or_an_output_component_logic"></a>Defining a processor or an output component logic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Processors and output components are the components in charge of reading, processing and transforming data in a Talend job, as well as passing it to its required destination.</p>
</div>
<div class="paragraph">
<p>Before implementing the component logic and defining its layout and configurable fields, make sure you have specified its basic metadata, as detailed in <a href="component-registering.html" class="xref page">this document</a>.</p>
</div>
<div class="sect2">
<h3 id="_defining_a_processor"><a class="anchor" href="#_defining_a_processor"></a>Defining a processor</h3>
<div class="sect3">
<h4 id="component-type-processor"><a class="anchor" href="#component-type-processor"></a>What is a processor</h4>
<div class="paragraph">
<p>A <strong>Processor</strong> is a component that converts incoming data to a different model.</p>
</div>
<div class="paragraph">
<p>A processor must have a method decorated with <code>@ElementListener</code> taking an incoming data and returning the processed data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ElementListener
public MyNewData map(final MyData data) {
    return ...;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Processors must be <strong>Serializable</strong> because they are distributed components.</p>
</div>
<div class="paragraph">
<p>If you just need to access data on a map-based ruleset, you can use <code>Record</code> or <code>JsonObject</code> as parameter type.<br>
From there, Talend Component Kit wraps the data to allow you to access it as a map. The parameter type is not enforced.<br>
This means that if you know you will get a <code>SuperCustomDto</code>, then you can use it as parameter type. But for generic components that are reusable in any chain, it is highly encouraged to use <code>Record</code> until you have an evaluation language-based processor that has its own way to access components.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ElementListener
public MyNewData map(final Record incomingData) {
    String name = incomingData.getString("name");
    int name = incomingData.getInt("age");
    return ...;
}

// equivalent to (using POJO subclassing)

public class Person {
    private String age;
    private int age;

    // getters/setters
}

@ElementListener
public MyNewData map(final Person person) {
    String name = person.getName();
    int age = person.getAge();
    return ...;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A processor also supports <code>@BeforeGroup</code> and <code>@AfterGroup</code> methods, which must not have any parameter and return <code>void</code> values. Any other result would be ignored.
These methods are used by the runtime to mark a chunk of the data in a way which is estimated <em>good</em> for the execution flow size.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Because the size is estimated, the size of a <em>group</em> can vary. It is even possible to have groups of size <code>1</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It is recommended to batch records, for performance reasons:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@BeforeGroup
public void initBatch() {
    // ...
}

@AfterGroup
public void endBatch() {
    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can optimize the data batch processing by using the <code>maxBatchSize</code> parameter. This parameter is automatically implemented on the component when it is deployed to a Talend application. Only the logic needs to be implemented. You can however customize its value setting in your <code>LocalConfiguration</code> the property <code>_maxBatchSize.value</code> - for the family - or <code>${component simple class name}._maxBatchSize.value</code> - for a particular component, otherwise its default will be <code>1000</code>. If you replace <code>value</code> by <code>active</code>, you can also configure if this feature is enabled or not. This is useful when you don&#8217;t want to use it at all. Learn how to implement chunking/bulking in <a href="concept-processor-and-batch-processing.html" class="xref page">this document</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_defining_output_connections"><a class="anchor" href="#_defining_output_connections"></a>Defining output connections</h4>
<div class="paragraph">
<p>In some cases, you may need to split the output of a processor in two or more connections. A common example is to have "main" and "reject" output connections where part of the incoming data are passed to a specific bucket and processed later.</p>
</div>
<div class="paragraph">
<p>Talend Component Kit supports two types of output connections: Flow and Reject.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Flow</strong> is the main and standard output connection.</p>
</li>
<li>
<p>The <strong>Reject</strong> connection handles records rejected during the processing. A component can only have one reject connection, if any. Its name must be <code>REJECT</code> to be processed correctly in Talend applications.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can also define the different output connections of your component in the Starter.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To define an output connection, you can use <code>@Output</code> as replacement of the returned value in the <code>@ElementListener</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ElementListener
public void map(final MyData data, @Output final OutputEmitter&lt;MyNewData&gt; output) {
    output.emit(createNewData(data));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can pass a string that represents the new branch:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ElementListener
public void map(final MyData data,
                @Output final OutputEmitter&lt;MyNewData&gt; main,
                @Output("REJECT") final OutputEmitter&lt;MyNewDataWithError&gt; rejected) {
    if (isRejected(data)) {
        rejected.emit(createNewData(data));
    } else {
        main.emit(createNewData(data));
    }
}

// or

@ElementListener
public MyNewData map(final MyData data,
                    @Output("REJECT") final OutputEmitter&lt;MyNewDataWithError&gt; rejected) {
    if (isSuspicious(data)) {
        rejected.emit(createNewData(data));
        return createNewData(data); // in this case the processing continues but notifies another channel
    }
    return createNewData(data);
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_defining_multiple_inputs"><a class="anchor" href="#_defining_multiple_inputs"></a>Defining multiple inputs</h4>
<div class="paragraph">
<p>Having multiple inputs is similar to having multiple outputs, except that an <code>OutputEmitter</code> wrapper is not needed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ElementListener
public MyNewData map(@Input final MyData data, @Input("input2") final MyData2 data2) {
    return createNewData(data1, data2);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@Input</code> takes the input name as parameter. If no name is set, it defaults to the "main (default)" input branch. It is recommended to use the default branch when possible and to avoid naming branches according to the component semantic.</p>
</div>
</div>
<div class="sect3">
<h4 id="_implementing_batch_processing"><a class="anchor" href="#_implementing_batch_processing"></a>Implementing batch processing</h4>
<div class="sect4">
<h5 id="_what_is_batch_processing"><a class="anchor" href="#_what_is_batch_processing"></a>What is batch processing</h5>
<div class="paragraph">
<p>Batch processing refers to the way execution environments process batches of data handled by a component using a grouping mechanism.</p>
</div>
<div class="paragraph">
<p>By default, the execution environment of a component automatically decides how to process groups of records and estimates an optimal group size depending on the system capacity. With this default behavior, the size of each group could sometimes be optimized for the system to handle the load more effectively or to match business requirements.</p>
</div>
<div class="paragraph">
<p>For example, real-time or near real-time processing needs often imply processing smaller batches of data, but more often. On the other hand, a one-time processing without business contraints is more effectively handled with a batch size based on the system capacity.</p>
</div>
<div class="paragraph">
<p>Final users of a component developed with the Talend Component Kit that integrates the batch processing logic described in this document can override this automatic size. To do that, a <code>maxBatchSize</code> option is available in the component settings and allows to set the maximum size of each group of data to process.</p>
</div>
<div class="paragraph">
<p>A component processes batch data as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Case 1 - No <code>maxBatchSize</code> is specified in the component configuration. The execution environment estimates a group size of 4. Records are processed by groups of 4.</p>
</li>
<li>
<p>Case 2 - The runtime estimates a group size of 4 but a <code>maxBatchSize</code> of 3 is specified in the component configuration. The system adapts the group size to 3. Records are processed by groups of 3.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Processing schema (values are examples):</strong></div>
<p><span class="image"><a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/batch-processing-maxbatchsize.png" target="_blank" rel="noopener"><img src="_images/batch-processing-maxbatchsize.png" alt="Batch processing"></a></span></p>
</div>
</div>
<div class="sect4">
<h5 id="_batch_processing_implementation_logic"><a class="anchor" href="#_batch_processing_implementation_logic"></a>Batch processing implementation logic</h5>
<div class="paragraph">
<p>Batch processing relies on the sequence of three methods: <code>@BeforeGroup</code>, <code>@ElementListener</code>, <code>@AfterGroup</code>, that you can customize to your needs as a component Developer.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The group size automatic estimation logic is automatically implemented when a component is deployed to a Talend application.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Each group is processed as follows until there is no record left:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <code>@BeforeGroup</code> method resets a record buffer at the beginning of each group.</p>
</li>
<li>
<p>The records of the group are assessed one by one and placed in the buffer as follows: The <code>@ElementListener</code> method tests if the buffer size is greater or equal to the defined <code>maxBatchSize</code>. If it is, the records are processed. If not, then the current record is buffered.</p>
</li>
<li>
<p>The previous step happens for all records of the group. Then the <code>@AfterGroup</code> method tests if the buffer is empty.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title"><strong>Group execution detail (values are examples):</strong></div>
<p><span class="image"><a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/batch-processing-group.png" target="_blank" rel="noopener"><img src="_images/batch-processing-group.png" alt="Group batch processing"></a></span></p>
</div>
<div class="paragraph">
<p>You can define the following logic in the processor configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import java.io.Serializable;
import java.util.ArrayList;
import java.util.Collection;

import javax.json.JsonObject;

import org.talend.sdk.component.api.processor.AfterGroup;
import org.talend.sdk.component.api.processor.BeforeGroup;
import org.talend.sdk.component.api.processor.ElementListener;
import org.talend.sdk.component.api.processor.Processor;

@Processor(name = "BulkOutputDemo")
public class BulkProcessor implements Serializable {
    private Collection&lt;JsonObject&gt; buffer;

    @BeforeGroup
    public void begin() {
        buffer = new ArrayList&lt;&gt;();
    }

    @ElementListener
    public void bufferize(final JsonObject object) {
        buffer.add(object);
    }

    @AfterGroup
    public void commit() {
        // saves buffered records at once (bulk)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the condensed syntax for this kind of processor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Processor(name = "BulkOutputDemo")
public class BulkProcessor implements Serializable {

    @AfterGroup
    public void commit(final Collection&lt;Record&gt; records) {
        // saves records
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When writing tests for components, you can force the <code>maxBatchSize</code> parameter value by setting it with the following syntax: <code>&lt;configuration prefix&gt;.$maxBatchSize=10</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can learn more about processors in <a href="component-define-processor-output.html" class="xref page">this document</a>.</p>
</div>
</div>
<div class="sect4 relatedlinks">
<h5 id="_related_articles_3"><a class="anchor" href="#_related_articles_3"></a>Related articles</h5>
<div class="ulist">
<ul>
<li>
<p><a href="component-define-processor-output.html" class="xref page">Defining a processor/output logic</a></p>
</li>
<li>
<p><a href="component-execution.html" class="xref page">General component execution logic</a></p>
</li>
<li>
<p><a href="concept-processor-and-batch-processing.html" class="xref page">Implementing bulk processing</a></p>
</li>
<li>
<p><a href="best-practices.html" class="xref page">Best practices</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_shortcut_syntax_for_bulk_output_processors"><a class="anchor" href="#_shortcut_syntax_for_bulk_output_processors"></a>Shortcut syntax for bulk output processors</h4>
<div class="paragraph">
<p>For the case of output components (not emitting any data) using bulking you can pass the list of records to the after group method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Processor(name = "DocOutput")
public class DocOutput implements Serializable {

    @AfterGroup
    public void onCommit(final Collection&lt;Record&gt; records) {
        // save records
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_defining_an_output"><a class="anchor" href="#_defining_an_output"></a>Defining an output</h3>
<div class="sect3">
<h4 id="_what_is_an_output"><a class="anchor" href="#_what_is_an_output"></a>What is an output</h4>
<div class="paragraph">
<p>An <strong>Output</strong> is a <strong>Processor</strong> that does not return any data.</p>
</div>
<div class="paragraph">
<p>Conceptually, an output is a data listener. It matches the concept of processor. Being the last component of the execution chain or returning no data makes your processor an output component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ElementListener
public void store(final MyData data) {
    // ...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_defining_a_combiner"><a class="anchor" href="#_defining_a_combiner"></a>Defining a combiner</h3>
<div class="sect3">
<h4 id="_what_is_a_combiner"><a class="anchor" href="#_what_is_a_combiner"></a>What is a combiner</h4>
<div class="paragraph">
<p>Currently, Talend Component Kit does not allow you to define a <strong>Combiner</strong>.
A combiner is the symmetric part of a partition mapper. It allows to aggregate results in a single partition.</p>
</div>
</div>
</div>
<div class="sect2 relatedlinks">
<h3 id="_related_articles_4"><a class="anchor" href="#_related_articles_4"></a>Related articles</h3>
<div class="ulist">
<ul>
<li>
<p><a href="methodology-creating-components.html" class="xref page">Methodology for creating components</a></p>
</li>
<li>
<p><a href="tutorial-generate-project-using-starter.html" class="xref page">Generating a project using the starter</a></p>
</li>
<li>
<p><a href="component-registering.html" class="xref page">Registering a component</a></p>
</li>
<li>
<p><a href="component-execution.html" class="xref page">General component execution logic</a></p>
</li>
<li>
<p><a href="component-configuration.html" class="xref page">Defining component layout and configuration</a></p>
</li>
<li>
<p><a href="concept-processor-and-batch-processing.html" class="xref page">Implementing bulk processing</a></p>
</li>
<li>
<p><a href="component-internationalization.html" class="xref page">Internationalizing a component</a></p>
</li>
<li>
<p><a href="tutorial-configuration-sensitive-data.html" class="xref page">Masking sensitive data</a></p>
</li>
<li>
<p><a href="best-practices.html" class="xref page">Best practices</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_defining_a_standalone_component_logic"><a class="anchor" href="#_defining_a_standalone_component_logic"></a>Defining a standalone component logic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Standalone components are the components without input or output flows. They are designed to do actions without reading or processing any data. For example standalone components can be used to create indexes in databases.</p>
</div>
<div class="paragraph">
<p>Before implementing the component logic and defining its layout and configurable fields, make sure you have specified its basic metadata, as detailed in <a href="component-registering.html" class="xref page">this document</a>.</p>
</div>
<div class="sect2">
<h3 id="_defining_a_driver_runner"><a class="anchor" href="#_defining_a_driver_runner"></a>Defining a driver runner</h3>
<div class="sect3">
<h4 id="driver-runner"><a class="anchor" href="#driver-runner"></a>What is a driver runner</h4>
<div class="paragraph">
<p>A <strong>Driver Runner</strong> (<code>DriverRunner</code>) is a standalone component which doesn&#8217;t process or return any data.</p>
</div>
<div class="paragraph">
<p>A Driver runner must have a <code>@RunAtDriver</code> method without any parameter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@RunAtDriver
public void run() {
    ...;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2 relatedlinks">
<h3 id="_related_articles_5"><a class="anchor" href="#_related_articles_5"></a>Related articles</h3>
<div class="ulist">
<ul>
<li>
<p><a href="methodology-creating-components.html" class="xref page">Methodology for creating components</a></p>
</li>
<li>
<p><a href="tutorial-generate-project-using-starter.html" class="xref page">Generating a project using the starter</a></p>
</li>
<li>
<p><a href="component-registering.html" class="xref page">Registering a component</a></p>
</li>
<li>
<p><a href="component-execution.html" class="xref page">General component execution logic</a></p>
</li>
<li>
<p><a href="component-configuration.html" class="xref page">Defining component layout and configuration</a></p>
</li>
<li>
<p><a href="component-internationalization.html" class="xref page">Internationalizing a component</a></p>
</li>
<li>
<p><a href="tutorial-configuration-sensitive-data.html" class="xref page">Masking sensitive data</a></p>
</li>
<li>
<p><a href="component-implementing-streaming.html" class="xref page">Implementing streaming on a component</a></p>
</li>
<li>
<p><a href="best-practices.html" class="xref page">Best practices</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_defining_component_layout_and_configuration"><a class="anchor" href="#_defining_component_layout_and_configuration"></a>Defining component layout and configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The component configuration is defined in the <code>&lt;component_name&gt;Configuration.java</code> file of the package. It consists in defining the configurable part of the component that will be displayed in the UI.</p>
</div>
<div class="paragraph">
<p>To do that, you can specify parameters. When you import the project in your IDE, the parameters that you have specified in the starter are already present.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
All input and output components must reference a dataset in their configuration. Refer to <a href="creating-dataset-datastore.html" class="xref page">Defining datasets and datastores</a>.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_parameter_name"><a class="anchor" href="#_parameter_name"></a>Parameter name</h3>
<div class="paragraph">
<p>Components are configured using their constructor parameters. All parameters can be marked with the <code>@Option</code> property, which lets you give a name to them.</p>
</div>
<div class="paragraph">
<p>For the name to be correct, you must follow these guidelines:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use a valid Java name.</p>
</li>
<li>
<p>Do not include any <code>.</code> character in it.</p>
</li>
<li>
<p>Do not start the name with a <code>$</code>.</p>
</li>
<li>
<p>Defining a name is optional. If you don&#8217;t set a specific name, it defaults to the bytecode name. This can require you to compile with a <code>-parameter</code> flag to avoid ending up with names such as <strong>arg0</strong>, <strong>arg1</strong>, and so on.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Examples of option name:</p>
</div>
<table class="tableblock frame-all grid-all stretch table-striped table-hover table-ordered">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Option name</th>
<th class="tableblock halign-center valign-top">Valid</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">myName</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon green"><i class="fa fa-check"></i></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">my_name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon green"><i class="fa fa-check"></i></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">my.name</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon mediumvioletred"><i class="fa fa-times"></i></span></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$myName</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon mediumvioletred"><i class="fa fa-times"></i></span></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_parameter_types"><a class="anchor" href="#_parameter_types"></a>Parameter types</h3>
<div class="paragraph">
<p>Parameter types can be <em>primitives</em> or complex objects with fields decorated with <code>@Option</code> exactly like method parameters.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
It is recommended to use simple models which can be serialized in order to ease serialized component implementations.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class FileFormat implements Serializable {
    @Option("type")
    private FileType type = FileType.CSV;

    @Option("max-records")
    private int maxRecords = 1024;
}

@PartitionMapper(name = "file-reader")
public MyFileReader(@Option("file-path") final File file,
                    @Option("file-format") final FileFormat format) {
    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using this kind of API makes the configuration extensible and component-oriented, which allows you to define all you need.</p>
</div>
<div class="paragraph">
<p>The instantiation of the parameters is done from the properties passed to the component.</p>
</div>
<div class="sect3">
<h4 id="_primitives"><a class="anchor" href="#_primitives"></a>Primitives</h4>
<div class="paragraph">
<p>A primitive is a class which can be directly converted from a <code>String</code> to the expected type.</p>
</div>
<div class="paragraph">
<p>It includes all Java primitives, like the <code>String</code> type itself, but also all types with a <code>org.apache.xbean.propertyeditor.Converter</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>BigDecimal</code></p>
</li>
<li>
<p><code>BigInteger</code></p>
</li>
<li>
<p><code>File</code></p>
</li>
<li>
<p><code>InetAddress</code></p>
</li>
<li>
<p><code>ObjectName</code></p>
</li>
<li>
<p><code>URI</code></p>
</li>
<li>
<p><code>URL</code></p>
</li>
<li>
<p><code>Pattern</code></p>
</li>
<li>
<p><code>LocalDateTime</code></p>
</li>
<li>
<p><code>ZonedDateTime</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mapping_complex_objects"><a class="anchor" href="#_mapping_complex_objects"></a>Mapping complex objects</h3>
<div class="paragraph">
<p>The conversion from property to object uses the Dot notation.</p>
</div>
<div class="paragraph">
<p>For example, assuming the method parameter was configured with <code>@Option("file")</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">file.path = /home/user/input.csv
file.format = CSV</code></pre>
</div>
</div>
<div class="paragraph">
<p>matches</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class FileOptions {
    @Option("path")
    private File path;

    @Option("format")
    private Format format;
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_list_case"><a class="anchor" href="#_list_case"></a>List case</h4>
<div class="paragraph">
<p>Lists rely on an indexed syntax to define their elements.</p>
</div>
<div class="paragraph">
<p>For example, assuming that the list parameter is named <code>files</code> and that the elements are of the <code>FileOptions</code> type, you can define a list of two elements as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">files[0].path = /home/user/input1.csv
files[0].format = CSV
files[1].path = /home/user/input2.xml
files[1].format = EXCEL</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
if you desire to override a config to truncate an array, use the index <code>length</code>, for example to truncate previous example to only CSV, you can set:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">files[length] = 1</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_map_case"><a class="anchor" href="#_map_case"></a>Map case</h4>
<div class="paragraph">
<p>Similarly to the list case, the map uses <code>.key[index]</code> and <code>.value[index]</code> to represent its keys and values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">// Map&lt;String, FileOptions&gt;
files.key[0] = first-file
files.value[0].path = /home/user/input1.csv
files.value[0].type = CSV
files.key[1] = second-file
files.value[1].path = /home/user/input2.xml
files.value[1].type = EXCEL</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">// Map&lt;FileOptions, String&gt;
files.key[0].path = /home/user/input1.csv
files.key[0].type = CSV
files.value[0] = first-file
files.key[1].path = /home/user/input2.xml
files.key[1].type = EXCEL
files.value[1] = second-file</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Avoid using the Map type. Instead, prefer configuring your component with an object if this is possible.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_defining_constraints_and_validations_on_the_configuration"><a class="anchor" href="#_defining_constraints_and_validations_on_the_configuration"></a>Defining Constraints and validations on the configuration</h3>
<div class="paragraph">
<p>You can use metadata to specify that a field is required or has a minimum size, and so on. This is done using the <code>validation</code> metadata in the <code>org.talend.sdk.component.api.configuration.constraint</code> package:</p>
</div>
<div class="sect3">
<h4 id="_maxlength"><a class="anchor" href="#_maxlength"></a>MaxLength</h4>
<div class="paragraph">
<p>Ensure the decorated option size is validated with a higher bound.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.constraint.Max</code></p>
</li>
<li>
<p>Name: <code>maxLength</code></p>
</li>
<li>
<p>Parameter Type: <code>double</code></p>
</li>
<li>
<p>Supported Types:&#8201;&#8212;&#8201;<code>java.lang.CharSequence</code></p>
</li>
<li>
<p>Sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "validation::maxLength":"12.34"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_minlength"><a class="anchor" href="#_minlength"></a>MinLength</h4>
<div class="paragraph">
<p>Ensure the decorated option size is validated with a lower bound.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.constraint.Min</code></p>
</li>
<li>
<p>Name: <code>minLength</code></p>
</li>
<li>
<p>Parameter Type: <code>double</code></p>
</li>
<li>
<p>Supported Types:&#8201;&#8212;&#8201;<code>java.lang.CharSequence</code></p>
</li>
<li>
<p>Sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "validation::minLength":"12.34"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_pattern"><a class="anchor" href="#_pattern"></a>Pattern</h4>
<div class="paragraph">
<p>Validate the decorated string with a <strong>javascript</strong> pattern (even into the Studio).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.constraint.Pattern</code></p>
</li>
<li>
<p>Name: <code>pattern</code></p>
</li>
<li>
<p>Parameter Type: <code>java.lang.string</code></p>
</li>
<li>
<p>Supported Types:&#8201;&#8212;&#8201;<code>java.lang.CharSequence</code></p>
</li>
<li>
<p>Sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "validation::pattern":"test"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_max"><a class="anchor" href="#_max"></a>Max</h4>
<div class="paragraph">
<p>Ensure the decorated option size is validated with a higher bound.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.constraint.Max</code></p>
</li>
<li>
<p>Name: <code>max</code></p>
</li>
<li>
<p>Parameter Type: <code>double</code></p>
</li>
<li>
<p>Supported Types:&#8201;&#8212;&#8201;<code>java.lang.Number</code>&#8201;&#8212;&#8201;<code>int</code>&#8201;&#8212;&#8201;<code>short</code>&#8201;&#8212;&#8201;<code>byte</code>&#8201;&#8212;&#8201;<code>long</code>&#8201;&#8212;&#8201;<code>double</code>&#8201;&#8212;&#8201;<code>float</code></p>
</li>
<li>
<p>Sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "validation::max":"12.34"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_min"><a class="anchor" href="#_min"></a>Min</h4>
<div class="paragraph">
<p>Ensure the decorated option size is validated with a lower bound.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.constraint.Min</code></p>
</li>
<li>
<p>Name: <code>min</code></p>
</li>
<li>
<p>Parameter Type: <code>double</code></p>
</li>
<li>
<p>Supported Types:&#8201;&#8212;&#8201;<code>java.lang.Number</code>&#8201;&#8212;&#8201;<code>int</code>&#8201;&#8212;&#8201;<code>short</code>&#8201;&#8212;&#8201;<code>byte</code>&#8201;&#8212;&#8201;<code>long</code>&#8201;&#8212;&#8201;<code>double</code>&#8201;&#8212;&#8201;<code>float</code></p>
</li>
<li>
<p>Sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "validation::min":"12.34"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_required"><a class="anchor" href="#_required"></a>Required</h4>
<div class="paragraph">
<p>Mark the field as being mandatory.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.constraint.Required</code></p>
</li>
<li>
<p>Name: <code>required</code></p>
</li>
<li>
<p>Parameter Type: <code>-</code></p>
</li>
<li>
<p>Supported Types:&#8201;&#8212;&#8201;<code>java.lang.Object</code></p>
</li>
<li>
<p>Sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "validation::required":"true"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_maxitems"><a class="anchor" href="#_maxitems"></a>MaxItems</h4>
<div class="paragraph">
<p>Ensure the decorated option size is validated with a higher bound.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.constraint.Max</code></p>
</li>
<li>
<p>Name: <code>maxItems</code></p>
</li>
<li>
<p>Parameter Type: <code>double</code></p>
</li>
<li>
<p>Supported Types:&#8201;&#8212;&#8201;<code>java.util.Collection</code></p>
</li>
<li>
<p>Sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "validation::maxItems":"12.34"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_minitems"><a class="anchor" href="#_minitems"></a>MinItems</h4>
<div class="paragraph">
<p>Ensure the decorated option size is validated with a lower bound.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.constraint.Min</code></p>
</li>
<li>
<p>Name: <code>minItems</code></p>
</li>
<li>
<p>Parameter Type: <code>double</code></p>
</li>
<li>
<p>Supported Types:&#8201;&#8212;&#8201;<code>java.util.Collection</code></p>
</li>
<li>
<p>Sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "validation::minItems":"12.34"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_uniqueitems"><a class="anchor" href="#_uniqueitems"></a>UniqueItems</h4>
<div class="paragraph">
<p>Ensure the elements of the collection must be distinct (kind of set).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.constraint.Uniques</code></p>
</li>
<li>
<p>Name: <code>uniqueItems</code></p>
</li>
<li>
<p>Parameter Type: <code>-</code></p>
</li>
<li>
<p>Supported Types:&#8201;&#8212;&#8201;<code>java.util.Collection</code></p>
</li>
<li>
<p>Sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "validation::uniqueItems":"true"
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When using the programmatic API, metadata is prefixed by <code>tcomp::</code>. This prefix is stripped in the web for convenience, and the table above uses the web keys.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Also note that these validations are executed before the runtime is started (when loading the component instance) and that the execution will fail if they don&#8217;t pass.
If it breaks your application, you can disable that validation on the JVM by setting the system property <code>talend.component.configuration.validation.skip</code> to <code>true</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_defining_datasets_and_datastores_2"><a class="anchor" href="#_defining_datasets_and_datastores_2"></a>Defining datasets and datastores</h3>
<div id="dataset-and-datastore" class="paragraph">
<p>Datasets and datastores are configuration types that define how and where to pull the data from. They are used at design time to create shared configurations that can be stored and used at runtime.</p>
</div>
<div class="paragraph">
<p>All connectors (input and output components) created using Talend Component Kit must reference a valid dataset. Each dataset must reference a datastore.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Datastore: The data you need to connect to the backend.</p>
</li>
<li>
<p>Dataset: A datastore coupled with the data you need to execute an action.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/datastore_and_dataset_validation.png" target="_blank" rel="noopener"><img src="_images/datastore_and_dataset_validation.png" alt="Dataset validation"></a>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Make sure that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a datastore is used in each dataset.</p>
</li>
<li>
<p>each dataset has a corresponding input component (mapper or emitter).</p>
</li>
<li>
<p>This input component must be able to work with only the dataset part filled by final users. Any other property implemented for that component must be optional.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These rules are enforced by the <code>validateDataSet</code> validation. If the conditions are not met, the component builds will fail.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_defining_a_datastore_2"><a class="anchor" href="#_defining_a_datastore_2"></a>Defining a datastore</h4>
<div class="paragraph">
<p>A datastore defines the information required to connect to a data source. For example, it can be made of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a URL</p>
</li>
<li>
<p>a username</p>
</li>
<li>
<p>a password.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can specify a datastore and its context of use (in which dataset, etc.) from the <a href="tutorial-generate-project-using-starter.html" class="xref page">Component Kit Starter</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Make sure to modelize the data your components are designed to handle before defining datasets and datastores in the Component Kit Starter.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once you generate and import the project into an IDE, you can find datastores under a specific <code>datastore</code> node.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/datastore_view_intellij.png" target="_blank" rel="noopener"><img src="_images/datastore_view_intellij.png" alt="Datastore view"></a>
</div>
</div>
<div class="paragraph">
<p>Example of datastore:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.mycomponent.components.datastore;

@DataStore("DatastoreA") <i class="conum" data-value="1"></i><b>(1)</b>
@GridLayout({ <i class="conum" data-value="2"></i><b>(2)</b>
    // The generated component layout will display one configuration entry per line.
    // Customize it as much as needed.
    @GridLayout.Row({ "apiurl" }),
    @GridLayout.Row({ "username" }),
    @GridLayout.Row({ "password" })
})
@Documentation("A Datastore made of an API URL, a username, and a password. The password is marked as Credential.") <i class="conum" data-value="3"></i><b>(3)</b>
public class DatastoreA implements Serializable {
    @Option
    @Documentation("")
    private String apiurl;

    @Option
    @Documentation("")
    private String username;

    @Option
    @Credential
    @Documentation("")
    private String password;

    public String getApiurl() {
        return apiurl;
    }

    public DatastoreA setApiurl(String apiurl) {
        this.apiurl = apiurl;
        return this;
    }

    public String getUsername() {
        return Username;
    }

    public DatastoreA setuUsername(String username) {
        this.username = username;
        return this;
    }

    public String getPassword() {
        return password;
    }

    public DatastoreA setPassword(String password) {
        this.password = password;
        return this;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Identifying the class as a datastore and naming it.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Defining the layout of the datastore configuration.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Defining each element of the configuration: a URL, a username, and a password. Note that the password is also marked as a credential.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_defining_a_dataset_2"><a class="anchor" href="#_defining_a_dataset_2"></a>Defining a dataset</h4>
<div class="paragraph">
<p>A dataset represents the inbound data. It is generally made of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A datastore that defines the connection information needed to access the data.</p>
</li>
<li>
<p>A query.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can specify a dataset and its context of use (in which input and output component it is used) from the <a href="tutorial-generate-project-using-starter.html" class="xref page">Component Kit Starter</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Make sure to modelize the data your components are designed to handle before defining datasets and datastores in the Component Kit Starter.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once you generate and import the project into an IDE, you can find datasets under a specific <code>dataset</code> node.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/dataset_view_intellij.png" target="_blank" rel="noopener"><img src="_images/dataset_view_intellij.png" alt="Dataset view"></a>
</div>
</div>
<div class="paragraph">
<p>Example of dataset referencing the datastore shown above:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.datastorevalidation.components.dataset;

@DataSet("DatasetA") <i class="conum" data-value="1"></i><b>(1)</b>
@GridLayout({
    // The generated component layout will display one configuration entry per line.
    // Customize it as much as needed.
    @GridLayout.Row({ "datastore" })
})
@Documentation("A Dataset configuration containing a simple datastore") <i class="conum" data-value="2"></i><b>(2)</b>
public class DatasetA implements Serializable {
    @Option
    @Documentation("Datastore")
    private DatastoreA datastore;

    public DatastoreA getDatastore() {
        return datastore;
    }

    public DatasetA setDatastore(DatastoreA datastore) {
        this.datastore = datastore;
        return this;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Identifying the class as a dataset and naming it.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Implementing the dataset and referencing DatastoreA as the datastore to use.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_internationalizing_datasets_and_datastores_2"><a class="anchor" href="#_internationalizing_datasets_and_datastores_2"></a>Internationalizing datasets and datastores</h4>
<div class="paragraph">
<p>The display name of each dataset and datastore must be referenced in the <code>message.properties</code> file of the family package.</p>
</div>
<div class="paragraph">
<p>The key for dataset and datastore display names follows a defined pattern: <code>${family}.${configurationType}.${name}._displayName</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ComponentFamily.dataset.DatasetA._displayName=Dataset A
ComponentFamily.datastore.DatastoreA._displayName=Datastore A</code></pre>
</div>
</div>
<div class="paragraph">
<p>These keys are automatically added for datasets and datastores defined from the Component Kit Starter.</p>
</div>
</div>
<div class="sect3">
<h4 id="_reusing_datasets_and_datastores_in_talend_studio_2"><a class="anchor" href="#_reusing_datasets_and_datastores_in_talend_studio_2"></a>Reusing datasets and datastores in Talend Studio</h4>
<div class="paragraph">
<p>When deploying a component or set of components that include datasets and datastores to Talend Studio, a new node is created under <strong>Metadata</strong>. This node has the name of the component family that was deployed.</p>
</div>
<div class="paragraph">
<p>It allows users to create reusable configurations for datastores and datasets.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/studio_create_dataset.png" target="_blank" rel="noopener"><img src="_images/studio_create_dataset.png" alt="Dataset in Studio"></a>
</div>
</div>
<div class="paragraph">
<p>With predefined datasets and datastores, users can then quickly fill the component configuration in their jobs. They can do so by selecting <strong>Repository</strong> as <strong>Property Type</strong> and by browsing to the predefined dataset or datastore.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/studio_select_predefined_dataset.png" target="_blank" rel="noopener"><img src="_images/studio_select_predefined_dataset.png" alt="Dataset in Component"></a>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_how_to_create_a_reusable_connection_in_studio_2"><a class="anchor" href="#_how_to_create_a_reusable_connection_in_studio_2"></a>How to create a reusable connection in Studio</h4>
<div class="paragraph">
<p>Studio will generate connection and close components auto for reusing connection function in input and output components, just need to do like this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Service
public class SomeService {

    @CreateConnection
    public Object createConn(@Option("configuration") SomeDataStore dataStore) throws ComponentException {
        Object connection = null;
        //get conn object by dataStore
        return conn;
    }

    @CloseConnection
    public CloseConnectionObject closeConn() {
        return new CloseConnectionObject() {

            public boolean close() throws ComponentException {
                Object connection = this.getConnection();
                //do close action
                return true;
            }

        };
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the runtime mapper and processor only need to use @Connection to get the connection like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Version(1)
@Icon(value = Icon.IconType.CUSTOM, custom = "SomeInput")
@PartitionMapper(name = "SomeInput")
@Documentation("the doc")
public class SomeInputMapper implements Serializable {

    @Connection
    SomeConnection conn;

}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_how_does_the_component_server_interact_with_datasets_and_datastores_2"><a class="anchor" href="#_how_does_the_component_server_interact_with_datasets_and_datastores_2"></a>How does the component server interact with datasets and datastores</h4>
<div class="paragraph">
<p>The component server scans all configuration types and returns a configuration type index. This index can be used for the integration into the targeted platforms (Studio, web applications, and so on).</p>
</div>
<div class="sect4">
<h5 id="_dataset_2"><a class="anchor" href="#_dataset_2"></a>Dataset</h5>
<div class="paragraph">
<p>Mark a model (complex object) as being a dataset.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: @org.talend.sdk.component.api.configuration.type.DataSet</p>
</li>
<li>
<p>Sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "tcomp::configurationtype::name":"test",
  "tcomp::configurationtype::type":"dataset"
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_datastore_2"><a class="anchor" href="#_datastore_2"></a>Datastore</h5>
<div class="paragraph">
<p>Mark a model (complex object) as being a datastore (connection to a backend).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: @org.talend.sdk.component.api.configuration.type.DataStore</p>
</li>
<li>
<p>Sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "tcomp::configurationtype::name":"test",
  "tcomp::configurationtype::type":"datastore"
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_datasetdiscovery_2"><a class="anchor" href="#_datasetdiscovery_2"></a>DatasetDiscovery</h5>
<div class="paragraph">
<p>Mark a model (complex object) as being a dataset discovery configuration.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: @org.talend.sdk.component.api.configuration.type.DatasetDiscovery</p>
</li>
<li>
<p>Sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "tcomp::configurationtype::name":"test",
  "tcomp::configurationtype::type":"datasetDiscovery"
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The component family associated with a configuration type (datastore/dataset) is always the one related to the component using that configuration.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The configuration type index is represented as a flat tree that contains all the configuration types, which themselves are represented as nodes and indexed by ID.</p>
</div>
<div class="paragraph">
<p>Every node can point to other nodes. This relation is represented as an array of edges that provides the child IDs.</p>
</div>
<div class="paragraph">
<p>As an illustration, a configuration type index for the example above can be defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{nodes: {
             "idForDstore": { datastore:"datastore data", edges:[id:"idForDset"] },
             "idForDset":   { dataset:"dataset data" }
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_defining_links_between_properties"><a class="anchor" href="#_defining_links_between_properties"></a>Defining links between properties</h3>
<div class="paragraph">
<p>If you need to define a binding between properties, you can use a set of annotations:</p>
</div>
<div class="sect3">
<h4 id="_activeif"><a class="anchor" href="#_activeif"></a>ActiveIf</h4>
<div class="paragraph">
<p>If the evaluation of the element at the location matches value then the element is considered active, otherwise it is deactivated.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.condition.ActiveIf</code></p>
</li>
<li>
<p>Type: <code>if</code></p>
</li>
<li>
<p>Sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "condition::if::evaluationStrategy":"DEFAULT",
  "condition::if::negate":"false",
  "condition::if::target":"test",
  "condition::if::value":"value1,value2"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_activeifs"><a class="anchor" href="#_activeifs"></a>ActiveIfs</h4>
<div class="paragraph">
<p>Allows to set multiple visibility conditions on the same property.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.condition.ActiveIfs</code></p>
</li>
<li>
<p>Type: <code>ifs</code></p>
</li>
<li>
<p>Sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "condition::if::evaluationStrategy::0":"DEFAULT",
  "condition::if::evaluationStrategy::1":"LENGTH",
  "condition::if::negate::0":"false",
  "condition::if::negate::1":"true",
  "condition::if::target::0":"sibling1",
  "condition::if::target::1":"../../other",
  "condition::if::value::0":"value1,value2",
  "condition::if::value::1":"SELECTED",
  "condition::ifs::operator":"AND"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>target</strong> is the element to evaluate.</p>
</li>
<li>
<p><strong>value</strong> is the value to compare against.</p>
</li>
<li>
<p><strong>strategy</strong> (optional) is the evaluation criteria. Possible values are:</p>
<div class="ulist">
<ul>
<li>
<p><code>CONTAINS</code>: Checks if a string or list of strings contains the defined <strong>value</strong>.</p>
</li>
<li>
<p><code>DEFAULT</code>: Compares against the raw <strong>value</strong>.</p>
</li>
<li>
<p><code>LENGTH</code>: For an array or string, evaluates the size of the <strong>value</strong> instead of the <strong>value</strong> itself.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>negate</strong> (optional) defines if the test must be positive (default, set to <code>false</code>) or negative (set to <code>true</code>).</p>
</li>
<li>
<p><strong>operator</strong> (optional) is the comparison operator used to combine several conditions, if applicable. Possible values are <code>AND</code> and <code>OR</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <strong>target</strong> element location is specified as a relative path to the current location, using Unix path characters.
The configuration class delimiter is <code>/</code>.<br>
The parent configuration class is specified by <code>..</code>.<br>
Thus, <code>../targetProperty</code> denotes a property, which is located in the parent configuration class and is named <code>targetProperty</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When using the programmatic API, metadata is prefixed with <code>tcomp::</code>. This prefix is stripped in the web for convenience, and the previous table uses the web keys.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more details, refer to the related <a href="apidocs.html" class="xref page">Javadocs</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_activeif_examples"><a class="anchor" href="#_activeif_examples"></a>ActiveIf examples</h4>
<div class="sect4">
<h5 id="_example_1"><a class="anchor" href="#_example_1"></a>Example 1</h5>
<div class="paragraph">
<p>A common use of the ActiveIf condition consists in testing if a target property has a value. To do that, it is possible to test if the length of the property value is different from 0:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>target: <code>foo</code> - the path to the property to evaluate.</p>
</li>
<li>
<p>strategy: <code>LENGTH</code> - the strategy consists here in testing the length of the property value.</p>
</li>
<li>
<p>value: <code>0</code> - the length of the property value is compared to <code>0</code>.</p>
</li>
<li>
<p>negate: <code>true</code> - setting <strong>negate</strong> to <code>true</code> means that the <strong>strategy</strong> of the <strong>target</strong> must be different from the <strong>value</strong> defined. In this case, the <code>LENGTH</code> of the value of the <code>foo</code> property must be different from <code>0</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">{
  "condition::if::target": "foo",
  "condition::if::value": "0",
  "condition::if::negate": "true",
  "condition::if::evaluationStrategy": "LENGTH",
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_2"><a class="anchor" href="#_example_2"></a>Example 2</h5>
<div class="paragraph">
<p>The following example shows how to implement visibility conditions on several fields based on several checkbox configurations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the first checkbox is selected, an additional input field is displayed.</p>
</li>
<li>
<p>if the second or the third checkbox is selected, an additional input field is displayed.</p>
</li>
<li>
<p>if both second and third checkboxes are selected, an additional input field is displayed.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@GridLayout({
    // the generated layout put one configuration entry per line,
    // customize it as much as needed
    @GridLayout.Row({ "checkbox1" }),
    @GridLayout.Row({ "checkbox2" }),
    @GridLayout.Row({ "checkbox3" }),
    @GridLayout.Row({ "configuration4" }),
    @GridLayout.Row({ "configuration5" }),
    @GridLayout.Row({ "configuration6" })
})
@Documentation("A sample configuration with different visibility condition cases")
public class ActiveifProcessorProcessorConfiguration implements Serializable {
    @Option
    @Documentation("")
    private boolean checkbox1;

    @Option
    @Documentation("")
    private boolean checkbox2;

    @Option
    @Documentation("")
    private boolean checkbox3;

    @Option
    @ActiveIf(target = "checkbox1", value = "true")
    @Documentation("Active if checkbox1 is selected")
    private String configuration4;

    @Option
    @ActiveIfs(operator = ActiveIfs.Operator.OR, value = {
            @ActiveIf(target = "checkbox2", value = "true"),
            @ActiveIf(target = "checkbox3", value = "true")
    })
    @Documentation("Active if checkbox2 or checkbox 3 are selected")
    private String configuration5;

    @Option
    @ActiveIfs(operator = ActiveIfs.Operator.AND, value = {
            @ActiveIf(target = "checkbox2", value = "true"),
            @ActiveIf(target = "checkbox3", value = "true")
    })
    @Documentation("Active if checkbox2 and checkbox 3 are selected")
    private String configuration6;
  }</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="documentation-ui-hints"><a class="anchor" href="#documentation-ui-hints"></a>Adding hints about the rendering</h3>
<div class="paragraph">
<p>In some cases, you may need to add metadata about the configuration to let the UI render that configuration properly.<br>
For example, a password value that must be hidden and not a simple clear input box. For these cases - if you want to change the UI rendering - you can use a particular set of annotations:</p>
</div>
<div class="sect3">
<h4 id="_defaultvalue"><a class="anchor" href="#_defaultvalue"></a>@DefaultValue</h4>
<div class="paragraph">
<p>Provide a default value the UI can use - only for primitive fields.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.ui.DefaultValue</code></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_snippets"><a class="anchor" href="#_snippets"></a>Snippets</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "ui::defaultvalue::value":"test"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_optionsorder"><a class="anchor" href="#_optionsorder"></a>@OptionsOrder</h4>
<div class="paragraph">
<p>Allows to sort a class properties.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.ui.OptionsOrder</code></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_snippets_2"><a class="anchor" href="#_snippets_2"></a>Snippets</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "ui::optionsorder::value":"value1,value2"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_autolayout"><a class="anchor" href="#_autolayout"></a>@AutoLayout</h4>
<div class="paragraph">
<p>Request the rendered to do what it thinks is best.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.ui.layout.AutoLayout</code></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_snippets_3"><a class="anchor" href="#_snippets_3"></a>Snippets</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "ui::autolayout":"true"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_gridlayout"><a class="anchor" href="#_gridlayout"></a>@GridLayout</h4>
<div class="paragraph">
<p>Advanced layout to place properties by row, this is exclusive with <code>@OptionsOrder</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
the logic to handle forms (gridlayout names) is to use the only layout if there is only one defined, else to check if there are <code>Main</code> and <code>Advanced</code> and if at least <code>Main</code> exists, use them, else use all available layouts.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.ui.layout.GridLayout</code></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_snippets_4"><a class="anchor" href="#_snippets_4"></a>Snippets</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "ui::gridlayout::value1::value":"first|second,third",
  "ui::gridlayout::value2::value":"first|second,third"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_gridlayouts"><a class="anchor" href="#_gridlayouts"></a>@GridLayouts</h4>
<div class="paragraph">
<p>Allow to configure multiple grid layouts on the same class, qualified with a classifier (name)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.ui.layout.GridLayouts</code></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_snippets_5"><a class="anchor" href="#_snippets_5"></a>Snippets</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "ui::gridlayout::Advanced::value":"another",
  "ui::gridlayout::Main::value":"first|second,third"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_horizontallayout"><a class="anchor" href="#_horizontallayout"></a>@HorizontalLayout</h4>
<div class="paragraph">
<p>Put on a configuration class it notifies the UI an horizontal layout is preferred.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.ui.layout.HorizontalLayout</code></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_snippets_6"><a class="anchor" href="#_snippets_6"></a>Snippets</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "ui::horizontallayout":"true"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_verticallayout"><a class="anchor" href="#_verticallayout"></a>@VerticalLayout</h4>
<div class="paragraph">
<p>Put on a configuration class it notifies the UI a vertical layout is preferred.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.ui.layout.VerticalLayout</code></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_snippets_7"><a class="anchor" href="#_snippets_7"></a>Snippets</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "ui::verticallayout":"true"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_code"><a class="anchor" href="#_code"></a>@Code</h4>
<div class="paragraph">
<p>Mark a field as being represented by some code widget (vs textarea for instance).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.ui.widget.Code</code></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_snippets_8"><a class="anchor" href="#_snippets_8"></a>Snippets</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "ui::code::value":"test"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_credential"><a class="anchor" href="#_credential"></a>@Credential</h4>
<div class="paragraph">
<p>Mark a field as being a credential. It is typically used to hide the value in the UI.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.ui.widget.Credential</code></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_snippets_9"><a class="anchor" href="#_snippets_9"></a>Snippets</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "ui::credential":"true"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_datetime"><a class="anchor" href="#_datetime"></a>@DateTime</h4>
<div class="paragraph">
<p>Mark a field as being a date. It supports and is <strong>implicit</strong> - which means you don&#8217;t need to put that annotation on the option - for <code>java.time.ZonedDateTime</code>, <code>java.time.LocalDate</code> and <code>java.time.LocalDateTime</code> and is unspecified for other types.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.ui.widget.DateTime</code></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_snippets_10"><a class="anchor" href="#_snippets_10"></a>Snippets</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "ui::datetime":"time"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "ui::datetime":"date"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "ui::datetime":"datetime"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "ui::datetime":"zoneddatetime"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_modulelist"><a class="anchor" href="#_modulelist"></a>@ModuleList</h4>
<div class="paragraph">
<p>Mark a string field as being represented by selected module list widget, only for studio</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.ui.widget.ModuleList</code></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_snippets_11"><a class="anchor" href="#_snippets_11"></a>Snippets</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "ui::modulelist":"true"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_structure"><a class="anchor" href="#_structure"></a>@Structure</h4>
<div class="paragraph">
<p>Mark a List&lt;String&gt; or List&lt;Object&gt; field as being represented as the component data selector.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.ui.widget.Structure</code></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_snippets_12"><a class="anchor" href="#_snippets_12"></a>Snippets</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "ui::structure::discoverSchema":"test",
  "ui::structure::type":"IN",
  "ui::structure::value":"test"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_textarea"><a class="anchor" href="#_textarea"></a>@TextArea</h4>
<div class="paragraph">
<p>Mark a field as being represented by a textarea(multiline text input).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API: <code>@org.talend.sdk.component.api.configuration.ui.widget.TextArea</code></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_snippets_13"><a class="anchor" href="#_snippets_13"></a>Snippets</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  "ui::textarea":"true"
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When using the programmatic API, metadata is prefixed with <code>tcomp::</code>. This prefix is stripped in the web for convenience, and the previous table uses the web keys.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can also check <a href="tutorial-configuration-sensitive-data.html" class="xref page">this example</a> about masking credentials.</p>
</div>
<div class="paragraph">
<p>Target support should cover <code>org.talend.core.model.process.EParameterFieldType</code> but you need to ensure that the web renderer is able to handle the same widgets.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation_samples"><a class="anchor" href="#_implementation_samples"></a>Implementation samples</h3>
<div class="paragraph">
<p>You can find sample working components for each of the configuration cases below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://repo.maven.apache.org/maven2/org/talend/sdk/component/documentation-sample/1.50.3/documentation-sample-1.50.3-activeif-component-distribution.zip">ActiveIf</a>: Add visibility conditions on some configurations.</p>
</li>
<li>
<p><a href="https://repo.maven.apache.org/maven2/org/talend/sdk/component/documentation-sample/1.50.3/documentation-sample-1.50.3-checkbox-component-distribution.zip">Checkbox</a>: Add checkboxes or toggles to your component.</p>
</li>
<li>
<p><a href="https://repo.maven.apache.org/maven2/org/talend/sdk/component/documentation-sample/1.50.3/documentation-sample-1.50.3-code-component-distribution.zip">Code</a>: Allow users to enter their own code.</p>
</li>
<li>
<p><a href="https://repo.maven.apache.org/maven2/org/talend/sdk/component/documentation-sample/1.50.3/documentation-sample-1.50.3-credentials-component-distribution.zip">Credential</a>: Mark a configuration as sensitive data to avoid displaying it as plain text.</p>
</li>
<li>
<p><a href="https://repo.maven.apache.org/maven2/org/talend/sdk/component/documentation-sample/1.50.3/documentation-sample-1.50.3-datastorevalidation-component-distribution.zip">Datastore</a>: Add a button allowing to check the connection to a datastore.</p>
</li>
<li>
<p><a href="https://repo.maven.apache.org/maven2/org/talend/sdk/component/documentation-sample/1.50.3/documentation-sample-1.50.3-dropdownlist-component-distribution.zip">Datalist</a>: Two ways of implementing a dropdown list with predefined choices.</p>
</li>
<li>
<p><a href="https://repo.maven.apache.org/maven2/org/talend/sdk/component/documentation-sample/1.50.3/documentation-sample-1.50.3-integer-component-distribution.zip">Integer</a>: Add numeric fields to your component configuration.</p>
</li>
<li>
<p><a href="https://repo.maven.apache.org/maven2/org/talend/sdk/component/documentation-sample/1.50.3/documentation-sample-1.50.3-minmaxvalidation-component-distribution.zip">Min/Max</a>: Specify a minimum or a maximum value for a numeric configuration.</p>
</li>
<li>
<p><a href="https://repo.maven.apache.org/maven2/org/talend/sdk/component/documentation-sample/1.50.3/documentation-sample-1.50.3-multiselect-component-distribution.zip">Multiselect</a>: Add a list and allow users to select multiple elements of that list.</p>
</li>
<li>
<p><a href="https://repo.maven.apache.org/maven2/org/talend/sdk/component/documentation-sample/1.50.3/documentation-sample-1.50.3-patternvalidation-component-distribution.zip">Pattern</a>: Enforce rules based on a specific a pattern to prevent users from entering invalid values.</p>
</li>
<li>
<p><a href="https://repo.maven.apache.org/maven2/org/talend/sdk/component/documentation-sample/1.50.3/documentation-sample-1.50.3-requiredvalidation-component-distribution.zip">Required</a>: Make a configuration mandatory.</p>
</li>
<li>
<p><a href="https://repo.maven.apache.org/maven2/org/talend/sdk/component/documentation-sample/1.50.3/documentation-sample-1.50.3-suggestions-component-distribution.zip">Suggestions</a>: Suggest possible values in a field based on what the users are entering.</p>
</li>
<li>
<p><a href="https://repo.maven.apache.org/maven2/org/talend/sdk/component/documentation-sample/1.50.3/documentation-sample-1.50.3-table-component-distribution.zip">Table</a>: Add a table to your component configuration.</p>
</li>
<li>
<p><a href="https://repo.maven.apache.org/maven2/org/talend/sdk/component/documentation-sample/1.50.3/documentation-sample-1.50.3-textarea-component-distribution.zip">Textarea</a>: Add a text area for configurations expecting long texts or values.</p>
</li>
<li>
<p><a href="https://repo.maven.apache.org/maven2/org/talend/sdk/component/documentation-sample/1.50.3/documentation-sample-1.50.3-textinput-component-distribution.zip">Input</a>: Add a simple text input field to the component configuration</p>
</li>
<li>
<p><a href="https://repo.maven.apache.org/maven2/org/talend/sdk/component/documentation-sample/1.50.3/documentation-sample-1.50.3-updatable-component-distribution.zip">Update</a>: Provide a button allowing to fill a part of the component configuration based on a service.</p>
</li>
<li>
<p><a href="https://repo.maven.apache.org/maven2/org/talend/sdk/component/documentation-sample/1.50.3/documentation-sample-1.50.3-urlvalidation-component-distribution.zip">Validation</a>: Specify constraints to make sure that a URL is well formed.</p>
</li>
</ul>
</div>
</div>
<div class="sect2 relatedlinks">
<h3 id="_related_articles_6"><a class="anchor" href="#_related_articles_6"></a>Related articles</h3>
<div class="ulist">
<ul>
<li>
<p><a href="methodology-creating-components.html" class="xref page">Methodology for creating components</a></p>
</li>
<li>
<p><a href="tutorial-generate-project-using-starter.html" class="xref page">Generating a project using the starter</a></p>
</li>
<li>
<p><a href="component-define-input.html" class="xref page">Defining an input component</a></p>
</li>
<li>
<p><a href="component-define-processor-output.html" class="xref page">Defining a processor or output component</a></p>
</li>
<li>
<p><a href="component-define-standalone.html" class="xref page">Defining a standalone component</a></p>
</li>
<li>
<p><a href="component-registering.html" class="xref page">Registering a component</a></p>
</li>
<li>
<p><a href="component-internationalization.html" class="xref page">Internationalizing a component</a></p>
</li>
<li>
<p><a href="component-loading.html" class="xref page">Loading a component</a></p>
</li>
<li>
<p><a href="tutorial-configuration-sensitive-data.html" class="xref page">Masking sensitive data</a></p>
</li>
<li>
<p><a href="best-practices.html" class="xref page">Best practices</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_component_execution_logic"><a class="anchor" href="#_component_execution_logic"></a>Component execution logic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each type of component has its own execution logic. The same basic logic is applied to all components of the same type, and is then extended to implement each component specificities.
The project generated from the starter already contains the basic logic for each component.</p>
</div>
<div class="paragraph">
<p>Talend Component Kit framework relies on several primitive components.</p>
</div>
<div class="paragraph">
<p>All components can use <code>@PostConstruct</code> and <code>@PreDestroy</code> annotations to initialize or release some underlying resource at the beginning and the end of a processing.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
In distributed environments, class constructor are called on cluster manager nodes. Methods annotated with <code>@PostConstruct</code> and <code>@PreDestroy</code> are called on worker nodes. Thus, partition plan computation and pipeline tasks are performed on different nodes.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="image"><a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/deployment-diagram.png" target="_blank" rel="noopener"><img src="_images/deployment-diagram.png" alt="Deployment diagram"></a></span></p>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The created task is a JAR file containing class information, which describes the pipeline (flow) that should be processed in cluster.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>During the partition plan computation step, the pipeline is analyzed and split into stages. The cluster manager node instantiates mappers/processors, gets estimated data size using mappers, and splits created mappers according to the estimated data size.<br>
All instances are then serialized and sent to the worker node.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Serialized instances are received and deserialized. Methods annotated with <code>@PostConstruct</code> are called. After that, pipeline execution starts. The <code>@BeforeGroup</code> annotated method of the processor is called before processing the first element in chunk.<br>
After processing the number of records estimated as chunk size, the <code>@AfterGroup</code> annotated method of the processor is called. Chunk size is calculated depending on the environment the pipeline is processed by. Once the pipeline is processed, methods annotated with <code>@PreDestroy</code> are called.</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
All the methods managed by the framework must be public. Private methods are ignored.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="image"><a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/driver-processing-workflow.png" target="_blank" rel="noopener"><img src="_images/driver-processing-workflow.png" alt="Driver processing workflow"></a></span></p>
</div>
<div class="paragraph">
<p><span class="image"><a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/worker-processing-workflow.png" target="_blank" rel="noopener"><img src="_images/worker-processing-workflow.png" alt="Worker processing workflow"></a></span></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The framework is designed to be as declarative as possible but also to stay extensible by not using fixed interfaces or method signatures. This allows to incrementally add new features of the underlying implementations.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_internationalizing_components"><a class="anchor" href="#_internationalizing_components"></a>Internationalizing components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In common cases, you can store messages using a properties file in your component module to use internationalization.</p>
</div>
<div class="paragraph">
<p>This properties file must be stored in the same package as the related components and named <code>Messages</code>. For example, <code>org.talend.demo.MyComponent</code> uses <code>org.talend.demo.Messages[locale].properties</code>.</p>
</div>
<div class="paragraph">
<p>This file already exists when you import a project generated from the starter.</p>
</div>
<div class="sect2">
<h3 id="_default_components_keys"><a class="anchor" href="#_default_components_keys"></a>Default components keys</h3>
<div class="paragraph">
<p>Out of the box components are internationalized using the same location logic for the resource bundle. The supported keys are:</p>
</div>
<table class="tableblock frame-all grid-all stretch table-striped table-hover table-ordered">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name Pattern</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${family}._displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the family</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${family}.${category}._category</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the category <code>${category}</code> in the family <code>${family}</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${family}.${configurationType}.${name}._displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of a configuration type (dataStore or dataSet). Important: this key is read from the family package (not the class package), to unify the localization of the metadata.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${family}.actions.${actionType}.${actionName}._displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of an action of the family. Specifying it is optional and will default on the action name if not set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${family}.${component_name}._displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the component (used by the GUIs)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${property_path}._displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the option.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${property_path}._documentation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equivalent to <code>@Documentation("&#8230;&#8203;")</code> but supporting internationalization (see Maven/Gradle documentation goal/task).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${property_path}._placeholder</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Placeholder of the option.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${simple_class_name}.${property_name}._displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the option using its class name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${simple_class_name}.${property_name}._documentation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <code>${property_path}._documentation</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${simple_class_name}.${property_name}._placeholder</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <code>${property_path}._placeholder</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${enum_simple_class_name}.${enum_name}._displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the <code>enum_name</code> value of the <code>enum_simple_class_name</code> enumeration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${property_path or simple_class_name}._gridlayout.${layout_name}._displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of tab corresponding to the layout (tab). Note that this requires the server <code>talend.component.server.gridlayout.translation.support</code> option to be set to <code>true</code> and it is not yet supported by the Studio.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example of configuration for a component named <code>list</code> and belonging to the <code>memory</code> family (<code>@Emitter(family = "memory", name = "list")</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">memory.list._displayName = Memory List</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_internationalizing_a_configuration_class"><a class="anchor" href="#_internationalizing_a_configuration_class"></a>Internationalizing a configuration class</h3>
<div class="paragraph">
<p>Configuration classes can be translated using the simple class name in the messages properties file.
This is useful in case of common configurations shared by multiple components.</p>
</div>
<div class="paragraph">
<p>For example, if you have a configuration class as follows :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyConfig {

    @Option
    private String host;

    @Option
    private int port;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can give it a translatable display name by adding <code>${simple_class_name}.${property_name}._displayName</code> to <code>Messages.properties</code> under the same package as the configuration class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">MyConfig.host._displayName = Server Host Name
MyConfig.host._placeholder = Enter Server Host Name...

MyConfig.port._displayName = Server Port
MyConfig.port._placeholder = Enter Server Port...</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you have a display name using the property path, it overrides the display name defined using the simple class name. This rule also applies to placeholders.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2 relatedlinks">
<h3 id="_related_articles_7"><a class="anchor" href="#_related_articles_7"></a>Related articles</h3>
<div class="ulist">
<ul>
<li>
<p><a href="tutorial-generate-project-using-starter.html" class="xref page">Generating a project using the starter</a></p>
</li>
<li>
<p><a href="component-configuration.html" class="xref page">Defining component layout and configuration</a></p>
</li>
<li>
<p><a href="tutorial-configuration-sensitive-data.html" class="xref page">Masking sensitive data</a></p>
</li>
<li>
<p><a href="best-practices.html" class="xref page">Best practices</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_managing_component_versions_and_migration"><a class="anchor" href="#_managing_component_versions_and_migration"></a>Managing component versions and migration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If some changes impact the configuration, they can be managed through a migration handler at the <strong>component</strong> level (enabling trans-model migration support).</p>
</div>
<div class="paragraph">
<p>The <code>@Version</code> annotation supports a <code>migrationHandler</code> method which migrates the incoming configuration to the current model.</p>
</div>
<div class="paragraph">
<p>For example, if the <code>filepath</code> configuration entry from v1 changed to <code>location</code> in v2, you can remap the value in your <code>MigrationHandler</code> implementation.</p>
</div>
<div class="paragraph">
<p>A best practice is to split migrations into services that you can inject in the migration handler (through constructor) rather than managing all migrations directly in the handler. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// full component code structure skipped for brievity, kept only migration part
@Version(value = 3, migrationHandler = MyComponent.Migrations.class)
public class MyComponent {
    // the component code...


    private interface VersionConfigurationHandler {
        Map&lt;String, String&gt; migrate(Map&lt;String, String&gt; incomingData);
    }

    public static class Migrations {
        private final List&lt;VersionConfigurationHandler&gt; handlers;

        // VersionConfigurationHandler implementations are decorated with @Service
        public Migrations(final List&lt;VersionConfigurationHandler&gt; migrations) {
            this.handlers = migrations;
            this.handlers.sort(/*some custom logic*/);
        }

        @Override
        public Map&lt;String, String&gt; migrate(int incomingVersion, Map&lt;String, String&gt; incomingData) {
            Map&lt;String, String&gt; out = incomingData;
            for (MigrationHandler handler : handlers) {
                out = handler.migrate(out);
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>What is important to notice in this snippet is the fact that you can organize your migrations the way that best fits your component.</p>
</div>
<div class="paragraph">
<p>If you need to apply migrations in a specific order, make sure that they are sorted.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Consider this API as a migration callback rather than a migration API.<br>
Adjust the migration code structure you need behind the <code>MigrationHandler</code>, based on your component requirements, using service injection.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_difference_between_migrating_a_component_configuration_and_a_nested_configuration"><a class="anchor" href="#_difference_between_migrating_a_component_configuration_and_a_nested_configuration"></a>Difference between migrating a component configuration and a nested configuration</h3>
<div class="paragraph">
<p>A nested configuration always migrates itself with any root prefix, whereas a component configuration always roots the full configuration.<br>
For example, if your model is the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Version
// ...
public class MyComponent implements Serializable {
  public MyComponent(@Option("configuration") final MyConfig config) {
    // ...
  }

  // ...
}

@DataStore
public class MyConfig implements Serializable {
  @Option
  private MyDataStore datastore;
}

@Version
@DataStore
public class MyDataStore implements Serializable {
  @Option
  private String url;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the component will see the path <code>configuration.datastore.url</code> for the datastore url whereas the datastore
will see the path <code>url</code> for the same property. You can see it as configuration types - <code>@DataStore</code>, <code>@DataSet</code> - being
configured with an empty root path.</p>
</div>
</div>
</div>
</div>
<div class="sect1 relatedlinks">
<h2 id="_masking_sensitive_data_in_your_configuration"><a class="anchor" href="#_masking_sensitive_data_in_your_configuration"></a>Masking sensitive data in your configuration</h2>
<div class="sectionbody">
<div id="tutorial-configuration-sensitive-data" class="paragraph">
<p>This tutorial shows how to correctly mask the sensitive data of a component configuration.</p>
</div>
<div class="paragraph">
<p>It is very common to define credentials when configuring a component. Most common cases can include <strong>passwords</strong>, <strong>secrets</strong>, <strong>keys</strong> (it is also common to show them in plain text in a textarea), and <strong>tokens</strong>.</p>
</div>
<div class="paragraph">
<p>For example, this REST client configuration specifies that a username, a password and a token are needed to connect to the REST API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Data // or getters/setters if you don't use lombok
@GridLayout({
        @GridLayout.Row({ "username", "password" }),
        @GridLayout.Row("token")
})
public class RestApiConfiguration implements Serializable {

    @Option
    private String username;

    @Option
    private String password;

    @Option
    private String token;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This configuration defines that these credentials are three simple <code>String</code>, represented as plain inputs, which causes severe security concerns:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The password and token are clearly readable in all Talend user interfaces (Studio or Web),</p>
</li>
<li>
<p>The password and token are potentially stored in clear.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To avoid this behavior, you need to mark sensitive data as <code>@Credential</code>.</p>
</div>
<div class="sect2">
<h3 id="_marking_sensitive_data"><a class="anchor" href="#_marking_sensitive_data"></a>Marking sensitive data</h3>
<div class="paragraph">
<p>Talend Component Kit provides you with the <code>@Credential</code> marker, that you can use
on any <code>@Option</code>. This marker has two effects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It Replaces the default input widget by a password oriented widget</p>
</li>
<li>
<p>It Requests the Studio or the Talend Cloud products to store the data as sensitive data (as encrypted values).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In order to ensure that the <code>password</code> and <code>token</code> are never stored in clear or shown in the code,
add the <code>@Credential</code> marker to the sensitive data. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Data // or getters/setters if you don't use lombok
@GridLayout({
        @GridLayout.Row({ "username", "password" }),
        @GridLayout.Row("token")
})
public class RestApiConfiguration implements Serializable {

    @Option
    private String username;

    @Option
    @Credential
    private String password;

    @Option
    @Credential
    private String token;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your password and token (or any other sensitive data that you need to mask) are not accessible by error anymore.</p>
</div>
</div>
<div class="sect2 relatedlinks">
<h3 id="_related_articles_8"><a class="anchor" href="#_related_articles_8"></a>Related articles</h3>
<div class="ulist">
<ul>
<li>
<p><a href="tutorial-generate-project-using-starter.html" class="xref page">Generating a project using the starter</a></p>
</li>
<li>
<p><a href="component-define-input.html" class="xref page">Defining an input component</a></p>
</li>
<li>
<p><a href="component-define-processor-output.html" class="xref page">Defining a processor or output component</a></p>
</li>
<li>
<p><a href="component-define-standalone.html" class="xref page">Defining a standalone component</a></p>
</li>
<li>
<p><a href="component-configuration.html" class="xref page">Configuring a component</a></p>
</li>
<li>
<p><a href="component-registering.html" class="xref page">Registering a component</a></p>
</li>
<li>
<p><a href="component-internationalization.html" class="xref page">Internationalizing a component</a></p>
</li>
<li>
<p><a href="component-loading.html" class="xref page">Loading a component</a></p>
</li>
<li>
<p><a href="best-practices.html" class="xref page">Best practices</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementing_batch_processing_2"><a class="anchor" href="#_implementing_batch_processing_2"></a>Implementing batch processing</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_what_is_batch_processing_2"><a class="anchor" href="#_what_is_batch_processing_2"></a>What is batch processing</h3>
<div class="paragraph">
<p>Batch processing refers to the way execution environments process batches of data handled by a component using a grouping mechanism.</p>
</div>
<div class="paragraph">
<p>By default, the execution environment of a component automatically decides how to process groups of records and estimates an optimal group size depending on the system capacity. With this default behavior, the size of each group could sometimes be optimized for the system to handle the load more effectively or to match business requirements.</p>
</div>
<div class="paragraph">
<p>For example, real-time or near real-time processing needs often imply processing smaller batches of data, but more often. On the other hand, a one-time processing without business contraints is more effectively handled with a batch size based on the system capacity.</p>
</div>
<div class="paragraph">
<p>Final users of a component developed with the Talend Component Kit that integrates the batch processing logic described in this document can override this automatic size. To do that, a <code>maxBatchSize</code> option is available in the component settings and allows to set the maximum size of each group of data to process.</p>
</div>
<div class="paragraph">
<p>A component processes batch data as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Case 1 - No <code>maxBatchSize</code> is specified in the component configuration. The execution environment estimates a group size of 4. Records are processed by groups of 4.</p>
</li>
<li>
<p>Case 2 - The runtime estimates a group size of 4 but a <code>maxBatchSize</code> of 3 is specified in the component configuration. The system adapts the group size to 3. Records are processed by groups of 3.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title"><strong>Processing schema (values are examples):</strong></div>
<p><span class="image"><a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/batch-processing-maxbatchsize.png" target="_blank" rel="noopener"><img src="_images/batch-processing-maxbatchsize.png" alt="Batch processing"></a></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_batch_processing_implementation_logic_2"><a class="anchor" href="#_batch_processing_implementation_logic_2"></a>Batch processing implementation logic</h3>
<div class="paragraph">
<p>Batch processing relies on the sequence of three methods: <code>@BeforeGroup</code>, <code>@ElementListener</code>, <code>@AfterGroup</code>, that you can customize to your needs as a component Developer.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The group size automatic estimation logic is automatically implemented when a component is deployed to a Talend application.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Each group is processed as follows until there is no record left:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <code>@BeforeGroup</code> method resets a record buffer at the beginning of each group.</p>
</li>
<li>
<p>The records of the group are assessed one by one and placed in the buffer as follows: The <code>@ElementListener</code> method tests if the buffer size is greater or equal to the defined <code>maxBatchSize</code>. If it is, the records are processed. If not, then the current record is buffered.</p>
</li>
<li>
<p>The previous step happens for all records of the group. Then the <code>@AfterGroup</code> method tests if the buffer is empty.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title"><strong>Group execution detail (values are examples):</strong></div>
<p><span class="image"><a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/batch-processing-group.png" target="_blank" rel="noopener"><img src="_images/batch-processing-group.png" alt="Group batch processing"></a></span></p>
</div>
<div class="paragraph">
<p>You can define the following logic in the processor configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import java.io.Serializable;
import java.util.ArrayList;
import java.util.Collection;

import javax.json.JsonObject;

import org.talend.sdk.component.api.processor.AfterGroup;
import org.talend.sdk.component.api.processor.BeforeGroup;
import org.talend.sdk.component.api.processor.ElementListener;
import org.talend.sdk.component.api.processor.Processor;

@Processor(name = "BulkOutputDemo")
public class BulkProcessor implements Serializable {
    private Collection&lt;JsonObject&gt; buffer;

    @BeforeGroup
    public void begin() {
        buffer = new ArrayList&lt;&gt;();
    }

    @ElementListener
    public void bufferize(final JsonObject object) {
        buffer.add(object);
    }

    @AfterGroup
    public void commit() {
        // saves buffered records at once (bulk)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the condensed syntax for this kind of processor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Processor(name = "BulkOutputDemo")
public class BulkProcessor implements Serializable {

    @AfterGroup
    public void commit(final Collection&lt;Record&gt; records) {
        // saves records
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When writing tests for components, you can force the <code>maxBatchSize</code> parameter value by setting it with the following syntax: <code>&lt;configuration prefix&gt;.$maxBatchSize=10</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can learn more about processors in <a href="component-define-processor-output.html" class="xref page">this document</a>.</p>
</div>
</div>
<div class="sect2 relatedlinks">
<h3 id="_related_articles_9"><a class="anchor" href="#_related_articles_9"></a>Related articles</h3>
<div class="ulist">
<ul>
<li>
<p><a href="component-define-processor-output.html" class="xref page">Defining a processor/output logic</a></p>
</li>
<li>
<p><a href="component-execution.html" class="xref page">General component execution logic</a></p>
</li>
<li>
<p><a href="concept-processor-and-batch-processing.html" class="xref page">Implementing bulk processing</a></p>
</li>
<li>
<p><a href="best-practices.html" class="xref page">Best practices</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementing_streaming_on_a_component"><a class="anchor" href="#_implementing_streaming_on_a_component"></a>Implementing streaming on a component</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, input components are designed to receive a one-time batch of data to process. By enabling the streaming mode, you can instead set your component to process a continuous incoming flow of data.</p>
</div>
<div class="paragraph">
<p>When streaming is enabled on an input component, the component tries to pull data from its producer. When no data is pulled, it waits for a defined period of time before trying to pull data again, and so on. This period of time between tries is defined by a strategy.</p>
</div>
<div class="paragraph">
<p>This document explains how to configure this strategy and the cases where it can fit your needs.</p>
</div>
<div class="sect2">
<h3 id="_choosing_between_batch_and_streaming"><a class="anchor" href="#_choosing_between_batch_and_streaming"></a>Choosing between batch and streaming</h3>
<div class="paragraph">
<p>Before enabling streaming on your component, make sure that it fits the scope and requirements of your project and that regular batch processing cannot be used instead.</p>
</div>
<div class="paragraph">
<p>Streaming is designed to help you dealing with real-time or near real-time data processing cases, and should be used only for such cases.
Enabling streaming will impact the performance when processing batches of data.</p>
</div>
</div>
<div class="sect2">
<h3 id="_enabling_streaming_from_the_component_kit_starter"><a class="anchor" href="#_enabling_streaming_from_the_component_kit_starter"></a>Enabling streaming from the Component Kit starter</h3>
<div class="paragraph">
<p>You can enable streaming right from the design phase of the project by enabling the <strong>Stream</strong> toggle in the basic configuration of your future component in the Component Kit Starter.</p>
</div>
<div class="paragraph">
<p>Doing so adds a default streaming-ready configuration to your component when generating the project.<br>
This default configuration implements a constant pause duration of 500 ms between retries, with no limit of retries.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/starter/starter_enabling_streaming.png" target="_blank" rel="noopener"><img src="_images/starter/starter_enabling_streaming.png" alt="Stream Toggle"></a>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_streaming_from_the_project"><a class="anchor" href="#_configuring_streaming_from_the_project"></a>Configuring streaming from the project</h3>
<div class="paragraph">
<p>If streaming was not enabled at all during the project generation or if you need to implement a more specific configuration, you can change the default settings according to your needs:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the <code>infinite=true</code> parameter to your component class.</p>
</li>
<li>
<p>Define the number of retries allowed in the component family <a href="services-built-in.html#_localconfiguration" class="xref page">LocalConfiguration</a>, using the <code>talend.input.streaming.retry.maxRetries</code> parameter. It is set by default to <code>Integer.MAX_VALUE</code>.</p>
</li>
<li>
<p>Define the pausing strategy between retries in the component family <code>LocalConfiguration</code>, using the <code>talend.input.streaming.retry.strategy</code> parameter. Possible values are:</p>
<div class="ulist">
<ul>
<li>
<p><code>constant</code> (default). It sets a constant pause duration between retries.</p>
</li>
<li>
<p><code>exponential</code>. It sets an exponential backoff pause duration.<br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See the tables below for more details about each strategy.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_constant_strategy"><a class="anchor" href="#_constant_strategy"></a>Constant strategy</h4>
<table class="tableblock frame-all grid-all stretch table-striped table-hover table-ordered">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.input.streaming.retry.constant.timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pause duration for the <code>constant</code> strategy, in ms.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>500</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_exponential_strategy"><a class="anchor" href="#_exponential_strategy"></a>Exponential strategy</h4>
<table class="tableblock frame-all grid-all stretch table-striped table-hover table-ordered">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.input.streaming.retry.exponential.exponent</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exponent of the exponential calculation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1.5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.input.streaming.retry.exponential.randomizationFactor</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Randomization factor used in the calculation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.input.streaming.retry.exponential.maxDuration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum pausing duration between two retries.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5*60*1000</code> (5 minutes)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.input.streaming.retry.exponential.initialBackOff</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial backoff value.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1000</code> (1 second)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The values of these parameters are then used in the following calculations to determine the exact pausing duration between two retries.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For more clarity in the formulas below, parameter names have been replaced with variables.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>First, the current interval duration is calculated:</p>
</div>
<div class="paragraph">
<p>\$A = min(B xx E^I, F)\$</p>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A: currentIntervalMillis</p>
</li>
<li>
<p>B: initialBackOff</p>
</li>
<li>
<p>E: exponent</p>
</li>
<li>
<p>I: current number of retries</p>
</li>
<li>
<p>F: maxDuration</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then, from the current interval duration, the next interval duration is calculated:</p>
</div>
<div class="paragraph">
<p>\$D = min(F, A + ((R xx 2-1) xx C xx A))\$</p>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>D: nextBackoffMillis</p>
</li>
<li>
<p>F: maxDuration</p>
</li>
<li>
<p>A: currentIntervalMillis</p>
</li>
<li>
<p>R: random</p>
</li>
<li>
<p>C: randomizationFactor</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_components_with_maven"><a class="anchor" href="#_building_components_with_maven"></a>Building components with Maven</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To develop new components, Talend Component Kit requires a build tool in which you will import the component project generated from the starter.</p>
</div>
<div class="paragraph">
<p>You will then be able to install and deploy it to Talend applications.
A Talend Component Kit plugin is available for each of the supported build tools.</p>
</div>
<div class="paragraph">
<p><strong>talend-component-maven-plugin</strong> helps you write components that match best practices and generate transparently metadata used by Talend Studio.</p>
</div>
<div class="paragraph">
<p>You can use it as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.talend.sdk.component&lt;/groupId&gt;
  &lt;artifactId&gt;talend-component-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${component.version}&lt;/version&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This plugin is also an extension so you can declare it in your <code>build/extensions</code> block as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;extension&gt;
  &lt;groupId&gt;org.talend.sdk.component&lt;/groupId&gt;
  &lt;artifactId&gt;talend-component-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${component.version}&lt;/version&gt;
&lt;/extension&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Used as an extension, the goals detailed in this document will be set up.</p>
</div>
<div class="sect2">
<h3 id="_maven_lifecycle"><a class="anchor" href="#_maven_lifecycle"></a>Maven lifecycle</h3>
<div class="paragraph">
<p>The Talend Component Kit plugin integrates some specific goals within Maven build lifecycle.
For example, to compile the project and prepare for deploying your component, run <code>mvn clean install</code>. Using this command, the following goals are executed:</p>
</div>
<div class="paragraph">
<p><span class="image"><a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/mvn_clean_install.png" target="_blank" rel="noopener"><img src="_images/mvn_clean_install.png" alt="Maven clean install"></a></span></p>
</div>
<div class="paragraph">
<p>The build is split into several phases. The different goals are executed in the order shown above. Talend Component Kit uses default goals from the Maven build lifecycle and adds additional goals to the building and packaging phases.</p>
</div>
<div class="paragraph">
<p>Goals added to the build by Talend Component Kit are detailed below.
The default lifecycle is detailed in <a href="https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html">Maven documentation</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_talend_component_kit_maven_goals"><a class="anchor" href="#_talend_component_kit_maven_goals"></a>Talend Component Kit Maven goals</h3>
<div class="paragraph">
<p>The Talend Component Kit plugin for Maven integrates several specific goals into Maven build lifecycle.</p>
</div>
<div class="paragraph">
<p>To run specific goals individually, run the following command from the root of the project, by adapting it with each goal name, parameters and values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ mvn talend-component:&lt;name_of_the_goal&gt;[:&lt;execution id&gt;] -D&lt;param_user_property&gt;=&lt;param_value&gt;</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_dependencies"><a class="anchor" href="#_dependencies"></a>Dependencies</h4>
<div class="paragraph">
<p>The first goal is a shortcut for the <strong>maven-dependency-plugin</strong>. It creates the <code>TALEND-INF/dependencies.txt</code> file with the <code>compile</code> and <code>runtime</code> dependencies, allowing the component to use it at runtime:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.talend.sdk.component&lt;/groupId&gt;
  &lt;artifactId&gt;talend-component-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${component.version}&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;talend-dependencies&lt;/id&gt;
      &lt;goals&gt;
        &lt;goal&gt;dependencies&lt;/goal&gt;
      &lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_scan"><a class="anchor" href="#_scan"></a>Scan</h4>
<div class="paragraph">
<p>The <code>scan-descriptor</code> goal scans the current module and optionally other configured folders to precompute the list of interesting classes for the framework (components, services). It allows to save some bootstrap time when launching a job, which can be useful in some execution cases:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.talend.sdk.component&lt;/groupId&gt;
  &lt;artifactId&gt;talend-component-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${component.version}&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;talend-scan-descriptor&lt;/id&gt;
      &lt;goals&gt;
        &lt;goal&gt;scan-descriptor&lt;/goal&gt;
      &lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configuration - excluding parameters used by default only:</p>
</div>
<table class="tableblock frame-all grid-all stretch table-striped table-hover table-ordered">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">User property</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">output</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where to dump the scan result. Note: It is not supported to change that value in the runtime.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.scan.output</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${project.build.outputDirectory}/TALEND-INF/scanning.properties</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scannedDirectories</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit list of directories to scan.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.scan.scannedDirectories</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If not set, defaults to <code>${project.build.outputDirectory}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">scannedDependencies</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit list of dependencies to scan - set them in the <code>groupId:artifactId</code> format. The list is appended to the file to scan.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.scan.scannedDependencies</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_svg2png"><a class="anchor" href="#_svg2png"></a>SVG2PNG</h4>
<div class="paragraph">
<p>The <code>svg2png</code> goal scans a directory - default to <code>target/classes/icons</code> - to find <code>.svg</code> files and copy them in a PNG version size at 32x32px and named with the suffix <code>_icon32.png</code> to enable the studio to read it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.talend.sdk.component&lt;/groupId&gt;
  &lt;artifactId&gt;talend-component-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${component.version}&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;talend-svg2png&lt;/id&gt;
      &lt;goals&gt;
        &lt;goal&gt;svg2png&lt;/goal&gt;
      &lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configuration:</p>
</div>
<table class="tableblock frame-all grid-all stretch table-striped table-hover table-ordered">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">User property</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">icons</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where to scan for the SVG icons to convert in PNG.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">talend.icons.source</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${project.build.outputDirectory}/icons</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">workarounds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By default the shape of the icon will be enforce in the RGB channels (in white) using the alpha as reference. This is useful for black/white images using alpha to shape the picture because Eclipse - Talend Studio - caches icons using RGB but not alpha channel, pictures not using alpha channel to draw their shape should disable that workaround.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">talend.icons.workaround</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
if you use that plugin, ensure to set it before the validate mojo otherwise validation can miss some png files.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_validating_the_component_programming_model"><a class="anchor" href="#_validating_the_component_programming_model"></a>Validating the component programming model</h4>
<div class="paragraph">
<p>This goal helps you validate the common programming model of the component. To activate it, you can use following execution definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.talend.sdk.component&lt;/groupId&gt;
  &lt;artifactId&gt;talend-component-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${component.version}&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;talend-component-validate&lt;/id&gt;
      &lt;goals&gt;
        &lt;goal&gt;validate&lt;/goal&gt;
      &lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is bound to the <code>process-classes</code> phase by default. When executed, it performs several validations that can be disabled by setting the corresponding flags to <code>false</code> in the <code>&lt;configuration&gt;</code> block of the execution:</p>
</div>
<table class="tableblock frame-all grid-all stretch table-striped table-hover table-ordered">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">User property</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">validateInternationalization</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validates that resource bundles are presents and contain commonly used keys (for example, <code>_displayName</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.validation.internationalization</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">validateModel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures that components pass validations of the <code>ComponentManager</code> and Talend Component runtime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.validation.model</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">validateSerializable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures that components are <code>Serializable</code>. This is a sanity check, the component is not actually serialized here. If you have a doubt, make sure to test it. It also checks that any <code>@Internationalized</code> class is valid and has its keys.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.validation.serializable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">validateMetadata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures that components have an <code>@Icon</code> and a <code>@Version</code> defined.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.validation.metadata</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">validateDataStore</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures that any <code>@DataStore</code> defines a <code>@HealthCheck</code> and has a unique name.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.validation.datastore</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">validateDataSet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures that any <code>@DataSet</code> has a unique name. Also ensures that there is a source instantiable just filling the dataset properties (all others not being required). Finally, the validation checks that each input or output component uses a dataset and that this dataset has a datastore.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.validation.dataset</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">validateComponent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures that the native programming model is respected. You can disable it when using another programming model like Beam.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.validation.component</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">validateActions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validates action signatures for actions not tolerating dynamic binding (<code>@HealthCheck</code>, <code>@DynamicValues</code>, and so on). It is recommended to keep it set to <code>true</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.validation.action</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">validateFamily</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validates the family by verifying that the package containing the <code>@Components</code> has a <code>@Icon</code> property defined.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.validation.family</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">validateDocumentation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures that all components and <code>@Option</code> properties have a documentation using the <code>@Documentation</code> property.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.validation.documentation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">validateLayout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures that the layout is referencing existing options and properties.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.validation.layout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">validateOptionNames</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures that the option names are compliant with the framework. It is highly recommended and safer to keep it set to <code>true</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.validation.options</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">validateLocalConfiguration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures that if any <code>TALEND-INF/local-configuration.properties</code> exists then keys start with the family name.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.validation.localConfiguration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">validateOutputConnection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures that an output has only one input branch.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.validation.validateOutputConnection</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">validatePlaceholder</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures that string options have a placeholder. It is highly recommended to turn this property on.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.validation.placeholder</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">locale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The locale used to validate internationalization.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.validation.locale</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">root</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_generating_the_component_documentation"><a class="anchor" href="#_generating_the_component_documentation"></a>Generating the component documentation</h4>
<div class="paragraph">
<p>The <code>asciidoc</code> goal generates an Asciidoc file documenting your component from the configuration model (<code>@Option</code>) and the <code>@Documentation</code> property that you can add to options and to the component itself.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.talend.sdk.component&lt;/groupId&gt;
  &lt;artifactId&gt;talend-component-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${component.version}&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;talend-component-documentation&lt;/id&gt;
      &lt;goals&gt;
        &lt;goal&gt;asciidoc&lt;/goal&gt;
      &lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch table-striped table-hover table-ordered">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">User property</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">level</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Level of the root title.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.documentation.level</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>2 (<code>==</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">output</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Output folder path. It is recommended to keep it to the default value.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.documentation.output</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>${classes}/TALEND-INF/documentation.adoc</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">formats</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map of the renderings to do. Keys are the format (<code>pdf</code> or <code>html</code>) and values the output paths.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.documentation.formats</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attributes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Asciidoctor attributes to use for the rendering when <strong>formats</strong> is set.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.documentation.attributes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">templateEngine</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template engine configuration for the rendering.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.documentation.templateEngine</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">templateDir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template directory for the rendering.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.documentation.templateDir</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">title</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Document title.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.documentation.title</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">${project.name}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The component version. It defaults to the pom version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.documentation.version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">${project.version}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">workDir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The template directory for the Asciidoctor rendering - if 'formats' is set.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.documentation.workdDir</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">${project.build.directory}/talend-component/workdir</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attachDocumentations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows to attach (and deploy) the documentations (<code>.adoc</code>, and <code>formats</code> keys) to the project.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.documentation.attach</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">htmlAndPdf</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If you use the plugin as an extension, you can add this property and set it to <code>true</code> in your project to automatically get HTML and PDF renderings of the documentation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.documentation.htmlAndPdf</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_rendering_your_documentation"><a class="anchor" href="#_rendering_your_documentation"></a>Rendering your documentation</h5>
<div class="paragraph">
<p>To render the generated documentation in HTML or PDF, you can use the Asciidoctor Maven plugin (or Gradle equivalent). You can configure both executions if you want both HTML and PDF renderings.</p>
</div>
<div class="paragraph">
<p>Make sure to execute the rendering after the documentation generation.</p>
</div>
</div>
<div class="sect4">
<h5 id="_html_rendering"><a class="anchor" href="#_html_rendering"></a>HTML rendering</h5>
<div class="paragraph">
<p>If you prefer a HTML rendering, you can configure the following execution in the asciidoctor plugin. The example below:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generates the components documentation in <code>target/classes/TALEND-INF/documentation.adoc</code>.</p>
</li>
<li>
<p>Renders the documentation as an HTML file stored in <code>target/documentation/documentation.html</code>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt; <i class="conum" data-value="1"></i><b>(1)</b>
  &lt;groupId&gt;org.talend.sdk.component&lt;/groupId&gt;
  &lt;artifactId&gt;talend-component-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${talend-component-kit.version}&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;documentation&lt;/id&gt;
      &lt;phase&gt;prepare-package&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;asciidoc&lt;/goal&gt;
      &lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;
&lt;plugin&gt; <i class="conum" data-value="2"></i><b>(2)</b>
  &lt;groupId&gt;org.asciidoctor&lt;/groupId&gt;
  &lt;artifactId&gt;asciidoctor-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;1.5.7&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;doc-html&lt;/id&gt;
      &lt;phase&gt;prepare-package&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;process-asciidoc&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;configuration&gt;
        &lt;sourceDirectory&gt;${project.build.outputDirectory}/TALEND-INF&lt;/sourceDirectory&gt;
        &lt;sourceDocumentName&gt;documentation.adoc&lt;/sourceDocumentName&gt;
        &lt;outputDirectory&gt;${project.build.directory}/documentation&lt;/outputDirectory&gt;
        &lt;backend&gt;html5&lt;/backend&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_pdf_rendering"><a class="anchor" href="#_pdf_rendering"></a>PDF rendering</h5>
<div class="paragraph">
<p>If you prefer a PDF rendering, you can configure the following execution in the asciidoctor plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.asciidoctor&lt;/groupId&gt;
  &lt;artifactId&gt;asciidoctor-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;1.5.7&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;doc-html&lt;/id&gt;
      &lt;phase&gt;prepare-package&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;process-asciidoc&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;configuration&gt;
        &lt;sourceDirectory&gt;${project.build.outputDirectory}/TALEND-INF&lt;/sourceDirectory&gt;
        &lt;sourceDocumentName&gt;documentation.adoc&lt;/sourceDocumentName&gt;
        &lt;outputDirectory&gt;${project.build.directory}/documentation&lt;/outputDirectory&gt;
        &lt;backend&gt;pdf&lt;/backend&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.asciidoctor&lt;/groupId&gt;
      &lt;artifactId&gt;asciidoctorj-pdf&lt;/artifactId&gt;
      &lt;version&gt;1.5.0-alpha.16&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_including_the_documentation_into_a_document"><a class="anchor" href="#_including_the_documentation_into_a_document"></a>Including the documentation into a document</h5>
<div class="paragraph">
<p>If you want to add some more content or a title, you can include the generated document into
another document using Asciidoc <code>include</code> directive.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-adoc hljs" data-lang="adoc">= Super Components
Super Writer
:toc:
:toclevels: 3
:source-highlighter: prettify
:numbered:
:icons: font
:hide-uri-scheme:
:imagesdir: images

include::{generated_doc}/documentation.adoc[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>To be able to do that, you need to pass the <code>generated_doc</code> attribute to the plugin. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.asciidoctor&lt;/groupId&gt;
  &lt;artifactId&gt;asciidoctor-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;1.5.7&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;doc-html&lt;/id&gt;
      &lt;phase&gt;prepare-package&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;process-asciidoc&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;configuration&gt;
        &lt;sourceDirectory&gt;${project.basedir}/src/main/asciidoc&lt;/sourceDirectory&gt;
        &lt;sourceDocumentName&gt;my-main-doc.adoc&lt;/sourceDocumentName&gt;
        &lt;outputDirectory&gt;${project.build.directory}/documentation&lt;/outputDirectory&gt;
        &lt;backend&gt;html5&lt;/backend&gt;
        &lt;attributes&gt;
          &lt;generated_adoc&gt;${project.build.outputDirectory}/TALEND-INF&lt;/generated_adoc&gt;
        &lt;/attributes&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is optional but allows to reuse Maven placeholders to pass paths, which can be convenient in an automated build.</p>
</div>
<div class="paragraph">
<p>You can find more customization options on Asciidoctor <a href="http://asciidoctor.org/docs/asciidoctor-maven-plugin/">website</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_testing_a_component_web_rendering"><a class="anchor" href="#_testing_a_component_web_rendering"></a>Testing a component web rendering</h4>
<div class="paragraph">
<p>Testing the rendering of your component configuration into the Studio requires deploying the component in Talend Studio. Refer to the <a href="studio.html">Studio documentation</a>.</p>
</div>
<div class="paragraph">
<p>In the case where you need to deploy your component into a Cloud (web) environment, you can test its web rendering by using the <code>web</code> goal of the plugin:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the <code>mvn talend-component:web</code> command.</p>
</li>
<li>
<p>Open the following URL in a web browser: <code><a href="http://localhost:8080" class="bare">localhost:8080</a></code>.</p>
</li>
<li>
<p>Select the component form you want to see from the treeview on the left. The selected form is displayed on the right.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Two parameters are available with the plugin:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>serverPort</code>, which allows to change the default port (8080) of the embedded server. Its associated user property is <code>talend.web.port</code>.</p>
</li>
<li>
<p><code>serverArguments</code>, that you can use to pass Meecrowave options to the server. Learn more about that configuration at <a href="http://openwebbeans.apache.org/meecrowave/meecrowave-core/cli.html" class="bare">openwebbeans.apache.org/meecrowave/meecrowave-core/cli.html</a>.</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Make sure to install the artifact before using this command because it reads the component JAR from the local Maven repository.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Finally, you can switch the lang of the component UI (documentation, form) using <code>language</code> query parameter in the webapp.
For instance <code><a href="http://localhost:8080?language=fr" class="bare">localhost:8080?language=fr</a></code>.</p>
</div>
<div class="sect4">
<h5 id="_changing_the_ui_bundle"><a class="anchor" href="#_changing_the_ui_bundle"></a>Changing the UI bundle</h5>
<div class="paragraph">
<p>If you built a custom UI (JS + CSS) bundle and want to test it in the web application, you can configure it in the <code>pom.xml</code> file as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;configuration&gt;
  &lt;uiConfiguration&gt;
    &lt;jsLocation&gt;https://cdn.talend.com/myapp.min.js&lt;/jsLocation&gt;
    &lt;cssLocation&gt;https://cdn.talend.com/myapp.min.css&lt;/cssLocation&gt;
  &lt;/uiConfiguration&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This is an advanced feature designed for expert users. Use it with caution.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_generating_the_component_archive"><a class="anchor" href="#_generating_the_component_archive"></a>Generating the component archive</h4>
<div class="paragraph">
<p>Component ARchive (<strong>.car</strong>) is the way to bundle a component to share it in the Talend ecosystem. It is an executable Java ARchive (<strong>.jar</strong>) containing a metadata file and a nested Maven repository containing the component and its dependencies.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">mvn talend-component:car</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command creates a <strong>.car</strong> file in your build directory. This file can be shared on Talend platforms.</p>
</div>
<div class="paragraph">
<p>This command has some optional parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch table-striped table-hover table-ordered">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">User property</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">attach</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies whether the component archive should be attached.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.car.attach</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">classifier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The classifier to use if attach is set to true.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.car.classifier</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">component</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional custom metadata to bundle in the component archive.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">output</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the output path and name of the archive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.car.output</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">${project.build.directory}/${project.build.finalName}.car</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">packaging</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the packaging</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">${project.packaging}</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This CAR is executable and exposes the <code>studio-deploy</code> command which takes
a Talend Studio home path as parameter. When executed, it installs the dependencies into the Studio and registers the component in your instance. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># for a studio
java -jar mycomponent.car studio-deploy /path/to/my/studio
or
java -jar mycomponent.car studio-deploy --location /path/to/my/studio

# for a m2 provisioning
java -jar mycomponent.car maven-deploy /path/to/.m2/repository
or
java -jar mycomponent.car maven-deploy --location /path/to/.m2/repository</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also upload the dependencies to your Nexus server using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -jar mycomponent.car deploy-to-nexus --url &lt;nexus url&gt; --repo &lt;repository name&gt; --user &lt;username&gt; --pass &lt;password&gt; --threads &lt;parallel threads number&gt; --dir &lt;temp directory&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this command, Nexus URL and repository name are mandatory arguments. All other arguments are optional. If arguments contain spaces or special symbols, you need to quote the whole value of the argument. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">--pass "Y0u will \ not G4iess i' ^"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_deploying_to_the_studio"><a class="anchor" href="#_deploying_to_the_studio"></a>Deploying to the Studio</h4>
<div class="paragraph">
<p>The <code>deploy-in-studio</code> goal deploys the current component module into a local Talend Studio instance.</p>
</div>
<table class="tableblock frame-all grid-all stretch table-striped table-hover table-ordered">
<caption class="title">Table 1. Parameters</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">User property</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">studioHome</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the Studio home directory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.component.studioHome</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">studioM2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the Studio maven repository if not the default one</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>talend.component.studioM2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can use the following command from the root folder of your project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ mvn talend-component:deploy-in-studio -Dtalend.component.studioHome="&lt;studio_path&gt;"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_help"><a class="anchor" href="#_help"></a>Help</h4>
<div class="paragraph">
<p>The <code>help</code> goal displays help information on <code>talend-component-maven-plugin</code>.
Call <code>mvn talend-component:help -Ddetail=true -Dgoal=&lt;goal-name&gt;</code> to display the parameter details of a specific goal.</p>
</div>
<table class="tableblock frame-all grid-all stretch table-striped table-hover table-ordered">
<caption class="title">Table 2. Parameters</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">User property</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">detail</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Displays all settable properties for each goal.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>detail</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">goal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the goal for which to show help. If unspecified, all goals are displayed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>goal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">indentSize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of spaces per indentation level. This integer should be positive.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>indentSize</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lineLength</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum length of a display line. This integer should be positive.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lineLength</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2 relatedlinks">
<h3 id="_related_articles_10"><a class="anchor" href="#_related_articles_10"></a>Related articles</h3>
<div class="ulist">
<ul>
<li>
<p><a href="best-practices.html" class="xref page">Best practices</a></p>
</li>
<li>
<p><a href="build-tools-gradle.html" class="xref page">Building components with Gradle</a></p>
</li>
<li>
<p><a href="studio.html" class="xref page">Integrating to the Studio</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_components_with_gradle"><a class="anchor" href="#_building_components_with_gradle"></a>Building components with Gradle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To develop new components, Talend Component Kit requires a build tool in which you will import the component project generated from the starter. With this build tool, you will also be able to implement the logic of your component and to install and deploy it to Talend applications.
A Talend Component Kit plugin is available for each of the supported build tools.</p>
</div>
<div class="paragraph">
<p><strong>gradle-talend-component</strong> helps you write components that match the best practices. It is inspired from the Maven plugin and adds the ability to generate automatically the <code>dependencies.txt</code> file used by the SDK to build the component classpath. For more information on the configuration, refer to the <a href="build-tools-maven.html" class="xref page">Maven</a> properties matching the attributes.</p>
</div>
<div class="paragraph">
<p>By default, Gradle does not log information messages. To see messages, use <code>--info</code> in your commands. Refer to <a href="https://docs.gradle.org/current/userguide/logging.html">Gradle&#8217;s documentation</a> to learn about log levels.</p>
</div>
<div class="paragraph">
<p>You can use it as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">buildscript {
  repositories {
    mavenLocal()
    mavenCentral()
  }
  dependencies {
    classpath "org.talend.sdk.component:gradle-talend-component:${talendComponentVersion}"
  }
}

apply plugin: 'org.talend.sdk.component'
apply plugin: 'java'

// optional customization
talendComponentKit {
    // dependencies.txt generation, replaces maven-dependency-plugin
    dependenciesLocation = "TALEND-INF/dependencies.txt"
    boolean skipDependenciesFile = false;

    // classpath for validation utilities
    sdkVersion = "${talendComponentVersion}"
    apiVersion = "${talendComponentApiVersion}"

    // documentation
    skipDocumentation = false
    documentationOutput = new File(....)
    documentationLevel = 2 // first level will be == in the generated .adoc
    documentationTitle = 'My Component Family' // defaults to ${project.name}
    documentationAttributes = [:] // adoc attributes
    documentationFormats = [:] // renderings to do
    documentationVersion = 1.1 // defaults to the .pom version

    // validation
    skipValidation = false
    validateFamily = true
    validateSerializable = true
    validateInternationalization = true
    validateModel = true
    validateOptionNames = true
    validateMetadata = true
    validateComponent = true
    validateDataStore = true
    validateDataSet = true
    validateActions = true
    validateLocalConfiguration = true
    validateOutputConnection = true
    validateLayout = true
    validateDocumentation = true

    // web
    serverArguments = []
    serverPort = 8080

    // car
    carAttach = true
    carClassifier = component // classifier to use if carAttach is set to true
    carOutput = new File(....)
    carMetadata = [:] // custom meta (string key-value pairs)
    carPackaging = ${project.packaging}

    // deploy-in-studio
    studioHome = "C:\&lt;pathToSutdio&gt;"

    // svg2png
    icons = 'resources/main/icons'
    useIconWorkarounds = true
}</code></pre>
</div>
</div>
<div class="sect2 relatedlinks">
<h3 id="_related_articles_11"><a class="anchor" href="#_related_articles_11"></a>Related articles</h3>
<div class="ulist">
<ul>
<li>
<p><a href="best-practices.html" class="xref page">Best practices</a></p>
</li>
<li>
<p><a href="build-tools-maven.html" class="xref page">Building components with Maven</a></p>
</li>
<li>
<p><a href="studio.html" class="xref page">Integrating to the Studio</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_wrapping_a_beam_io"><a class="anchor" href="#_wrapping_a_beam_io"></a>Wrapping a Beam I/O</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="wrapping-a-beam-io__start"><a class="anchor" href="#wrapping-a-beam-io__start"></a>Limitations</h3>
<div class="paragraph">
<p>This part is limited to specific kinds of <a href="https://beam.apache.org/">Beam</a> <code>PTransform</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PTransform&lt;PBegin, PCollection&lt;?&gt;&gt;</code> for inputs.</p>
</li>
<li>
<p><code>PTransform&lt;PCollection&lt;?&gt;, PDone&gt;</code> for outputs. Outputs must use a single (composite or not) <code>DoFn</code> in their <code>apply</code> method.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_wrapping_an_input"><a class="anchor" href="#_wrapping_an_input"></a>Wrapping an input</h3>
<div class="paragraph">
<p>To illustrate the input wrapping, this procedure uses the following input as a starting point (based on existing Beam inputs):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@AutoValue
public abstract [static] class Read extends PTransform&lt;PBegin, PCollection&lt;String&gt;&gt; {

  // config

  @Override
  public PCollection&lt;String&gt; expand(final PBegin input) {
    return input.apply(
        org.apache.beam.sdk.io.Read.from(new BoundedElasticsearchSource(this, null)));
  }

  // ... other transform methods
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To wrap the <code>Read</code> in a framework component, create a transform delegating to that Read with at least a <code>@PartitionMapper</code> annotation and using <code>@Option</code> constructor injections to configure the component. Also make sure to follow the best practices and to specify <code>@Icon</code> and <code>@Version</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@PartitionMapper(family = "myfamily", name = "myname")
public class WrapRead extends PTransform&lt;PBegin, PCollection&lt;String&gt;&gt; {
  private PTransform&lt;PBegin, PCollection&lt;String&gt;&gt; delegate;

  public WrapRead(@Option("dataset") final WrapReadDataSet dataset) {
    delegate = TheIO.read().withConfiguration(this.createConfigurationFrom(dataset));
  }

  @Override
  public PCollection&lt;String&gt; expand(final PBegin input) {
    return delegate.expand(input);
  }

  // ... other methods like the mapping with the native configuration (createConfigurationFrom)
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wrapping_an_output"><a class="anchor" href="#_wrapping_an_output"></a>Wrapping an output</h3>
<div class="paragraph">
<p>To illustrate the output wrapping, this procedure uses the following output as a starting point (based on existing Beam outputs):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@AutoValue
public abstract [static] class Write extends PTransform&lt;PCollection&lt;String&gt;, PDone&gt; {


    // configuration withXXX(...)

    @Override
    public PDone expand(final PCollection&lt;String&gt; input) {
      input.apply(ParDo.of(new WriteFn(this)));
      return PDone.in(input.getPipeline());
    }

    // other methods of the transform
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can wrap this output exactly the same way you wrap an input, but using <code>@Processor</code> instead of:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Processor(family = "myfamily", name = "myname")
public class WrapWrite extends PTransform&lt;PCollection&lt;String&gt;, PDone&gt; {
  private PTransform&lt;PCollection&lt;String&gt;, PDone&gt; delegate;

  public WrapWrite(@Option("dataset") final WrapWriteDataSet dataset) {
    delegate = TheIO.write().withConfiguration(this.createConfigurationFrom(dataset));
  }

  @Override
  public PDone expand(final PCollection&lt;String&gt; input) {
    return delegate.expand(input);
  }

  // ... other methods like the mapping with the native configuration (createConfigurationFrom)
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tip"><a class="anchor" href="#_tip"></a>Tip</h3>
<div class="paragraph">
<p>Note that the <code>org.talend.sdk.component.runtime.beam.transform.DelegatingTransform</code> class fully delegates the "expansion" to another transform. Therefore, you can extend it and implement the configuration mapping:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Processor(family = "beam", name = "file")
public class BeamFileOutput extends DelegatingTransform&lt;PCollection&lt;String&gt;, PDone&gt; {

    public BeamFileOutput(@Option("output") final String output) {
        super(TextIO.write()
            .withSuffix("test")
            .to(FileBasedSink.convertToFileResourceIfPossible(output)));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_advanced"><a class="anchor" href="#_advanced"></a>Advanced</h3>
<div class="paragraph">
<p>In terms of classloading, when you write an I/O, the Beam SDK Java core stack is assumed as provided in Talend Component Kit runtime. This way, you don&#8217;t need to include it in the compile scope, it would be ignored anyway.</p>
</div>
<div class="sect3">
<h4 id="_coder"><a class="anchor" href="#_coder"></a>Coder</h4>
<div class="paragraph">
<p>If you need a JSonCoder, you can use the <code>org.talend.sdk.component.runtime.beam.factory.service.PluginCoderFactory</code> service,
which gives you access to the JSON-P and JSON-B coders.</p>
</div>
<div class="paragraph">
<p>There is also an Avro coder, which uses the <code>FileContainer</code>. It ensures it
is self-contained for <code>IndexedRecord</code> and it does not requireas the default Apache Beam <code>AvroCoder</code>to set the schema when creating a pipeline.<br>
It consumes more space and therefore is slightly slower, but it is fine for <code>DoFn</code>, since it does not rely on serialization in most cases.
See <code>org.talend.sdk.component.runtime.beam.transform.avro.IndexedRecordCoder</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_jsonobject_to_indexedrecord"><a class="anchor" href="#_jsonobject_to_indexedrecord"></a>JsonObject to IndexedRecord</h4>
<div class="paragraph">
<p>If your <code>PCollection</code> is made of <code>JsonObject</code> records, and you want to convert them to <code>IndexedRecord</code>, you can use the following <code>PTransforms</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>IndexedRecordToJson</code></dt>
<dd>
<p>converts an <code>IndexedRecord</code> to a <code>JsonObject</code>.</p>
</dd>
<dt class="hdlist1"><code>JsonToIndexedRecord</code></dt>
<dd>
<p>converts a <code>JsonObject</code> to an <code>IndexedRecord</code>.</p>
</dd>
<dt class="hdlist1"><code>SchemalessJsonToIndexedRecord</code></dt>
<dd>
<p>converts a <code>JsonObject</code> to an <code>IndexedRecord</code> with AVRO schema inference.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_record_coder"><a class="anchor" href="#_record_coder"></a>Record coder</h4>
<div class="paragraph">
<p>There are two main provided coder for <code>Record</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>FullSerializationRecordCoder</code></dt>
<dd>
<p>it will unwrap the record as an Avro <code>IndexedRecord</code> and serialize it <strong>with its schema</strong>.
This can indeed have a performance impact but, due to the structure of component, it will not impact the runtime
performance in general - except with direct runner - because the runners will optimize the pipeline accurately.</p>
</dd>
<dt class="hdlist1"><code>SchemaRegistryCoder</code></dt>
<dd>
<p>it will serialize the Avro <code>IndexedRecord</code> as well but it will ensure the schema is in the
<code>SchemaRegistry</code> to be able to deserialize it when needed. This implementation is faster <strong>but</strong> the default implementation
of the registry is "in memory" so will only work with a single worker node. You can extend it using Java SPI mecanism to use a custom
distributed implementation.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_sample"><a class="anchor" href="#_sample"></a>Sample</h4>
<div class="paragraph">
<p>Sample input based on Beam Kafka:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Version
@Icon(Icon.IconType.KAFKA)
@Emitter(name = "Input")
@AllArgsConstructor
@Documentation("Kafka Input")
public class KafkaInput extends PTransform&lt;PBegin, PCollection&lt;Record&gt;&gt; { <i class="conum" data-value="1"></i><b>(1)</b>

    private final InputConfiguration configuration;

    private final RecordBuilderFactory builder;

    private final PluginCoderFactory coderFactory;

    private KafkaIO.Read&lt;byte[], byte[]&gt; delegate() {
        final KafkaIO.Read&lt;byte[], byte[]&gt; read = KafkaIO.&lt;byte[], byte[]&gt; read()
                .withBootstrapServers(configuration.getBootstrapServers())
                .withTopics(configuration.getTopics().stream().map(InputConfiguration.Topic::getName).collect(toList()))
                .withKeyDeserializer(ByteArrayDeserializer.class).withValueDeserializer(ByteArrayDeserializer.class);
        if (configuration.getMaxResults() &gt; 0) {
            return read.withMaxNumRecords(configuration.getMaxResults());
        }
        return read;
    }

    @Override <i class="conum" data-value="2"></i><b>(2)</b>
    public PCollection&lt;Record&gt; expand(final PBegin pBegin) {
        final PCollection&lt;KafkaRecord&lt;byte[], byte[]&gt;&gt; kafkaEntries = pBegin.getPipeline().apply(delegate());
        return kafkaEntries.apply(ParDo.of(new BytesToRecord(builder))).setCoder(SchemaRegistryCoder.of()); <i class="conum" data-value="3"></i><b>(3)</b>
    }

    @AllArgsConstructor
    private static class BytesToRecord extends DoFn&lt;KafkaRecord&lt;byte[], byte[]&gt;, Record&gt; {

        private final RecordBuilderFactory builder;

        @ProcessElement
        public void onElement(final ProcessContext context) {
            context.output(toRecord(context.element()));
        }

        private Record toRecord(final KafkaRecord&lt;byte[], byte[]&gt; element) {
            return builder.newRecordBuilder().add("key", element.getKV().getKey())
                    .add("value", element.getKV().getValue()).build();
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>PTransform</code> generics define that the component is an input (<code>PBegin</code> marker).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>expand</code> method chains the native I/O with a custom mapper (<code>BytesToRecord</code>).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The mapper uses the SchemaRegistry coder automatically created from the contextual component.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Because the Beam wrapper does not respect the standard Talend Component Kit programming model ( for example, there is no <code>@Emitter</code>), you need to set the <code>&lt;talend.validation.component&gt;false&lt;/talend.validation.component&gt;</code> property in your <code>pom.xml</code> file (or equivalent for Gradle) to skip the component programming model validations of the framework.</p>
</div>
</div>
</div>
<div class="sect2 relatedlinks">
<h3 id="_related_articles_12"><a class="anchor" href="#_related_articles_12"></a>Related articles</h3>
<div class="ulist">
<ul>
<li>
<p><a href="component-define-input.html" class="xref page">Defining an input component</a></p>
</li>
<li>
<p><a href="component-define-processor-output.html" class="xref page">Defining a processor or output component</a></p>
</li>
<li>
<p><a href="services-pipeline.html" class="xref page">Creating a job pipeline</a></p>
</li>
<li>
<p><a href="testing-beam.html" class="xref page">Beam testing</a></p>
</li>
<li>
<p><a href="testing-multiple-envs.html" class="xref page">Testing in multiple environments</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_talend_component_kit_best_practices"><a class="anchor" href="#_talend_component_kit_best_practices"></a>Talend Component Kit best practices</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_organizing_your_code"><a class="anchor" href="#_organizing_your_code"></a>Organizing your code</h3>
<div class="paragraph">
<p>Some recommendations apply to the way component packages are organized:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure to create a <code>package-info.java</code> file with the component family/categories at the root of your component package:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Components(family = "jdbc", categories = "Database")
package org.talend.sdk.component.jdbc;

import org.talend.sdk.component.api.component.Components;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Create a package for the configuration.</p>
</li>
<li>
<p>Create a package for the actions.</p>
</li>
<li>
<p>Create a package for the component and one sub-package by type of component (input, output, processors, and so on).</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_components"><a class="anchor" href="#_configuring_components"></a>Configuring components</h3>
<div class="sect3">
<h4 id="_serializing_your_configuration"><a class="anchor" href="#_serializing_your_configuration"></a>Serializing your configuration</h4>
<div class="paragraph">
<p>It is recommended to serialize your configuration in order to be able to pass it through other components.</p>
</div>
</div>
<div class="sect3">
<h4 id="_input_and_output_components"><a class="anchor" href="#_input_and_output_components"></a>Input and output components</h4>
<div class="paragraph">
<p>When building a new component, the first step is to identify the way it must be configured.</p>
</div>
<div class="paragraph">
<p>The two main concepts are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <em>DataStore</em> which is the way you can access the backend.</p>
</li>
<li>
<p>The <em>DataSet</em> which is the way you interact with the backend.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<table class="tableblock frame-all grid-all stretch table-striped table-hover table-ordered">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Example description</th>
<th class="tableblock halign-left valign-top">DataStore</th>
<th class="tableblock halign-left valign-top">DataSet</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accessing a relational database like MySQL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC driver, URL, username, password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query to execute, row mapper, and so on.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accessing a file system</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File pattern (or directory + file extension/prefix/&#8230;&#8203;)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File format, buffer size, and so on.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>It is common to have the dataset including the datastore, because both are required to work. However, it is recommended to replace this pattern by defining both dataset and datastore in a higher level configuration model. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@DataSet
public class MyDataSet {
    // ...
}

@DataStore
public class MyDataStore {
    // ...
}


public class MyComponentConfiguration {
    @Option
    private MyDataSet dataset;

    @Option
    private MyDataStore datastore;
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_about_actions"><a class="anchor" href="#_about_actions"></a>About actions</h5>
<div class="paragraph">
<p>Input and output components are particular because they can be linked to a set of actions. It is recommended to wire all the actions you can apply to ensure the consumers of your component can provide a rich experience to their users.</p>
</div>
<div class="paragraph">
<p>The most common actions are the following ones:</p>
</div>
<div class="sect5">
<h6 id="_checkable_datastore"><a class="anchor" href="#_checkable_datastore"></a>@Checkable (DataStore)</h6>
<div class="paragraph">
<p>This action exposes a way to ensure the datastore/connection works.</p>
</div>
<div class="paragraph">
<p>Configuration example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@DataStore
@Checkable
public class JdbcDataStore
  implements Serializable {

  @Option
  private String driver;

  @Option
  private String url;

  @Option
  private String username;

  @Option
  private String password;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Action example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@HealthCheck
public HealthCheckStatus healthCheck(@Option("datastore") JdbcDataStore datastore) {
    if (!doTest(dataStore)) {
        // often add an exception message mapping or equivalent
        return new HealthCheckStatus(Status.KO, "Test failed");
    }
    return new HealthCheckStatus(Status.KO, e.getMessage());
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_limitations"><a class="anchor" href="#_limitations"></a>Limitations</h5>
<div class="paragraph">
<p>Until the studio integration is complete, it is recommended to limit processors to one input.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_processor_components"><a class="anchor" href="#_processor_components"></a>Processor components</h4>
<div class="paragraph">
<p>Configuring processor components is simpler than configuring input and output components because it is specific for each component. For example, a mapper takes the mapping between the input and output models:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MappingConfiguration {
    @Option
    private Map&lt;String, String&gt; fieldsMapping;

    @Option
    private boolean ignoreCase;

    //...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_handling_ui_interactions"><a class="anchor" href="#_handling_ui_interactions"></a>Handling UI interactions</h3>
<div class="paragraph">
<p>It is recommended to provide as much information as possible to let the UI work with the data during its edition.</p>
</div>
<div class="sect3">
<h4 id="_validations"><a class="anchor" href="#_validations"></a>Validations</h4>
<div class="sect4">
<h5 id="_light_validations"><a class="anchor" href="#_light_validations"></a>Light validations</h5>
<div class="paragraph">
<p>Light validations are all the validations you can execute on the client side. They are listed in the <a href="component-configuration.html#documentation-ui-hints" class="xref page">UI hint</a> section.</p>
</div>
<div class="paragraph">
<p>Use light validations first before going with custom validations because they are more efficient.</p>
</div>
</div>
<div class="sect4">
<h5 id="_custom_validations"><a class="anchor" href="#_custom_validations"></a>Custom validations</h5>
<div class="paragraph">
<p>Custom validations enforce custom code to be executed, but are heavier to execute.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Prefer using light validations when possible.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Define an action with the parameters needed for the validation and link the option you want to validate to this action.
For example, to validate a dataset for a JDBC driver:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// ...
public class JdbcDataStore
  implements Serializable {

  @Option
  @Validable("driver")
  private String driver;

  // ...
}

@AsyncValidation("driver")
public ValidationResult validateDriver(@Option("value") String driver) {
  if (findDriver(driver) != null) {
    return new ValidationResult(Status.OK, "Driver found");
  }
  return new ValidationResult(Status.KO, "Driver not found");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also define a Validable class and use it to validate a form by setting it on your whole configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// Note: some parts of the API were removed for clarity

public class MyConfiguration {

  // a lot of @Options
}

public MyComponent {
    public MyComponent(@Validable("configuration") MyConfiguration config) {
        // ...
    }

    //...
}

@AsyncValidation("configuration")
public ValidationResult validateDriver(@Option("value") MyConfiguration configuration) {
  if (isValid(configuration)) {
    return new ValidationResult(Status.OK, "Configuration valid");
  }
  return new ValidationResult(Status.KO, "Driver not valid ${because ...}");
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The parameter binding of the validation method uses the same logic as the component configuration injection. Therefore, the <code>@Option</code> method specifies the prefix to use to reference a parameter.<br>
It is recommended to use <code>@Option("value")</code> until you know exactly why you don&#8217;t use it. This way, the consumer can match the configuration model and just prefix it with <code>value.</code> to send the instance to validate.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Validations are triggers based on "events". If you mark part of a configuration as <code>@Validable</code> but this configuration is translated to a widget without any interaction, then no validation will happen. The rule of thumb is to mark only
primitives and simple types (list of primitives) as <code>@Validable</code>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_completion"><a class="anchor" href="#_completion"></a>Completion</h4>
<div class="paragraph">
<p>It can be handy and user-friendly to provide completion on some fields.
For example, to define completion for available drivers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// ...
public class JdbcDataStore
  implements Serializable {

  @Option
  @Completable("driver")
  private String driver;

  // ...
}

@Completion("driver")
public CompletionList findDrivers() {
    return new CompletionList(findDriverList());
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_component_representation"><a class="anchor" href="#_component_representation"></a>Component representation</h4>
<div class="paragraph">
<p>Each component must have its own icon:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Icon(Icon.IconType.DB_INPUT)
@PartitionMapper(family = "jdbc", name = "input")
public class JdbcPartitionMapper
    implements Serializable {
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can use <a href="http://talend.surge.sh/icons/" class="bare">talend.surge.sh/icons/</a> to find the icon you want to use.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_enforcing_versioning_on_components"><a class="anchor" href="#_enforcing_versioning_on_components"></a>Enforcing versioning on components</h3>
<div class="paragraph">
<p>It is recommended to enforce the version of your component, event though it is not mandatory for the first version.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Version(1)
@PartitionMapper(family = "jdbc", name = "input")
public class JdbcPartitionMapper
    implements Serializable {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you break a configuration entry in a later version;  make sure to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Upgrade the version.</p>
</li>
<li>
<p>Support a migration of the configuration.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Version(value = 2, migrationHandler = JdbcPartitionMapper.Migrations.class)
@PartitionMapper(family = "jdbc", name = "input")
public class JdbcPartitionMapper
    implements Serializable {

    public static class Migrations implements MigrationHandler {
        // implement your migration
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_testing_components"><a class="anchor" href="#_testing_components"></a>Testing components</h3>
<div class="paragraph">
<p>Testing your components is critical. You can use unit and simple standalone JUnit tests, but it is also highly recommended to have Beam tests in order to make sure that your component works in Big Data.</p>
</div>
</div>
<div class="sect2 relatedlinks">
<h3 id="_related_articles_13"><a class="anchor" href="#_related_articles_13"></a>Related articles</h3>
<div class="ulist">
<ul>
<li>
<p><a href="tutorial-generate-project-using-starter.html" class="xref page">Generating a project using the starter</a></p>
</li>
<li>
<p><a href="component-define-input.html" class="xref page">Defining an input component</a></p>
</li>
<li>
<p><a href="component-define-processor-output.html" class="xref page">Defining a processor or output component</a></p>
</li>
<li>
<p><a href="component-define-standalone.html" class="xref page">Defining a standalone component</a></p>
</li>
<li>
<p><a href="component-configuration.html" class="xref page">Configuring a component</a></p>
</li>
<li>
<p><a href="component-registering.html" class="xref page">Registering a component</a></p>
</li>
<li>
<p><a href="component-internationalization.html" class="xref page">Internationalizing a component</a></p>
</li>
<li>
<p><a href="component-loading.html" class="xref page">Loading a component</a></p>
</li>
<li>
<p><a href="tutorial-configuration-sensitive-data.html" class="xref page">Masking sensitive data</a></p>
</li>
<li>
<p><a href="index-defining-services.html" class="xref page">Defining services</a></p>
</li>
<li>
<p><a href="index-testing-components.html" class="xref page">Testing components</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_component_loading"><a class="anchor" href="#_component_loading"></a>Component Loading</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Talend Component scanning is based on plugins. To make sure that plugins can be developed in parallel and avoid conflicts, they need to be isolated (component or group of components in a single jar/plugin).</p>
</div>
<div class="paragraph">
<p>Multiple options are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Graph classloading: this option allows you to link the plugins and dependencies together dynamically in any direction.<br>
For example, the graph classloading can be illustrated by OSGi containers.</p>
</li>
<li>
<p>Tree classloading: a shared classloader inherited by plugin classloaders. However, plugin classloader classes are not seen by the shared classloader, nor by other plugins.<br>
For example, the tree classloading is commonly used by Servlet containers where plugins are web applications.</p>
</li>
<li>
<p>Flat classpath: listed for completeness but rejected <em>by design</em> because it doesn&#8217;t comply with this requirement.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In order to avoid much complexity added by this layer, Talend Component Kit relies on a tree classloading. The advantage is that you don&#8217;t need to define the relationship with other plugins/dependencies, because it is built-in.</p>
</div>
<div class="paragraph">
<p>Here is a representation of this solution:</p>
</div>
<div class="paragraph">
<p><span class="image"><a class="image" href="https://talend.github.io/component-runtime/main/1.50.3/_images/classloader-layout.png" target="_blank" rel="noopener"><img src="_images/classloader-layout.png" alt="Classloader layout"></a></span></p>
</div>
<div class="paragraph">
<p>The <em>shared</em> area contains Talend Component Kit API, which only contains by default the classes shared by the plugins.</p>
</div>
<div class="paragraph">
<p>Then, each plugin is loaded with its own classloader and dependencies.</p>
</div>
<div class="sect2">
<h3 id="_packaging_a_plugin"><a class="anchor" href="#_packaging_a_plugin"></a>Packaging a plugin</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This section explains the overall way to handle dependencies but the Talend Maven plugin provides a shortcut for that.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A plugin is a JAR file that was enriched with the list of its dependencies. By default, Talend Component Kit runtime is able to read the output of <code>maven-dependency-plugin</code> in <code>TALEND-INF/dependencies.txt</code>. You just need to make sure that your component defines the following plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
  &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;
  &lt;version&gt;3.0.2&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;id&gt;create-TALEND-INF/dependencies.txt&lt;/id&gt;
      &lt;phase&gt;process-resources&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;list&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;configuration&gt;
        &lt;outputFile&gt;${project.build.outputDirectory}/TALEND-INF/dependencies.txt&lt;/outputFile&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once build, check the JAR file and look for the following lines:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ unzip -p target/mycomponent-1.0.0-SNAPSHOT.jar TALEND-INF/dependencies.txt

The following files have been resolved:
   org.talend.sdk.component:component-api:jar:1.0.0-SNAPSHOT:provided
   org.apache.geronimo.specs:geronimo-annotation_1.3_spec:jar:1.0:provided
   org.superbiz:awesome-project:jar:1.2.3:compile
   junit:junit:jar:4.12:test
   org.hamcrest:hamcrest-core:jar:1.3:test</code></pre>
</div>
</div>
<div class="paragraph">
<p>What is important to see is the scope related to the artifacts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The APIs (<strong>component-api</strong> and <strong>geronimo-annotation_1.3_spec</strong>) are <code>provided</code> because you can consider them to be there when executing (they come with the framework).</p>
</li>
<li>
<p>Your specific dependencies (<code>awesome-project</code> in the example above) are marked as <code>compile</code>: they are included as needed dependencies by the framework (note that using <code>runtime</code> works too).</p>
</li>
<li>
<p>the other dependencies are ignored. For example, <code>test</code> dependencies.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_packaging_an_application"><a class="anchor" href="#_packaging_an_application"></a>Packaging an application</h3>
<div class="paragraph">
<p>Even if a flat classpath deployment is possible, it is not recommended because it would then reduce the capabilities of the components.</p>
</div>
<div class="sect3">
<h4 id="_dependencies_2"><a class="anchor" href="#_dependencies_2"></a>Dependencies</h4>
<div class="paragraph">
<p>The way the framework resolves dependencies is based on a local Maven repository layout. As a quick reminder, it looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">.
 groupId1
  artifactId1
      version1
       artifactId1-version1.jar
      version2
        artifactId1-version2.jar
 groupId2
   artifactId2
       version1
         artifactId2-version1.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is all the layout the framework uses. The logic converts <code>t-uple {groupId, artifactId, version, type (jar)}</code> to the path in the repository.</p>
</div>
<div class="paragraph">
<p>Talend Component Kit runtime has two ways to find an artifact:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>From the file system based on a configured Maven 2 repository.</p>
</li>
<li>
<p>From a fat JAR (uber JAR) with a nested Maven repository under <code>MAVEN-INF/repository</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first option uses either <code>${user.home}/.m2/repository</code> (default) or a specific path configured when creating a <code>ComponentManager</code>.
The nested repository option needs some configuration during the packaging to ensure the repository is correctly created.</p>
</div>
<div class="sect4">
<h5 id="_creating_a_nested_maven_repository_with_maven_shade_plugin"><a class="anchor" href="#_creating_a_nested_maven_repository_with_maven_shade_plugin"></a>Creating a nested Maven repository with maven-shade-plugin</h5>
<div class="paragraph">
<p>To create the nested <code>MAVEN-INF/repository</code> repository, you can use the <code>nested-maven-repository</code> extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
  &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
  &lt;version&gt;3.2.1&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;phase&gt;package&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;shade&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;configuration&gt;
        &lt;transformers&gt;
          &lt;transformer implementation="org.talend.sdk.component.container.maven.shade.ContainerDependenciesTransformer"&gt;
            &lt;session&gt;${session}&lt;/session&gt;
          &lt;/transformer&gt;
        &lt;/transformers&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.talend.sdk.component&lt;/groupId&gt;
      &lt;artifactId&gt;nested-maven-repository&lt;/artifactId&gt;
      &lt;version&gt;${the.plugin.version}&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_listing_needed_plugins"><a class="anchor" href="#_listing_needed_plugins"></a>Listing needed plugins</h4>
<div class="paragraph">
<p>Plugins are usually programmatically registered. If you want to make some of them automatically available, you need to generate a <code>TALEND-INF/plugins.properties</code> file that maps a plugin name to coordinates found with the Maven mechanism described above.</p>
</div>
<div class="paragraph">
<p>You can enrich <code>maven-shade-plugin</code> to do it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
  &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
  &lt;version&gt;3.2.1&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;phase&gt;package&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;shade&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;configuration&gt;
        &lt;transformers&gt;
          &lt;transformer implementation="org.talend.sdk.component.container.maven.shade.PluginTransformer"&gt;
            &lt;session&gt;${session}&lt;/session&gt;
          &lt;/transformer&gt;
        &lt;/transformers&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.talend.sdk.component&lt;/groupId&gt;
      &lt;artifactId&gt;nested-maven-repository&lt;/artifactId&gt;
      &lt;version&gt;${the.plugin.version}&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_maven_shade_plugin_extensions"><a class="anchor" href="#_maven_shade_plugin_extensions"></a>maven-shade-plugin extensions</h4>
<div class="paragraph">
<p>Here is a final job/application bundle based on maven-shade-plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
  &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
  &lt;version&gt;3.2.1&lt;/version&gt;
  &lt;configuration&gt;
    &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;
    &lt;filters&gt;
      &lt;filter&gt;
        &lt;artifact&gt;*:*&lt;/artifact&gt;
        &lt;excludes&gt;
          &lt;exclude&gt;META-INF/<strong>.SF&lt;/exclude&gt;
          &lt;exclude&gt;META-INF/</strong>.DSA&lt;/exclude&gt;
          &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;
        &lt;/excludes&gt;
      &lt;/filter&gt;
    &lt;/filters&gt;
  &lt;/configuration&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;phase&gt;package&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;shade&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;configuration&gt;
        &lt;shadedClassifierName&gt;shaded&lt;/shadedClassifierName&gt;
        &lt;transformers&gt;
          &lt;transformer implementation="org.apache.maven.plugins.shade.resource.ServicesResourceTransformer"/&gt;
          &lt;transformer
              implementation="org.talend.sdk.component.container.maven.shade.ContainerDependenciesTransformer"&gt;
            &lt;session&gt;${session}&lt;/session&gt;
            &lt;userArtifacts&gt;
              &lt;artifact&gt;
                &lt;groupId&gt;org.talend.sdk.component&lt;/groupId&gt;
                &lt;artifactId&gt;sample-component&lt;/artifactId&gt;
                &lt;version&gt;1.0&lt;/version&gt;
                &lt;type&gt;jar&lt;/type&gt;
              &lt;/artifact&gt;
            &lt;/userArtifacts&gt;
          &lt;/transformer&gt;
          &lt;transformer implementation="org.talend.sdk.component.container.maven.shade.PluginTransformer"&gt;
            &lt;session&gt;${session}&lt;/session&gt;
            &lt;userArtifacts&gt;
              &lt;artifact&gt;
                &lt;groupId&gt;org.talend.sdk.component&lt;/groupId&gt;
                &lt;artifactId&gt;sample-component&lt;/artifactId&gt;
                &lt;version&gt;1.0&lt;/version&gt;
                &lt;type&gt;jar&lt;/type&gt;
              &lt;/artifact&gt;
            &lt;/userArtifacts&gt;
          &lt;/transformer&gt;
        &lt;/transformers&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.talend.sdk.component&lt;/groupId&gt;
      &lt;artifactId&gt;nested-maven-repository&lt;/artifactId&gt;
      &lt;version&gt;${the.version}&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The configuration unrelated to transformers depends on your application.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>ContainerDependenciesTransformer</code> embeds a Maven repository and <code>PluginTransformer</code> to create a file that lists (one per line) artifacts (representing plugins).</p>
</div>
<div class="paragraph">
<p>Both transformers share most of their configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>session</code>: must be set to <code>${session}</code>. This is used to retrieve dependencies.</p>
</li>
<li>
<p><code>scope</code>: a comma-separated list of scopes to include in the artifact filtering (note that the default will rely on <code>provided</code> but you can replace it by <code>compile</code>, <code>runtime</code>, <code>runtime+compile</code>, <code>runtime+system</code> or <code>test</code>).</p>
</li>
<li>
<p><code>include</code>: a comma-separated list of artifacts to include in the artifact filtering.</p>
</li>
<li>
<p><code>exclude</code>: a comma-separated list of artifacts to exclude in the artifact filtering.</p>
</li>
<li>
<p><code>userArtifacts</code>: set of artifacts to include (groupId, artifactId, version, type - optional, file - optional for plugin transformer, scope - optional) which can be forced inline. This parameter is mainly useful for<code>PluginTransformer</code>.</p>
</li>
<li>
<p><code>includeTransitiveDependencies</code>: should transitive dependencies of the components be included. Set to <code>true</code> by default. It is active for <code>userArtifacts</code>.</p>
</li>
<li>
<p><code>includeProjectComponentDependencies</code>: should component project dependencies be included. Set to <code>false</code> by default. It is not needed when a job project uses isolation for components.</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
With the component tooling, it is recommended to keep default locations.<br>
Also if you need to use project dependencies, you can need to refactor your project structure to ensure component isolation.<br>
Talend Component Kit lets you handle that part but the recommended practice is to use <code>userArtifacts</code> for the components instead of project <code>&lt;dependencies&gt;</code>.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_containerdependenciestransformer"><a class="anchor" href="#_containerdependenciestransformer"></a>ContainerDependenciesTransformer</h5>
<div class="paragraph">
<p><code>ContainerDependenciesTransformer</code> specific configuration is as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>repositoryBase</code>: base repository location (<code>MAVEN-INF/repository</code> by default).</p>
</li>
<li>
<p><code>ignoredPaths</code>: a comma-separated list of folders not to create in the output JAR. This is common for folders already created by other transformers/build parts.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_plugintransformer"><a class="anchor" href="#_plugintransformer"></a>PluginTransformer</h5>
<div class="paragraph">
<p><code>ContainerDependenciesTransformer</code> specific configuration is the following one:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pluginListResource</code>: base repository location (default to <code>TALEND-INF/plugins.properties</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, if you want to list only the plugins you use, you can configure this transformer as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;transformer implementation="org.talend.sdk.component.container.maven.shade.PluginTransformer"&gt;
  &lt;session&gt;${session}&lt;/session&gt;
  &lt;include&gt;org.talend.sdk.component:component-x,org.talend.sdk.component:component-y,org.talend.sdk.component:component-z&lt;/include&gt;
&lt;/transformer&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_component_scanning_rules_and_default_exclusions"><a class="anchor" href="#_component_scanning_rules_and_default_exclusions"></a>Component scanning rules and default exclusions</h3>
<div class="paragraph">
<p>The framework uses two kind of filterings when scanning your component.
One based on the JAR content - the presence of <code>TALEND-INF/dependencies.txt</code> and one based on the package name.
Make sure that your component definitions (including services) are in a scanned module if they are not registered manually using <code>ComponentManager.instance().addPlugin()</code>, and that the component package is not excluded.</p>
</div>
<div class="sect3">
<h4 id="_package_scanning"><a class="anchor" href="#_package_scanning"></a>Package Scanning</h4>
<div class="paragraph">
<p>Since the framework can be used in the case of <em>fatjars</em> or <em>shades</em>,
and because it still uses scanning,
it is important to ensure we don&#8217;t scan the whole classes for performances reason.</p>
</div>
<div class="paragraph">
<p>Therefore, the following packages are ignored:</p>
</div>
<div class="ulist talend-filterlist">
<ul>
<li>
<p>avro.shaded</p>
</li>
<li>
<p>com.codehale.metrics</p>
</li>
<li>
<p>com.ctc.wstx</p>
</li>
<li>
<p>com.datastax.driver</p>
</li>
<li>
<p>com.fasterxml.jackson</p>
</li>
<li>
<p>com.google.common</p>
</li>
<li>
<p>com.google.thirdparty</p>
</li>
<li>
<p>com.ibm.wsdl</p>
</li>
<li>
<p>com.jcraft.jsch</p>
</li>
<li>
<p>com.kenai</p>
</li>
<li>
<p>com.sun.istack</p>
</li>
<li>
<p>com.sun.xml</p>
</li>
<li>
<p>com.talend.shaded</p>
</li>
<li>
<p>com.thoughtworks</p>
</li>
<li>
<p>io.jsonwebtoken</p>
</li>
<li>
<p>io.netty</p>
</li>
<li>
<p>io.swagger</p>
</li>
<li>
<p>javax</p>
</li>
<li>
<p>jnr</p>
</li>
<li>
<p>junit</p>
</li>
<li>
<p>net.sf.ehcache</p>
</li>
<li>
<p>net.shibboleth</p>
</li>
<li>
<p>org.aeonbits.owner</p>
</li>
<li>
<p>org.apache</p>
</li>
<li>
<p>org.bouncycastle</p>
</li>
<li>
<p>org.codehaus</p>
</li>
<li>
<p>org.cryptacular</p>
</li>
<li>
<p>org.eclipse</p>
</li>
<li>
<p>org.fusesource</p>
</li>
<li>
<p>org.h2</p>
</li>
<li>
<p>org.hamcrest</p>
</li>
<li>
<p>org.hsqldb</p>
</li>
<li>
<p>org.jasypt</p>
</li>
<li>
<p>org.jboss</p>
</li>
<li>
<p>org.joda</p>
</li>
<li>
<p>org.jose4j</p>
</li>
<li>
<p>org.junit</p>
</li>
<li>
<p>org.jvnet</p>
</li>
<li>
<p>org.metatype</p>
</li>
<li>
<p>org.objectweb</p>
</li>
<li>
<p>org.openejb</p>
</li>
<li>
<p>org.opensaml</p>
</li>
<li>
<p>org.slf4j</p>
</li>
<li>
<p>org.swizzle</p>
</li>
<li>
<p>org.terracotta</p>
</li>
<li>
<p>org.tukaani</p>
</li>
<li>
<p>org.yaml</p>
</li>
<li>
<p>serp</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
it is not recommanded but possible to add in your plugin module a
<code>TALEND-INF/scanning.properties</code> file with <code>classloader.includes</code> and
<code>classloader.excludes</code> entries to refine the scanning with custom rules.
In such a case, exclusions win over inclusions.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2 relatedlinks">
<h3 id="_related_articles_14"><a class="anchor" href="#_related_articles_14"></a>Related articles</h3>
<div class="ulist">
<ul>
<li>
<p><a href="tutorial-generate-project-using-starter.html" class="xref page">Generating a project using the starter</a></p>
</li>
<li>
<p><a href="component-define-input.html" class="xref page">Defining an input component</a></p>
</li>
<li>
<p><a href="component-define-processor-output.html" class="xref page">Defining a processor or output component</a></p>
</li>
<li>
<p><a href="component-define-standalone.html" class="xref page">Defining a standalone component</a></p>
</li>
<li>
<p><a href="component-configuration.html" class="xref page">Defining component layout and configuration</a></p>
</li>
<li>
<p><a href="component-registering.html" class="xref page">Registering a component</a></p>
</li>
<li>
<p><a href="component-internationalization.html" class="xref page">Internationalizing a component</a></p>
</li>
<li>
<p><a href="tutorial-configuration-sensitive-data.html" class="xref page">Masking sensitive data</a></p>
</li>
<li>
<p><a href="best-practices.html" class="xref page">Best practices</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
            </div>
          </div>
          <div class="col-sm-3 container article-side-panel">
            <nav class="article-anchors">
              <div class="article-side-actions">

                <ul>
                    <li>
                      <a class="article-side-actions-link" target="_blank" href="https://github.com/Talend/component-runtime/blob/component-runtime-1.50.3/documentation/src/main/antora/modules/ROOT/pages/pdf-creating-components.adoc">
                        <i class="fa fa-edit"></i> &nbsp; &nbsp; Suggest an edit
                      </a>
                    </li>

                    <li>
                                <a class="article-side-actions-link" target="_blank"
                                   href="https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Ftalend.github.io%2Fcomponent-runtime%2Fmain%2Flatest%2Fpdf-creating-components.html&text=Talend%20Component%20Kit%20%3E%3E%20Implementing%20components%20%3E%3E%20&tw_p=tweetbutton&url=https%3A%2F%2Ftalend.github.io%2Fcomponent-runtime%2Fmain%2Flatest%2Fpdf-creating-components.html">
                                    <i class="fab fa-twitter"></i> &nbsp; &nbsp; Tweet
                                </a>
                            </li>
                            <li>
                                <a class="article-side-actions-link"
                                   href="mailto:?subject=Talend%20Component%20Kit%3A%20Implementing%20components&body=Talend%20Component%20Kit%3A%20Implementing%20components%0A%0Ahttps%3A%2F%2Ftalend.github.io%2Fcomponent-runtime%2Fmain%2Flatest%2Fpdf-creating-components.html">
                                    <i class="far fa-envelope"></i> &nbsp; &nbsp; Mail
                                </a>
                            </li>

                </ul>
              </div>
              <h1 class="article-side-toc">In this article</h1>
            </nav>
          </div>
          <a href="#top" class="top">Scroll to top</a>
        </div>
        <script>(window.talend = (window.talend || {})).article = true;</script>
    </article>
              </div>
            </main>
      <footer class="footer ">
    <div class="footer-with-copyright footer-with-links">
        <ul class="footer-links pull-left">
            <li><a class="gwt-Anchor" href="http://www.talend.com/">Talend</a></li>
            <li><a class="gwt-Anchor" href="http://www.talend.com/contact">Contact</a></li>
            <li><a class="gwt-Anchor" href="http://www.talend.com/legal-terms/us-eula">Talend EULA</a></li>
        </ul>
        <div class="footer-copyright pull-right" style="">&copy; 2019 Talend Inc. All rights reserved.</div>
    </div>
</footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchorific/1.2/min/anchorific.min.js" integrity="sha384-ACUAcVkJ3XBvxLPJQqN8h9BfzCtcyqiQoemYyYiS7JJLg9O6aVOVzRYLwqxM2d7/" crossorigin="anonymous"></script>
<script src="../../_/js/talend.js"></script>
  </body>
</html>
